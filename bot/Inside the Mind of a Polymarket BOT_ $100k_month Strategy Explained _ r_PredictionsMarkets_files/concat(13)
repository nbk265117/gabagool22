SML.di("./yqE82LCjaP.js",import.meta.url,"yqE82LCjaP");SML.di("./BkeOOvXyxu.js",import.meta.url,"BkeOOvXyxu");SML.di("./CEf2DD9Ins.js",import.meta.url,"CEf2DD9Ins");SML.di("./CYrPuvCiTj.js",import.meta.url,"CYrPuvCiTj");SML.di("./BDJEoZTk8V.js",import.meta.url,"BDJEoZTk8V");SML.di("./BaesuPO9Of.js",import.meta.url,"BaesuPO9Of");SML.di("./8JomLCOUok.js",import.meta.url,"8JomLCOUok");SML.di("./wBVuScw3I9.js",import.meta.url,"wBVuScw3I9");SML.di("./CaD8uOkU6B.js",import.meta.url,"CaD8uOkU6B");SML.di("./BHQvZGlXFT.js",import.meta.url,"BHQvZGlXFT");SML.di("./BDCIgAVnes.js",import.meta.url,"BDCIgAVnes");SML.di("./Cv4uyJM28X.js",import.meta.url,"Cv4uyJM28X");SML.di("./D61rLtGDFy.js",import.meta.url,"D61rLtGDFy");SML.di("./CdUaC_ScVb.js",import.meta.url,"CdUaC_ScVb");SML.di("./NKGs0TL7Ol.js",import.meta.url,"NKGs0TL7Ol");SML.di("./D6195OvUrb.js",import.meta.url,"D6195OvUrb");SML.di("./BNh_w6AGE-.js",import.meta.url,"BNh_w6AGE-");SML.di("./fqQLNYfMji.js",import.meta.url,"fqQLNYfMji");SML.di("./an-yWnjy9X.js",import.meta.url,"an-yWnjy9X");SML.di("./DJaop39KNp.js",import.meta.url,"DJaop39KNp");SML.di("./rxXg4kAY8P.js",import.meta.url,"rxXg4kAY8P");SML.di("./3jd2bjBQv5.js",import.meta.url,"3jd2bjBQv5");SML.di("./DdQ8ToexAC.js",import.meta.url,"DdQ8ToexAC");SML.di("./BYLoYUGwdw.js",import.meta.url,"BYLoYUGwdw");SML.di("./eBJPTvxH2_.js",import.meta.url,"eBJPTvxH2_");SML.di("./hR5fJPqYWT.js",import.meta.url,"hR5fJPqYWT");SML.di("./CoC1qmwLAS.js",import.meta.url,"CoC1qmwLAS");SML.di("./B5hztqUCve.js",import.meta.url,"B5hztqUCve");SML.di("./B2lxgm_IZD.js",import.meta.url,"B2lxgm_IZD");SML.di("./BXJPp76cO9.js",import.meta.url,"BXJPp76cO9");SML.di("./BSVmU8k8Mu.js",import.meta.url,"BSVmU8k8Mu");SML.di("./CuihbHZvpB.js",import.meta.url,"CuihbHZvpB");SML.di("./B58tzg41t5.js",import.meta.url,"B58tzg41t5");SML.di("./DcxJbk2B3f.js",import.meta.url,"DcxJbk2B3f");SML.di("./wzdls1o9Kk.js",import.meta.url,"wzdls1o9Kk");SML.di("./BJdHdrH8mb.js",import.meta.url,"BJdHdrH8mb");SML.di("./CQXEpftGjH.js",import.meta.url,"CQXEpftGjH");SML.di("./CZtlI9NlXS.js",import.meta.url,"CZtlI9NlXS");SML.di("./CEkHpZAUVH.js",import.meta.url,"CEkHpZAUVH");SML.di("./BtqmVQuPYp.js",import.meta.url,"BtqmVQuPYp");SML.di("./BWUv70NGv2.js",import.meta.url,"BWUv70NGv2");SML.di("./CYHAYFiK-j.js",import.meta.url,"CYHAYFiK-j");SML.di("./tXzIaFuSwM.js",import.meta.url,"tXzIaFuSwM");SML.di("./B39chFHLCe.js",import.meta.url,"B39chFHLCe");SML.di("./DGkwklwWNC.js",import.meta.url,"DGkwklwWNC");
SML.di("./CYrPuvCiTj.js",import.meta.url,"CYrPuvCiTj");
SML.dm("8JomLCOUok",["CYrPuvCiTj"],(async c=>{const{svg:a}=c.a();return{b:c.m(a`<path d="M13 5.02H7v1.8h6v-1.8z"></path><path d="M15.1 1H6.3C4.48 1 3 2.48 3 4.3v11.6C3 17.61 4.39 19 6.1 19h10c.5 0 .9-.4.9-.9s-.4-.9-.9-.9a1.25 1.25 0 010-2.5c.5 0 .9-.4.9-.9V2.9A1.9 1.9 0 0015.1 1zm-1.78 16.2H6.1c-.72 0-1.3-.58-1.3-1.3 0-.66.54-1.2 1.2-1.2h7.33c-.17.38-.28.8-.28 1.25 0 .45.1.87.27 1.25zm1.88-4.3H6c-.43 0-.83.09-1.2.25V4.3c0-.83.67-1.5 1.5-1.5h8.8c.06 0 .1.04.1.1v10z"></path>`,"0 0 20 20","book",!0)}}));
SML.di("./BwTjuuyYF4.js",import.meta.url,"BwTjuuyYF4");SML.di("./0oWl-8XRpj.js",import.meta.url,"0oWl-8XRpj");SML.di("./G2F6lxYj4X.js",import.meta.url,"G2F6lxYj4X");SML.di("./DXjwz3hl6z.js",import.meta.url,"DXjwz3hl6z");SML.di("./BAXYjEpAmc.js",import.meta.url,"BAXYjEpAmc");SML.di("./CYrPuvCiTj.js",import.meta.url,"CYrPuvCiTj");SML.di("./K2R-k6uMNv.js",import.meta.url,"K2R-k6uMNv");SML.di("./BNRfi4XN6P.js",import.meta.url,"BNRfi4XN6P");SML.di("./i6yXqnjJFw.js",import.meta.url,"i6yXqnjJFw");SML.di("./DuqlmJMEve.js",import.meta.url,"DuqlmJMEve");SML.di("./DcAGZFIp9W.js",import.meta.url,"DcAGZFIp9W");SML.di("./DXjVR1zY8s.js",import.meta.url,"DXjVR1zY8s");SML.di("./Bd5EL7RuVw.js",import.meta.url,"Bd5EL7RuVw");SML.di("./B58tzg41t5.js",import.meta.url,"B58tzg41t5");SML.di("./BJdHdrH8mb.js",import.meta.url,"BJdHdrH8mb");SML.di("./BtK6oxQpcr.js",import.meta.url,"BtK6oxQpcr");SML.di("./B_JCIjxvZc.js",import.meta.url,"B_JCIjxvZc");SML.di("./BMmtjiazuU.js",import.meta.url,"BMmtjiazuU");SML.di("./CcWrGyc4YB.js",import.meta.url,"CcWrGyc4YB");SML.di("./C7feCqbuOE.js",import.meta.url,"C7feCqbuOE");SML.di("./RYEovDwKcl.js",import.meta.url,"RYEovDwKcl");SML.di("./C61SRTLcxs.js",import.meta.url,"C61SRTLcxs");SML.di("./BvPcMFr1Lr.js",import.meta.url,"BvPcMFr1Lr");SML.di("./CmYKFGzQfS.js",import.meta.url,"CmYKFGzQfS");SML.di("./wzdls1o9Kk.js",import.meta.url,"wzdls1o9Kk");SML.di("./CCQ28ZUd0-.js",import.meta.url,"CCQ28ZUd0-");SML.di("./CVt1u3m_U2.js",import.meta.url,"CVt1u3m_U2");SML.di("./CA_3X1MrHP.js",import.meta.url,"CA_3X1MrHP");SML.di("./BEcPDyVyFQ.js",import.meta.url,"BEcPDyVyFQ");SML.di("./CCzrQmnfhp.js",import.meta.url,"CCzrQmnfhp");SML.di("./By2sopqXTk.js",import.meta.url,"By2sopqXTk");SML.di("./hgVDyxZ2rL.js",import.meta.url,"hgVDyxZ2rL");SML.di("./COfLy9zygd.js",import.meta.url,"COfLy9zygd");SML.di("./gMEDXxO5ap.js",import.meta.url,"gMEDXxO5ap");SML.di("./D2VJiRUxKq.js",import.meta.url,"D2VJiRUxKq");SML.di("./BDMOQ0-Tf9.js",import.meta.url,"BDMOQ0-Tf9");SML.di("./vhsAG6S_0w.js",import.meta.url,"vhsAG6S_0w");SML.di("./3jd2bjBQv5.js",import.meta.url,"3jd2bjBQv5");SML.di("./DdQ8ToexAC.js",import.meta.url,"DdQ8ToexAC");SML.di("./CsnZoaUuMa.js",import.meta.url,"CsnZoaUuMa");SML.di("./zQvYWz_gjh.js",import.meta.url,"zQvYWz_gjh");SML.di("./CMNh7Qm-HC.js",import.meta.url,"CMNh7Qm-HC");SML.di("./BtqmVQuPYp.js",import.meta.url,"BtqmVQuPYp");SML.di("./CA7qO1Exxg.js",import.meta.url,"CA7qO1Exxg");SML.di("./CkEEx5T_uL.js",import.meta.url,"CkEEx5T_uL");SML.di("./BoQssu-hw1.js",import.meta.url,"BoQssu-hw1");SML.di("./BKIc7C4NNc.js",import.meta.url,"BKIc7C4NNc");SML.di("./C8CrqKCiqJ.js",import.meta.url,"C8CrqKCiqJ");SML.di("./BibysoM2ZF.js",import.meta.url,"BibysoM2ZF");SML.di("./BONkG2e5dl.js",import.meta.url,"BONkG2e5dl");SML.di("./CN37VDT_yn.js",import.meta.url,"CN37VDT_yn");SML.di("./CPEjWpDINz.js",import.meta.url,"CPEjWpDINz");SML.di("./zWWS8JSAAa.js",import.meta.url,"zWWS8JSAAa");SML.di("./DAeuL7zDX0.js",import.meta.url,"DAeuL7zDX0");SML.di("./BG_G1Cif8U.js",import.meta.url,"BG_G1Cif8U");SML.di("./BEOg1WTiXx.js",import.meta.url,"BEOg1WTiXx");SML.di("./DyzvzwR0Ee.js",import.meta.url,"DyzvzwR0Ee");SML.di("./D4Ab94OqLr.js",import.meta.url,"D4Ab94OqLr");SML.di("./Beut7Nrs5X.js",import.meta.url,"Beut7Nrs5X");SML.di("./DcxJbk2B3f.js",import.meta.url,"DcxJbk2B3f");SML.di("./nC5ghTdpSV.js",import.meta.url,"nC5ghTdpSV");SML.di("./jzmnNb68mH.js",import.meta.url,"jzmnNb68mH");SML.di("./B74fdX6mon.js",import.meta.url,"B74fdX6mon");SML.di("./BpRbUpfRsm.js",import.meta.url,"BpRbUpfRsm");SML.di("./3EH0PElp1F.js",import.meta.url,"3EH0PElp1F");
SML.dm("B-nmyLkGts",["CYrPuvCiTj","BwTjuuyYF4","0oWl-8XRpj","G2F6lxYj4X","DXjwz3hl6z","BAXYjEpAmc","K2R-k6uMNv","BNRfi4XN6P","i6yXqnjJFw","DuqlmJMEve","DcAGZFIp9W","DXjVR1zY8s","Bd5EL7RuVw","B58tzg41t5","BJdHdrH8mb","BtK6oxQpcr","B_JCIjxvZc","BMmtjiazuU","CcWrGyc4YB","C7feCqbuOE","RYEovDwKcl","C61SRTLcxs","BvPcMFr1Lr","CmYKFGzQfS","wzdls1o9Kk","CCQ28ZUd0-","CVt1u3m_U2","CA_3X1MrHP","BEcPDyVyFQ","CCzrQmnfhp","By2sopqXTk","hgVDyxZ2rL","COfLy9zygd","gMEDXxO5ap","D2VJiRUxKq","BDMOQ0-Tf9","vhsAG6S_0w","3jd2bjBQv5","DdQ8ToexAC","CsnZoaUuMa","zQvYWz_gjh","CMNh7Qm-HC","BtqmVQuPYp","CA7qO1Exxg","CkEEx5T_uL","BoQssu-hw1","BKIc7C4NNc","C8CrqKCiqJ","BibysoM2ZF","BONkG2e5dl","CN37VDT_yn","CPEjWpDINz","zWWS8JSAAa","DAeuL7zDX0","BG_G1Cif8U","BEOg1WTiXx","DyzvzwR0Ee","D4Ab94OqLr","Beut7Nrs5X","DcxJbk2B3f","nC5ghTdpSV","jzmnNb68mH","B74fdX6mon","BpRbUpfRsm","3EH0PElp1F"],(async E=>{SML.di("./CYHAYFiK-j.js",import.meta.url,"CYHAYFiK-j").then((function(E){return E.f})),SML.di("./Cszz6xIhIJ.js",import.meta.url,"Cszz6xIhIJ").then((function(E){return E.f})),SML.di("./tXzIaFuSwM.js",import.meta.url,"tXzIaFuSwM"),E.g()&&SML.di("./-gARXes9C-.js",import.meta.url,"-gARXes9C-")}));
SML.di("./Bi0AdoC6Eq.js",import.meta.url,"Bi0AdoC6Eq");SML.di("./CYrPuvCiTj.js",import.meta.url,"CYrPuvCiTj");SML.di("./pfiQsiBZuw.js",import.meta.url,"pfiQsiBZuw");SML.di("./CDVxRLVlir.js",import.meta.url,"CDVxRLVlir");SML.di("./wzdls1o9Kk.js",import.meta.url,"wzdls1o9Kk");SML.di("./Bk1BJg_mhJ.js",import.meta.url,"Bk1BJg_mhJ");SML.di("./DIoGZkDZIX.js",import.meta.url,"DIoGZkDZIX");SML.di("./gvWVn4JBWB.js",import.meta.url,"gvWVn4JBWB");SML.di("./i6yXqnjJFw.js",import.meta.url,"i6yXqnjJFw");SML.di("./DDRXhyeDDC.js",import.meta.url,"DDRXhyeDDC");SML.di("./DEMzfTzoPS.js",import.meta.url,"DEMzfTzoPS");SML.di("./CXJ58rbE8s.js",import.meta.url,"CXJ58rbE8s");SML.di("./D1jB1lRGDu.js",import.meta.url,"D1jB1lRGDu");SML.di("./B9Z38jXwJn.js",import.meta.url,"B9Z38jXwJn");SML.di("./GAfaH20Chw.js",import.meta.url,"GAfaH20Chw");SML.di("./HQokY_KEgH.js",import.meta.url,"HQokY_KEgH");SML.di("./BBSbW5jO-u.js",import.meta.url,"BBSbW5jO-u");SML.di("./By24E9DXjo.js",import.meta.url,"By24E9DXjo");SML.di("./005PrA1Byk.js",import.meta.url,"005PrA1Byk");SML.di("./Cv3__sHJQf.js",import.meta.url,"Cv3__sHJQf");
SML.dm("B0psR3MWw7",["CYrPuvCiTj","pfiQsiBZuw","wzdls1o9Kk","gvWVn4JBWB","Bi0AdoC6Eq","CDVxRLVlir","Bk1BJg_mhJ","DIoGZkDZIX","i6yXqnjJFw","DDRXhyeDDC","DEMzfTzoPS","CXJ58rbE8s","D1jB1lRGDu","B9Z38jXwJn","GAfaH20Chw","HQokY_KEgH","BBSbW5jO-u","By24E9DXjo","005PrA1Byk","Cv3__sHJQf"],(async(e,t,i,s)=>{const o=t=>e.c({source:"onboarding",action:"view",noun:"upsell_unit"},{action_info:{page_type:t}}),n=()=>e.c({source:"onboarding",action:"click",noun:"upsell_unit"},{action_info:{type:"not_now"}}),r=()=>async function(t,i){await e.fg(t,i)}(e.fi.Dismiss,e.fh.BypassableXpromo);const l=new Set(e.fj.map((t=>e.bc({source:i.at,action:i.au,noun:t})))),a=e.W(t.W(e.s));let d=class extends a{get shredditSlotterElm(){return this.shadowRoot?.querySelector("shreddit-slotter")}get bottomSheet(){return this.shredditSlotterElm?.shadowRoot?.querySelector("#inline-auth-upsell-bottom-sheet-modal")}get isInlineRendered(){return this.shredditSlotterElm?.getAttribute("slot-name")===e.fk.InlineAuthLandingExperienceXpromo}constructor(){super(),this.isOverlay=!1,this.events=new e.E(this),this._authFlowModalOpen=!1,this._cachedYScrollPosition=0,this.mounted=!1,this.pubSubController=new e.z(this),this.cacheCurrentScrollPosition=()=>{this.isInlineRendered&&(this._cachedYScrollPosition=window.scrollY||window.pageYOffset)},this.debouncedCacheCurrentScrollPosition=e.ae(this.cacheCurrentScrollPosition,300),this._handleDismissButtonClick=()=>{e.k(this,n()),this.bottomSheet?.close(),this._unmount()},this.onShredditSlotterNameChanged=this.events.define("shreddit-slotter-slot-name-changed",(e=>{this.onSlotterRouteChange(e.detail.slotName)})),this._onAuthFlowModalOpen=this.events.define(e.fl.Open,(()=>{this._authFlowModalOpen=!0,this.setIsOverlayAttr()})),this.onFaceplateTrack=this.events.define("faceplate-track",(e=>{e.SAN&&l.has(e.SAN)&&(this._authFlowModalOpen=!1,this.setIsOverlayAttr(),this.switchToInlineXpromo())})),this.pubSubController.subscribe(e.T.TriggerCommentBlockingAuth,(e=>this.openBottomSheet(e)),!1)}connectedCallback(){super.connectedCallback(),this.isObserved||this.enableObserver({threshold:.8}),document.addEventListener("scroll",this.debouncedCacheCurrentScrollPosition,{passive:!0})}disconnectedCallback(){super.disconnectedCallback(),this.isObserved&&this.disableObserver(),document.removeEventListener("scroll",this.debouncedCacheCurrentScrollPosition)}bindDismissButtonListener(){const e=this.shredditSlotterElm?.shadowRoot?.querySelector("#inline-auth-upsell-bottom-sheet-modal-close");e?.addEventListener("click",this._handleDismissButtonClick)}updated(e){super.updated(e);!0===e.get("isOverlay")&&this.onReturnFromOverlay()}onReturnFromOverlay(){setTimeout((()=>{window.scrollTo(0,this._cachedYScrollPosition)}),0)}_unmount(){this.remove()}switchToInlineXpromo(){this.shredditSlotterElm?.setAttribute("slot-name",e.fk.InlineAuthLandingExperienceXpromo)}openBottomSheet({source:e}){this.triggerType===e&&this.bottomSheet?.show()}observerIsIntersectingCallback(){if(this.disableObserver(),this.mounted)return;this.mounted=!0,r();const t=e.N()??e.ar.Unknown;e.k(this,o(t))}setIsOverlayAttr(){const t=this.shredditSlotterElm?.getAttribute("slot-name");this.isOverlay=this._authFlowModalOpen||t!==e.fk.InlineAuthLandingExperienceXpromo}onSlotterRouteChange(t){t===e.fk.InlineAuthLandingExperienceXpromo&&this.bindDismissButtonListener(),this.setIsOverlayAttr()}renderAuthFlowTemplate(){const t=this.querySelector('template[slot="auth-flow"');return t instanceof HTMLTemplateElement?e.X(t):""}render(){return e.x` <div class="${"relative block -mt-3xl z-10 bg-neutral-background shadow-[0px_-40px_21px_var(--color-neutral-background)]"}">${super.render()} ${this.renderAuthFlowTemplate()}</div> `}};d.styles=[e.i`:host([is-overlay]){display:block;position:relative;z-index:100}`,e.t],e._([e.n({type:Boolean,attribute:"is-overlay",reflect:!0})],d.prototype,"isOverlay",void 0),e._([e.n({type:String,attribute:"trigger-type"})],d.prototype,"triggerType",void 0),d=e._([e.e("inline-auth-landing-experience-xpromo-shell")],d);const h=new Set(e.fj.map((t=>e.bc({source:i.at,action:i.au,noun:t})))),c=e.W(e.s);let u=class extends c{constructor(){super(...arguments),this.isOverlay=!1,this.events=new e.E(this),this.isSlim=!1,this.delay=0,this.isVisible=!1,this.canBeShown=!1,this._authFlowModalOpen=!1,this.mounted=!1,this.pubSubController=new e.z(this),this._handleDismissButtonClick=()=>{e.k(this,n()),this._unmount()},this.onShredditSlotterNameChanged=this.events.define("shreddit-slotter-slot-name-changed",(e=>{this.onSlotterRouteChange(e.detail.slotName)})),this._onAuthFlowModalOpen=this.events.define(e.fl.Open,(()=>{this._authFlowModalOpen=!0,this.setIsOverlayAttr()})),this.onFaceplateTrack=this.events.define("faceplate-track",(e=>{e.SAN&&h.has(e.SAN)&&(this._authFlowModalOpen=!1,this.setIsOverlayAttr(),this.switchToInlineXpromo())})),this.hideOrShow=({source:e})=>{e===s.C.Scroll?this.isVisible=!0:e===s.C.Close&&(this.isVisible=!1)}}get shredditSlotterElm(){return this.shadowRoot?.querySelector("shreddit-slotter")}get wrapper(){return this.shadowRoot?.querySelector(".wrapper")}get isInlineRendered(){return this.shredditSlotterElm?.getAttribute("slot-name")===e.fk.InlineAuthLandingExperienceXpromo}connectedCallback(){super.connectedCallback(),this.delay?setTimeout((()=>{this.canBeShown=!0}),this.delay):this.canBeShown=!0,this.pubSubController.subscribe(e.T.TriggerCommentBlockingAuth,this.hideOrShow,!1),this.isObserved||this.enableObserver({threshold:.8})}disconnectedCallback(){super.disconnectedCallback(),this.isObserved&&this.disableObserver()}bindButtonListener(){const e=this.shredditSlotterElm?.shadowRoot?.querySelector("#desktop-cbau-close-button");e?.addEventListener("click",this._handleDismissButtonClick)}updated(e){super.updated(e);if(!0===e.get("isOverlay")||e.has("isVisible")||e.has("canBeShown")){const e=this.shadowRoot.querySelector(".content");this.isVisible&&this.canBeShown?(e.classList.remove("fade-out","hidden"),e.classList.add("fade-in")):(e.classList.remove("fade-in"),e.classList.add("fade-out"))}}_unmount(){this.remove()}switchToInlineXpromo(){this.shredditSlotterElm?.setAttribute("slot-name",e.fk.InlineAuthLandingExperienceXpromo)}observerIsIntersectingCallback(){if(this.disableObserver(),this.mounted)return;this.mounted=!0,r();const t=e.N()??e.ar.Unknown;e.k(this,o(t))}setIsOverlayAttr(){const t=this.shredditSlotterElm?.getAttribute("slot-name");this.isOverlay=this._authFlowModalOpen||t!==e.fk.InlineAuthLandingExperienceXpromo}onSlotterRouteChange(t){t===e.fk.InlineAuthLandingExperienceXpromo&&this.bindButtonListener(),this.setIsOverlayAttr()}renderAuthFlowTemplate(){const t=this.querySelector('template[slot="auth-flow"');return t instanceof HTMLTemplateElement?e.X(t):""}onAnimationEnd(){this.isVisible||this.shadowRoot?.querySelector(".content")?.classList.add("hidden")}render(){return e.x` <div class="content ${this.isOverlay?"":"wrapper sticky -ms-md -me-xs mt-[-65vh] bottom-0 z-[100] hidden"}" @animationend="${this.onAnimationEnd}"> <div class="${this.isOverlay?"":"container p-2xl pb-lg h-[auto] min-h-[65vh] justify-items-end relative flex items-end box-border"}"> <div class="w-100 h-100 absolute z-0 left-0 bottom-0 ${this.isOverlay?"hidden":"overlay"}"></div> <div class="relative z-10 max-w-100 bg-neutral-background-strong ${this.isSlim?"rounded-[12px] border-[1px] border-neutral-border border-solid":"rounded-4"} shadow-md mx-auto pointer-events-auto box-border"> ${this.renderAuthFlowTemplate()} </div> </div> </div>`}};u.styles=[e.i`:host{pointer-events:none}:host([is-overlay]){display:block;position:relative;z-index:100;pointer-events:all}@keyframes fadeInSlideUp{0%{display:none;opacity:0;transform:translateY(50px)}1%{display:block;opacity:0;transform:translateY(50px)}100%{display:block;opacity:1;transform:translateY(0)}}@keyframes fadeOutSlideDown{0%{display:block;opacity:1;transform:translateY(0)}99%{display:block;opacity:0;transform:translateY(50px)}100%{display:none;opacity:0;transform:translateY(50px)}}.fade-in{animation:fadeInSlideUp .8s ease forwards}.fade-out{animation:fadeOutSlideDown .8s ease forwards}.hidden{display:none}.wrapper{margin-top:-65vh}.container{min-height:65vh}.overlay{background:linear-gradient(0deg,var(--color-neutral-background) 10%,rgba(0,0,0,0) 100%)}`,e.t],e._([e.n({type:Boolean,attribute:"is-overlay",reflect:!0})],u.prototype,"isOverlay",void 0),e._([e.n({type:Boolean,attribute:"slim"})],u.prototype,"isSlim",void 0),e._([e.n({type:Number,attribute:"delay"})],u.prototype,"delay",void 0),e._([e.n({type:Boolean})],u.prototype,"isVisible",void 0),e._([e.n({type:Boolean})],u.prototype,"canBeShown",void 0),u=e._([e.e("auth-landing-experience-xpromo-cbau-wrapper")],u)}));
SML.dm("B2_gjouej4",[],(async()=>{var t;!function(t){t.ALL="all",t.AWARD="award",t.POST="posts",t.COMMENT="comments",t.POST_COMMENT="postsandcomments"}(t||(t={}));var e,s;return function(t){t[t.SelectAll=1]="SelectAll",t[t.DeselectAll=2]="DeselectAll",t[t.SpamFiltered=3]="SpamFiltered",t[t.HasReports=4]="HasReports",t[t.SelfPosts=5]="SelfPosts",t[t.PostsWithFlair=6]="PostsWithFlair",t[t.Posts=7]="Posts",t[t.Comments=8]="Comments"}(e||(e={})),function(t){t.translated="translated",t.untranslated="untranslated",t.none="none"}(s||(s={})),{get D(){return e},M:3,get T(){return s},get a(){return t}}}));

SML.di("./CYrPuvCiTj.js",import.meta.url,"CYrPuvCiTj");SML.di("./wzdls1o9Kk.js",import.meta.url,"wzdls1o9Kk");
SML.dm("B3dw1Rvtje",["CYrPuvCiTj","wzdls1o9Kk"],(async(t,o)=>{let n=class extends t.s{constructor(){super(...arguments),this.isMobile=!1,this.showDurationS=8,this.postId="",this.isPillVisible=!1,this.hostCommentCount=0,this.isAddedTabEvent=!1,this.commentCountSubscriptionController=new t.bY(this),this.onData=t=>{this.isAddedTabEvent||(document.querySelector(`.${o.$}`)?.addEventListener("click",this.handleAmaCommentTabClick),this.isAddedTabEvent=!0);const n=t.subscribe.data.hostCommentCountChange||0;n<=0||(this.hostCommentCount+=n,this.isPillVisible?clearTimeout(this.currentCountDown):this.isPillVisible=!0,this.currentCountDown=setTimeout((()=>{this.isPillVisible=!1}),1e3*this.showDurationS))},this.scrollToCommentsAndRefreshAnswers=()=>{const t=document.querySelector(`.${o.$}`)?.offsetTop;if(!t)return;const n=document.querySelector("nav")?.offsetHeight??0;window.scrollTo({top:t-n,behavior:"smooth"});const s=document.querySelector('button[value="answered"]');s?.click()},this.onPillClick=()=>{this.isPillVisible=!1,this.hostCommentCount=0,this.currentCountDown&&clearTimeout(this.currentCountDown),this.currentCountDown=void 0,this.scrollToCommentsAndRefreshAnswers()},this.handleAmaCommentTabClick=t=>{const o=t.target?.getAttribute("value"),n=o&&o.toLowerCase();"all"!==n&&"answered"!==n||(this.isPillVisible=!1,this.hostCommentCount=0,this.currentCountDown&&clearTimeout(this.currentCountDown))}}static get styles(){return[t.i`:host{left:50%;position:fixed;top:calc(var(--shreddit-header-height) + 32px);transform:translateX(-50%);z-index:1001}`,t.t]}getTitleText(){return t.bZ({one:`${this.hostCommentCount} new answer`,other:`${this.hostCommentCount} new answers`,count:this.hostCommentCount});}connectedCallback(){super.connectedCallback(),this.commentCountSubscriptionController.subscribe({query:{operationName:"SubscribeSubscription",query:"\n          subscription SubscribeSubscription($input: SubscribeInput!) {\n            subscribe(input: $input) {\n              ... on BasicMessage {\n                data {\n                  ... on CommentCountUpdateMessageData {\n                    hostCommentCountChange\n                  }\n                }\n              }\n            }\n          }\n          ",variables:{input:{channel:{teamOwner:"CONTENT_AND_COMMUNITIES",category:"COMMENT_COUNT_UPDATE",postID:this.postId}}}},onData:t=>{t.data&&this.onData(t.data)}})}disconnectedCallback(){super.disconnectedCallback(),document.querySelector(`.${o.$}`)?.removeEventListener("click",this.handleAmaCommentTabClick)}render(){return this.isPillVisible?t.u({appearance:"primary",attributes:{onclick:this.onPillClick},children:this.getTitleText(),size:this.isMobile?t.v.Small:t.v.Large,role:"button"}):t.A}};t._([t.n({type:Boolean,attribute:"is-mobile"})],n.prototype,"isMobile",void 0),t._([t.n({type:Number,attribute:"show-duration-in-s"})],n.prototype,"showDurationS",void 0),t._([t.n({type:String,attribute:"post-id"})],n.prototype,"postId",void 0),t._([t.j()],n.prototype,"isPillVisible",void 0),t._([t.j()],n.prototype,"hostCommentCount",void 0),n=t._([t.e("ama-new-comment-pill")],n)}));
SML.di("./CYrPuvCiTj.js",import.meta.url,"CYrPuvCiTj");SML.di("./CCQ28ZUd0-.js",import.meta.url,"CCQ28ZUd0-");SML.di("./CA_3X1MrHP.js",import.meta.url,"CA_3X1MrHP");SML.di("./CVt1u3m_U2.js",import.meta.url,"CVt1u3m_U2");SML.di("./BEcPDyVyFQ.js",import.meta.url,"BEcPDyVyFQ");SML.di("./zQvYWz_gjh.js",import.meta.url,"zQvYWz_gjh");SML.di("./wzdls1o9Kk.js",import.meta.url,"wzdls1o9Kk");SML.di("./vhsAG6S_0w.js",import.meta.url,"vhsAG6S_0w");SML.di("./CMNh7Qm-HC.js",import.meta.url,"CMNh7Qm-HC");SML.di("./BKIc7C4NNc.js",import.meta.url,"BKIc7C4NNc");SML.di("./BibysoM2ZF.js",import.meta.url,"BibysoM2ZF");SML.di("./CCzrQmnfhp.js",import.meta.url,"CCzrQmnfhp");SML.di("./C8CrqKCiqJ.js",import.meta.url,"C8CrqKCiqJ");SML.di("./D2VJiRUxKq.js",import.meta.url,"D2VJiRUxKq");SML.di("./hgVDyxZ2rL.js",import.meta.url,"hgVDyxZ2rL");SML.di("./COfLy9zygd.js",import.meta.url,"COfLy9zygd");SML.di("./gMEDXxO5ap.js",import.meta.url,"gMEDXxO5ap");SML.di("./BDMOQ0-Tf9.js",import.meta.url,"BDMOQ0-Tf9");SML.di("./3jd2bjBQv5.js",import.meta.url,"3jd2bjBQv5");SML.di("./DdQ8ToexAC.js",import.meta.url,"DdQ8ToexAC");SML.di("./CsnZoaUuMa.js",import.meta.url,"CsnZoaUuMa");SML.di("./BtqmVQuPYp.js",import.meta.url,"BtqmVQuPYp");SML.di("./CA7qO1Exxg.js",import.meta.url,"CA7qO1Exxg");SML.di("./CkEEx5T_uL.js",import.meta.url,"CkEEx5T_uL");SML.di("./BoQssu-hw1.js",import.meta.url,"BoQssu-hw1");SML.di("./By2sopqXTk.js",import.meta.url,"By2sopqXTk");
SML.dm("BAXYjEpAmc",["CYrPuvCiTj","BEcPDyVyFQ","zQvYWz_gjh","wzdls1o9Kk","vhsAG6S_0w","CMNh7Qm-HC","BKIc7C4NNc","BibysoM2ZF","CCzrQmnfhp","C8CrqKCiqJ","D2VJiRUxKq","CCQ28ZUd0-","CA_3X1MrHP","CVt1u3m_U2","hgVDyxZ2rL","COfLy9zygd","gMEDXxO5ap","BDMOQ0-Tf9","3jd2bjBQv5","DdQ8ToexAC","CsnZoaUuMa","BtqmVQuPYp","CA7qO1Exxg","CkEEx5T_uL","BoQssu-hw1","By2sopqXTk"],(async(e,t,i,s,r,o,a,n,d,l,h)=>{class p{constructor(t){this.areItemsLoaded=!1,(this.host=t).addController(this),this.eventController=new e.E(t)}get galleryItemEls(){return Array.from(this.host.querySelectorAll(`.${r.C}`))}async waitUntilImagesLoaded(){return new Promise((e=>{this.areItemsLoaded&&e();let t=0;const i=()=>{t++,t===this.galleryItemEls.length&&(this.areItemsLoaded=!0,e())};this.galleryItemEls.forEach((e=>{const t=e.querySelector("img");t.complete?i():t.onload=()=>{i()}}))}))}handleCarouselArrowClick(t){const i=t.detail.direction===o.C.FORWARDS?a.G.Forward:a.G.Backward,s=function({direction:t,numGalleryItems:i,placement:s,impressionId:r,postId:o,authorId:a,subredditId:n,title:d}){return e.c({source:"gallery",action:"click",noun:t},{gallery:{num_items:i,position:void 0},ad_metadata:{placement:s,impression_id:r},post:{id:o,author_id:a,promoted:!0,subreddit_id:n,title:d,type:e.fu.Gallery}})}({authorId:this.host.authorId,impressionId:this.host.impressionId,numGalleryItems:this.host.galleryItems?.length??0,placement:this.host.placement,postId:this.host.id,subredditId:this.host.subredditId,title:this.host.title,direction:i});e.k(this.host,s)}getActiveSlideIndex(e){const t="SHREDDIT-DYNAMIC-AD-LINK"===e.nodeName?e:e.querySelector("shreddit-dynamic-ad-link"),i=t?.galleryIndex;return void 0===i?null:i}async observeGalleryItems(e){try{await this.waitUntilImagesLoaded()}catch(e){return}this.galleryItemEls.forEach((t=>e.observe(t)))}async setupGalleryViewMediaTracking(){const e=this.createGalleryViewMediaObserver();this.galleryViewMediaObserver=e,await this.observeGalleryItems(this.galleryViewMediaObserver)}async setupPixelImpressionTracking(){const e=this.createImpressionObserver();this.galleryImpressionObserver=e,await this.observeGalleryItems(this.galleryImpressionObserver)}teardownObserver(e){e&&this.galleryItemEls.forEach((t=>e.unobserve(t)))}createImpressionObserver(){return new IntersectionObserver((t=>{t.forEach((t=>{if(!t.isIntersecting)return;const i=this.getActiveSlideIndex(t.target);if(null===i)return;const r=e.d(s.O,{itemIndex:i,postId:this.host.id});this.host.dispatchEvent(r),this.galleryImpressionObserver?.unobserve(t.target)}))}),{threshold:.25})}createGalleryViewMediaObserver(){return new IntersectionObserver((t=>{t.forEach((t=>{if(!t.isIntersecting)return;const i=this.getActiveSlideIndex(t.target);null!==i&&(e.k(this.host,function({galleryIdx:t,galleryData:i,impressionId:s,postId:r}){const o=i[t];if(!o)return null;const a={action_info:{page_type:e.ar.PostDetail},post:{id:r,promoted:!0},media:{id:o.media.id,height:o.media.height,width:o.media.width,url:o.outboundUrl},gallery:{id:o.id,position:t,media_ids:i.map((e=>e.media.id)),num_items:i.length},ad_metadata:{impression_id:s}};return e.c({source:"gallery",action:"view",noun:"media"},a)}({galleryData:this.host.galleryItems||[],galleryIdx:i,impressionId:this.host.impressionId,postId:this.host.id})),this.galleryViewMediaObserver?.unobserve(t.target))}))}),{threshold:.2})}async hostConnected(){this.host.galleryItems&&(this.eventController.define("faceplate-carousel:slide",this.handleCarouselArrowClick.bind(this)),await this.setupPixelImpressionTracking(),await this.setupGalleryViewMediaTracking())}hostDisconnected(){this.teardownObserver(this.galleryImpressionObserver),this.teardownObserver(this.galleryViewMediaObserver)}}class m{constructor(e){this.isDown=!1,this.startX=0,this.scrollLeft=0,this.onMouseDown=e=>{this.galleryImagesContainer&&(this.isDown=!0,this.startX=e.pageX-this.galleryImagesContainer.offsetLeft,this.scrollLeft=this.galleryImagesContainer.scrollLeft)},this.unsetIsDown=()=>{this.isDown=!1},this.onMouseMove=e=>{if(!this.galleryImagesContainer)return;if(!this.isDown)return;e.preventDefault();const t=3*(e.pageX-this.galleryImagesContainer.offsetLeft-this.startX);this.galleryImagesContainer.scrollLeft=this.scrollLeft-t},(this.host=e).addController(this)}get hasHorizontalDragBehavior(){return this.host.useLegacyDragNav}get galleryImagesContainer(){return document.querySelector(`.${r.G}`)}setupDesktopDragScroll(){this.galleryImagesContainer?.addEventListener("mousedown",this.onMouseDown),this.galleryImagesContainer?.addEventListener("mouseleave",this.unsetIsDown),this.galleryImagesContainer?.addEventListener("mouseup",this.unsetIsDown),this.galleryImagesContainer?.addEventListener("mousemove",this.onMouseMove)}teardownDesktopDragScroll(){this.galleryImagesContainer?.removeEventListener("mousedown",this.onMouseDown),this.galleryImagesContainer?.removeEventListener("mouseleave",this.unsetIsDown),this.galleryImagesContainer?.removeEventListener("mouseup",this.unsetIsDown),this.galleryImagesContainer?.removeEventListener("mousemove",this.onMouseMove)}hostConnected(){this.host.useLegacyDragNav&&this.galleryImagesContainer&&this.setupDesktopDragScroll()}hostDisconnected(){this.host.useLegacyDragNav&&this.galleryImagesContainer&&this.teardownDesktopDragScroll()}}const u=t.W(e.s);let c=class extends u{constructor(){super(...arguments),this.adEvents=[],this.outboundLinkUrl="",this.isBlank=!1,this.impressionId="0",this.isShoppingAd=!1,this.isHideAdEnabled=!1,this.hidden=!1,this.isMobile=!1,this.useLegacyDragNav=!1,this.shouldTrackPosition=!1,this.isPdpCombined=!1,this.isCategoryTakeover=!1,this.isReminderAd=!1,this.shouldSkipInitAdObserverOnStartup=!1,this.isHiddenOnSort=!1,this.isClickDisabled=!1,this._events=new e.E(this),this.toggleableVideoAdController=null,this.galleryTrackingController=new p(this),this.dragScroll=new m(this),this.pubsub=new e.z(this),this.handleRsvpClick=t=>{e.k(this,l.t(this))},this.handleUnRsvpClick=t=>{e.k(this,l.v(this))},this.handleClick=t=>{if(!this.isReminderAd)return;const i=this.querySelector("ad-reminder-button");if(i?.isReminderSet||!1)return;n.s(t,{includeCommentsPageChecks:!0})||(t.preventDefault(),this.pubsub.publish(e.T.TriggerAdReminderModal,{postId:this.id}))},this.handleStartAdObserver=()=>{this.enableAdObserver(this.getAdObserverConfig())},this.onAdUpdateAction=({action:e,value:t,impressionId:i})=>{this.impressionId===i&&e===d.a.hide&&(this.hidden=t)},this.handleHideOnSort=()=>{this.isHiddenOnSort=!0},this.handleBlockPdpAdClick=({delay:e})=>{this.isClickDisabled=!0,setTimeout((()=>{this.isClickDisabled=!1}),e)},this._trackAdClick=this._events.define("observe-ad-click",(async t=>{await this._activateLeadGenDialog(),i.s({leadGenInfo:this.leadGenInfo,postId:this.id,impressionId:this.impressionId,onSuccess:()=>this.dispatchEvent(e.d(e.eZ))})}))}static get styles(){return[e.t]}getAdObserverConfig(){return{events:t.e(this.adEvents),postId:this.id,impressionId:this.impressionId,postElement:this,galleryItems:this.galleryItems?.map((e=>({...e,adEvents:t.e(e.adEvents||[])}))),adType:this.adType}}async connectedCallback(){super.connectedCallback(),this.shouldSkipInitAdObserverOnStartup?window.addEventListener(h.E,this.handleStartAdObserver):this.handleStartAdObserver(),this.pubsub.subscribe(e.T.AdUpdated,this.onAdUpdateAction),this.pubsub.subscribe(e.T.CommentSort,this.handleHideOnSort),this.pubsub.subscribe(e.T.BlockPdpAdClick,this.handleBlockPdpAdClick),this.addEventListener(d.b,this.handleRsvpClick),this.addEventListener(d.E,this.handleUnRsvpClick),this.addEventListener("click",this.handleClick),await this.resolveCarouselDependencies(),await this.resolveVideoAdDependencies()}async disconnectedCallback(){super.disconnectedCallback(),this.adMeasurer&&this.adMeasurer.handleUnload(),this.removeEventListener(d.b,this.handleRsvpClick),this.removeEventListener(d.E,this.handleUnRsvpClick),this.removeEventListener("click",this.handleClick),window.removeEventListener(h.E,this.handleStartAdObserver)}_activateLeadGenDialog(){return i.a({leadGenInfo:this.leadGenInfo})}get shouldRenderCarouselComponent(){return Array.isArray(this.galleryItems)&&!this.isMobile&&!this.useLegacyDragNav}async resolveCarouselDependencies(){this.shouldRenderCarouselComponent&&(await SML.di("./D-loTAz0IJ.js",import.meta.url,"D-loTAz0IJ"),this.querySelector("shreddit-gallery-carousel")?.classList.remove("flex"))}async resolveVideoAdDependencies(){if(this.adType!==e.e_.VIDEO)return;const{ToggleableVideoAdController:t}=await SML.di("./BDMOQ0-Tf9.js",import.meta.url,"BDMOQ0-Tf9").then((function(e){return e.i}));this.toggleableVideoAdController=new t(this,((e,t)=>{this.adMeasurer&&(this.adMeasurer.dimensions={height:e,width:t})}))}render(){return this.hidden&&this.isHideAdEnabled||this.isHiddenOnSort?e.A:e.x` <div class="${s.j(this.isMobile&&this.placement!==e.ah.COMMENT_TREES&&"mx-md",this.isClickDisabled&&"pointer-events-none")}"> <slot name="full-comments-page-ad-link"></slot> ${this.isCategoryTakeover?e.x` <slot name="ad-format-content"></slot> <slot name="expanded-video-player"></slot> <slot name="disclaimer-text"></slot> `:e.x` <slot name="credit-bar"></slot> <slot name="ad-format-content"></slot> <slot name="call-to-action-row"></slot> <slot name="ad-reminder-bar"></slot> <slot name="expanded-video-player"></slot> `} </div> `}};e._([e.n({type:String,attribute:"post-id"})],c.prototype,"postId",void 0),e._([e.n({type:Array,attribute:"ad-events",reflect:!0})],c.prototype,"adEvents",void 0),e._([e.n({type:Array,attribute:"gallery-items"})],c.prototype,"galleryItems",void 0),e._([e.n({type:String,attribute:"outbound-link-url",reflect:!0})],c.prototype,"outboundLinkUrl",void 0),e._([e.n({type:Boolean,attribute:"is-blank"})],c.prototype,"isBlank",void 0),e._([e.n({type:Object,attribute:"lead-gen-info"})],c.prototype,"leadGenInfo",void 0),e._([e.n({type:String,attribute:"impression-id"})],c.prototype,"impressionId",void 0),e._([e.n({type:String,attribute:"ad-type"})],c.prototype,"adType",void 0),e._([e.n({type:String,attribute:"campaign-id"})],c.prototype,"campaignId",void 0),e._([e.n({type:Boolean,attribute:"is-shopping-ad"})],c.prototype,"isShoppingAd",void 0),e._([e.n({type:Boolean,attribute:"is-hide-ad-enabled"})],c.prototype,"isHideAdEnabled",void 0),e._([e.n({type:Boolean,reflect:!0})],c.prototype,"hidden",void 0),e._([e.n({type:Boolean,attribute:"is-mobile"})],c.prototype,"isMobile",void 0),e._([e.n({type:Boolean,attribute:"use-legacy-drag-nav"})],c.prototype,"useLegacyDragNav",void 0),e._([e.n({type:String,attribute:"subreddit-id"})],c.prototype,"subredditId",void 0),e._([e.n({type:String,attribute:"country-code"})],c.prototype,"countryCode",void 0),e._([e.n({type:String,attribute:"author-id"})],c.prototype,"authorId",void 0),e._([e.n({type:String})],c.prototype,"title",void 0),e._([e.n({type:String})],c.prototype,"domain",void 0),e._([e.n({type:String,attribute:"placement"})],c.prototype,"placement",void 0),e._([e.n({type:Boolean,attribute:"should-track-position"})],c.prototype,"shouldTrackPosition",void 0),e._([e.n({type:Boolean,attribute:"is-pdp-combined"})],c.prototype,"isPdpCombined",void 0),e._([e.n({type:String,attribute:"encrypted-tracking-payload"})],c.prototype,"encryptedTrackingPayload",void 0),e._([e.n({type:Array,attribute:"additional-event-metadata"})],c.prototype,"additionalEventMetadata",void 0),e._([e.n({type:String,attribute:"ad-transparency-encoded-data"})],c.prototype,"adTransparencyEncodedData",void 0),e._([e.n({type:Boolean,attribute:"is-category-takeover"})],c.prototype,"isCategoryTakeover",void 0),e._([e.n({type:Boolean,attribute:"is-reminder-ad"})],c.prototype,"isReminderAd",void 0),e._([e.n({type:String,attribute:"ads-correlation-id"})],c.prototype,"adsCorrelationId",void 0),e._([e.n({type:Boolean,attribute:"skip-init-ad-observer-on-startup"})],c.prototype,"shouldSkipInitAdObserverOnStartup",void 0),e._([e.j()],c.prototype,"isHiddenOnSort",void 0),e._([e.j()],c.prototype,"isClickDisabled",void 0),c=e._([e.e("shreddit-comments-page-ad")],c)}));
SML.di("./CYrPuvCiTj.js",import.meta.url,"CYrPuvCiTj");SML.di("./BaesuPO9Of.js",import.meta.url,"BaesuPO9Of");SML.di("./BvU2E9FwXI.js",import.meta.url,"BvU2E9FwXI");SML.di("./Dm8cQHQfWH.js",import.meta.url,"Dm8cQHQfWH");SML.di("./CEf2DD9Ins.js",import.meta.url,"CEf2DD9Ins");SML.di("./DVa-SVjWU5.js",import.meta.url,"DVa-SVjWU5");SML.di("./D4Ab94OqLr.js",import.meta.url,"D4Ab94OqLr");SML.di("./BG_G1Cif8U.js",import.meta.url,"BG_G1Cif8U");SML.di("./BRVVLb7Eld.js",import.meta.url,"BRVVLb7Eld");SML.di("./B39chFHLCe.js",import.meta.url,"B39chFHLCe");SML.di("./wzdls1o9Kk.js",import.meta.url,"wzdls1o9Kk");SML.di("./DGkwklwWNC.js",import.meta.url,"DGkwklwWNC");
SML.dm("BArq6DHk8G",["CYrPuvCiTj","BaesuPO9Of","BvU2E9FwXI","Dm8cQHQfWH","CEf2DD9Ins","DVa-SVjWU5","D4Ab94OqLr","BG_G1Cif8U","BRVVLb7Eld","B39chFHLCe","wzdls1o9Kk","DGkwklwWNC"],(async(e,i)=>{let t=class extends e.s{constructor(){super(...arguments),this.target=null,this.includeWrapper=!1,this.tooltipText=""}renderButton(){return e.x` <shreddit-pubsub-publisher class="nd:visible" topic="${e.T.TriggerCommunityAppearanceMenu}" data="${JSON.stringify({target:this.target})}"> <slot> <rpl-tooltip appearance="inverted" placement="left"> ${e.u({appearance:"secondary",shape:"pill",attributes:{"aria-label":"Edit community appearance",type:"button"},leadingIcon:i.e({size:e.I.Small}),size:e.v.Small})} <span slot="content"> ${this.tooltipText||"Edit community appearance"} </span> </rpl-tooltip> </slot> </shreddit-pubsub-publisher>`;}render(){return this.includeWrapper?e.x`<div class="community-appearance flex justify-between items-center"> <span class="flex gap-2xs items-center text-12"> ${"Community Appearance"}</span> <span class="flex gap-2xs items-center"> ${this.renderButton()} </span> </div>`:this.renderButton();}};t.styles=[e.t],e._([e.n({type:String})],t.prototype,"target",void 0),e._([e.n({type:Boolean,attribute:"include-wrapper"})],t.prototype,"includeWrapper",void 0),e._([e.n({type:String,attribute:"tooltip-text"})],t.prototype,"tooltipText",void 0),t=e._([e.e("community-appearance-entrypoint")],t)}));
SML.dm("BHQvZGlXFT",[],(async()=>{var t;!function(t){t.Main="main",t.TextArea="text-area",t.Button="button",t.SubredditRules="subreddit-rules",t.Image="image",t.CommunityList="community-list",t.Calendar="calendar",t.Custom="custom",t.IdCard="id-card",t.PostFlair="post-flair",t.Menu="menu"}(t||(t={}));const e={[t.Main]:"",[t.TextArea]:"text_widget",[t.Button]:"button_widget",[t.SubredditRules]:"rules_widget",[t.Image]:"image_widget",[t.CommunityList]:"community_list_widget",[t.Calendar]:"calendar_widget",[t.Custom]:"custom_widget",[t.IdCard]:"id_card",[t.PostFlair]:"post_flair_widget",[t.Menu]:"bookmarks_widget"};return{C:"community-widget-edit-modal",get E(){return t},W:e}}));

SML.di("./CYrPuvCiTj.js",import.meta.url,"CYrPuvCiTj");SML.di("./CeSKxcW4bq.js",import.meta.url,"CeSKxcW4bq");
SML.dm("BIGAbYW0aG",["CYrPuvCiTj","CeSKxcW4bq"],(async(t,e)=>{const i="rpl-dialog-trigger:trigger-clicked",r=[];function s(t,e){const i=e.getBoundingClientRect();Object.assign(t.style,{position:"fixed",left:`${i.left}px`,height:`${i.height}px`})}function n(t){Object.assign(t.style,{position:"",left:"",height:"",opacity:"",transform:""})}let a=class extends(t.o(t.bJ(t.s))){constructor(){super(...arguments),this.open=!1,this.dialogId="",this.triggerElement=null,this.entityDialogRootContainer=null,this.prefersReducedMotion=window.matchMedia("(prefers-reduced-motion: reduce)").matches,this.shouldEnableNavPersistence=!1,this.handleAfterNavigation=()=>{this.open&&(window.removeEventListener("afterRoute",this.handleAfterNavigation),this.connectedCallback(),this.rightSidebar.classList.add("hidden"));const t=this.rightSidebar.classList.contains("hidden");!r.length&&t&&this.close(!1)},this.handleTriggerEvent=t=>{const e=t.detail;if(e.dialogId===this.dialogId&&!this.open&&!this.triggerElement)return this.triggerElement=e.triggerElement,this.show()}}connectedCallback(){super.connectedCallback(),document.addEventListener(i,this.handleTriggerEvent),this.rightSidebar=document.getElementById("right-sidebar-container"),this.entityDialogRootContainer=document.getElementById(e.R),this.rightSidebar?.parentElement||console.log("Missing right sidebar element. Please make sure right sidebar is rendered before trigger this overlay."),super.portalRoot=this.entityDialogRootContainer??document.body,this.prefersReducedMotion||(this.portalContainer.style.transition="opacity 120ms linear, transform 280ms cubic-bezier(0.54, 1.15, 1, 1)",this.rightSidebar.style.transition="opacity 80ms linear, transform 200ms cubic-bezier(0.54, 1.15, 1, 1)"),this.portalContainer.className="\n    rounded-4 w-[316px] min-w-[316px] xs:max-h-[calc(100vh-var(--shreddit-header-height)-32px)]\n    xs:sticky xs:top-[calc(var(--shreddit-header-height)+16px)] xs:overflow-hidden box-border\n    flex flex-col border border-solid border-neutral-border-weak shadow-neutral-border-weak shadow-[0px_1px_8px_0px] hidden xs:flex",this.shouldEnableNavPersistence&&window.addEventListener("afterRoute",this.handleAfterNavigation)}disconnectedCallback(){document.removeEventListener(i,this.handleTriggerEvent),super.disconnectedCallback(),this.shouldEnableNavPersistence&&!this.open&&window.removeEventListener("afterRoute",this.handleAfterNavigation)}closeAllOpenOverlays(){r.forEach((t=>t.close(!1)))}handleTransitionEnd(t){t?(this.rightSidebar.classList.add("hidden"),n(this.portalContainer)):(this.removePortal(),n(this.rightSidebar))}runAnimation(t){const e={opening:{portal:{start:{transform:"translateX(32px)",opacity:"0"},end:{transform:"translateX(0px)",opacity:"1"}},rightSidebar:{start:{transform:"translateX(0px)",opacity:"1"},end:{transform:"translateX(-16px)",opacity:"0"}}},closing:{portal:{start:{transform:"translateX(0px)",opacity:"1"},end:{transform:"translateX(32px)",opacity:"0"}},rightSidebar:{start:{transform:"translateX(-16px)",opacity:"0"},end:{transform:"translateX(0px)",opacity:"1"}}}},i=t?e.opening:e.closing;Object.assign(this.portalContainer.style,i.portal.start),Object.assign(this.rightSidebar.style,i.rightSidebar.start),requestAnimationFrame((()=>{Object.assign(this.portalContainer.style,i.portal.end),Object.assign(this.rightSidebar.style,i.rightSidebar.end)})),this.portalContainer.addEventListener("transitionend",(()=>this.handleTransitionEnd(t)),{once:!0})}show(){this.open=!0,this.triggerElement?.addOpenAttributes();const t=r.length>0;this.closeAllOpenOverlays(),r.push(this),s(this.portalContainer,this.rightSidebar),this.appendTemplateContentTo(this.portalContainer,{cache:!0}),this.attachPortal();this.prefersReducedMotion||t?this.handleTransitionEnd(!0):this.runAnimation(!0)}close(t=!0){this.open=!1,r.splice(r.indexOf(this),1),s(this.rightSidebar,this.portalContainer),this.rightSidebar.classList.remove("hidden");this.prefersReducedMotion||!t?this.handleTransitionEnd(!1):this.runAnimation(!1),this.triggerElement&&(this.triggerElement.removeOpenAttributes(),this.triggerElement=null)}userClose(){this.close(),this.dispatchEvent(new CustomEvent("shreddit-right-rail-overlay:user-closed"))}render(){return t.x` <div class="sticky top-0 bg-neutral-background z-10"> <div class="flex justify-between items-center"> <div class="flex justify-between py-md pl-md pr-0 items-center"> <slot name="header" class="font-semibold text-18 text-neutral-content-strong"></slot> </div> ${t.u({appearance:"secondary",attributes:{type:"button",onclick:()=>this.userClose(),className:"shrink-0 mx-sm mr-sm ml-xs"},size:t.v.Small,leadingIcon:t.al({size:t.I.Small})})} </div> <hr class="border-neutral-border-weak border-0 border-t mx-md my-0"> </div> <slot></slot> `}};a.styles=[t.t],t._([t.n({type:Boolean,reflect:!0})],a.prototype,"open",void 0),t._([t.n({type:String,reflect:!0,attribute:"dialog-id"})],a.prototype,"dialogId",void 0),t._([t.n({type:Boolean,attribute:"should-enable-nav-persistence"})],a.prototype,"shouldEnableNavPersistence",void 0),a=t._([t.e("shreddit-right-rail-overlay")],a)}));
SML.di("./CYrPuvCiTj.js",import.meta.url,"CYrPuvCiTj");SML.di("./CEf2DD9Ins.js",import.meta.url,"CEf2DD9Ins");SML.di("./7mROGt_umO.js",import.meta.url,"7mROGt_umO");
SML.dm("BSYJ2p6cWD",["CYrPuvCiTj","CEf2DD9Ins","7mROGt_umO"],(async(e,t,n)=>{let o=class extends t.R{constructor(){super(...arguments),this.country=""}connectedCallback(){super.connectedCallback(),e.am.get(e.an)||(this.timeoutHandle=setTimeout((()=>{this.show(),e.ao({country:this.country,name:e.an,value:"true"})}),1e3))}disconnectedCallback(){super.disconnectedCallback(),this.timeoutHandle&&clearTimeout(this.timeoutHandle)}async show(){const t=e.c({source:n.C.RightRailUpsell,action:e.ap.View,noun:n.a.RightRailUpsell});return e.k(this,t),super.show()}async hide(){const t=e.c({source:n.C.RightRailUpsell,action:"dismiss",noun:n.a.RightRailUpsell});return e.k(this,t),super.hide()}};e._([e.n({type:String})],o.prototype,"country",void 0),o=e._([e.e("create-channel-coachmark")],o);let s=class extends e.s{constructor(){super(...arguments),this.container=null,this.dropdowns=null,this.containerSelector="html",this.hideDropdowns=()=>{this.dropdowns?.length&&[...this.dropdowns].forEach((e=>e.close()))},this.hideDropdownsDebounced=e.ae(this.hideDropdowns,200,{leading:!0,trailing:!0})}connectedCallback(){super.connectedCallback(),this.container=document.querySelector(this.containerSelector),this.container&&(this.container.addEventListener("scroll",this.hideDropdownsDebounced,{passive:!0}),this.dropdowns=this.container.getElementsByTagName("faceplate-dropdown-menu"))}disconnectedCallback(){super.disconnectedCallback(),this.container&&this.container.removeEventListener("scroll",this.hideDropdownsDebounced)}render(){return e.A}};e._([e.n({type:String,attribute:"container-selector"})],s.prototype,"containerSelector",void 0),s=e._([e.e("dropdown-close-on-scroll")],s)}));
SML.di("./CYrPuvCiTj.js",import.meta.url,"CYrPuvCiTj");
SML.dm("BYLoYUGwdw",["CYrPuvCiTj"],(async a=>{const{svg:c}=a.a(),t=a.m(c`<path d="M18.176 14.218l-.925-1.929A2.577 2.577 0 0117 11.184V8c0-3.86-3.141-7-7-7S3 4.14 3 8v3.184c0 .38-.087.762-.251 1.105l-.927 1.932A1.103 1.103 0 002.82 15.8h3.26A4.007 4.007 0 009.999 19a4.008 4.008 0 003.919-3.2h3.26c.381 0 .729-.192.934-.514a1.1 1.1 0 00.062-1.068h.002zM10 17.2c-.93 0-1.722-.583-2.043-1.4h4.087a2.197 2.197 0 01-2.043 1.4H10zm8.584-12.178a.9.9 0 01-.82-.527 8.542 8.542 0 00-2.073-2.827.9.9 0 011.207-1.335 10.386 10.386 0 012.504 3.417.9.9 0 01-.818 1.272zm-17.168 0a.898.898 0 01-.818-1.273A10.385 10.385 0 013.101.332a.9.9 0 011.208 1.335 8.564 8.564 0 00-2.073 2.827.902.902 0 01-.82.528z"></path>`,"0 0 20 20","notifications-active-fill"),{svg:h}=a.a();return{H:"enabled_copy2",a:a.m(h`<path d="M18.176 14.218l-.925-1.929A2.577 2.577 0 0117 11.184V8c0-3.86-3.141-7-7-7S3 4.14 3 8v3.184c0 .38-.087.762-.251 1.105l-.927 1.932A1.103 1.103 0 002.82 15.8h3.26A4.007 4.007 0 009.999 19a4.008 4.008 0 003.919-3.2h3.26c.381 0 .729-.192.934-.514a1.1 1.1 0 00.062-1.068h.002zM10 17.2c-.93 0-1.722-.583-2.043-1.4h4.087a2.197 2.197 0 01-2.043 1.4H10zM3.925 14l.447-.933c.28-.584.429-1.235.429-1.883V8c0-2.867 2.332-5.2 5.199-5.2A5.205 5.205 0 0115.199 8v3.184c0 .648.148 1.299.429 1.883l.447.933H3.925zm14.659-8.978a.9.9 0 01-.82-.527 8.542 8.542 0 00-2.073-2.827.9.9 0 011.207-1.335 10.386 10.386 0 012.504 3.417.9.9 0 01-.818 1.272zm-17.168 0a.898.898 0 01-.818-1.273A10.385 10.385 0 013.101.332a.9.9 0 011.208 1.335 8.564 8.564 0 00-2.073 2.827.902.902 0 01-.82.528z"></path>`,"0 0 20 20","notifications-active"),b:"enabled_copy1",n:t}}));
SML.di("./CYrPuvCiTj.js",import.meta.url,"CYrPuvCiTj");SML.di("./zWWS8JSAAa.js",import.meta.url,"zWWS8JSAAa");SML.di("./Beut7Nrs5X.js",import.meta.url,"Beut7Nrs5X");
SML.dm("Bd5EL7RuVw",["CYrPuvCiTj","zWWS8JSAAa","Beut7Nrs5X"],(async(e,t,a)=>{const i=e=>{if(!e)return!1;return e.getTime()+864e5>Date.now()},n=e=>{const t=new Date(e);return isNaN(t?.getTime?.())?null:t};let o=class extends e.s{constructor(){super(...arguments),this.subredditId="",this.prefixedSubredditName="",this.banner="",this.icon="",this.iconColor="",this.subredditDescription="",this.allowJoinRequests=!1,this.subredditType="restricted",this.isCommentingRestricted=!1,this.isPostingRestricted=!1,this.modMessageBody="",this.preventDefault=e=>{e.preventDefault()},this.hasPendingRequest=()=>i(this.lastJoinRequest),this.getStatusText=()=>{switch(!0){case"restricted"===this.subredditType&&this.isCommentingRestricted&&this.isPostingRestricted:return "This is a restricted community. Only approved members can contribute.";case"restricted"===this.subredditType&&this.isPostingRestricted:return "This is a restricted community. Only approved users can post, but you can still comment.";case"restricted"===this.subredditType&&this.isCommentingRestricted:return "This is a restricted community. Only approved users can comment, but you can still post.";case"private"===this.subredditType:default:return "This is a private community. Only approved members can view and contribute.";}},this.handleTextChange=e=>{this.modMessageBody=e.target.value},this.hide=()=>this.dialog?.hide(),this.showModal=()=>{var t;this.dialog?.showModal(),e.k(this,(t=this.subredditType,e.c({source:"content_gate",action:"view",noun:"modal"},{action_info:{setting_value:t}})))},this.requestClientGQL=e.ag,this.requestToJoin=async()=>{if(!this.modMessageBody||!this.subredditId)return;var t;e.k(this,(t=this.subredditType,e.c({source:"content_gate",action:"click",noun:"request_to_join"},{action_info:{setting_value:t}})));const{data:a,errors:i}=await this.requestClientGQL({operation:e.af.SendMessageToSubreddit,variables:{input:{body:this.modMessageBody,subject:"[join] Request to join",subredditId:this.subredditId}}});a.sendMessageToSubreddit.ok&&!i.length?(this.allowJoinRequests=!1,await this.requestClientGQL({operation:e.af.UpdateContributorRequestTimestamp,variables:{input:{subredditId:this.subredditId,requestDatetime:(new Date).toUTCString()}}}),this.dispatchEvent(e.d("faceplate-alert",{level:e.a0.success,message:"Request to join has been sent"}))):this.dispatchEvent(e.d("faceplate-alert",{level:e.a0.error,cause:"uncategorized",message:"Request to join failed to send"}))},this.renderTemplate=()=>e.x`<div class="relative max-w-lg w-100 rounded-md overflow-hidden"> <faceplate-img class="h-[88px] w-full object-cover bg-secondary-background" src="${this.banner}"></faceplate-img> <div class="relative flex items-end gap-sm pl-lg -top-[35px] -mb-[35px]"> ${this.icon?e.x`<img loading="lazy" src="${this.icon}" alt="" class="border-solid border-ui-modalbackground border-md w-[80px] aspect-square rounded-full overflow-hidden">`:a.c({size:e.I.ExtraLarge,attributes:{style:this.iconColor?`color: ${this.iconColor}`:void 0,className:"rounded-full w-[80px] h-[80px] border-neutral-background border-lg border-solid"}})} <h4 class="title text-18 font-bold mb-md bg-cover bg-no-repeat"> ${this.prefixedSubredditName} </h4> </div> ${this.open?e.A:e.u({appearance:"media",attributes:{className:"absolute top-md right-md ",onclick:this.hide},size:e.v.Small,leadingIcon:e.al({size:e.I.Small})})} <div class="flex flex-col justify-center px-md"> ${this.isPrivate&&this.subredditDescription?e.x`<p class="description text-14 mt-sm mb-0">${this.subredditDescription}</p>`:e.A} <p class="status-text text-14 mt-sm font-bold">${this.getStatusText()}</p> ${this.allowJoinRequests?e.x`<faceplate-textarea-input size="expanded" appearance="${t.a.SECONDARY}" class="mb-sm" name="textarea" faceplate-focusable required .value="${this.modMessageBody}" @input="${this.handleTextChange}"> <span slot="label">${"Request to join"}</span> </faceplate-textarea-input>`:e.A} </div> <div class="flex justify-end gap-md p-md pt-0"> ${this.isPrivate?e.u({appearance:"secondary",attributes:{onclick:()=>{return e.k(this,(t=this.subredditType,e.c({source:"content_gate",action:"click",noun:"go_to_homepage_button"},{action_info:{setting_value:t}})));var t},href:"/"},children:"Go To Homepage"}):e.u({appearance:"secondary",attributes:{onclick:()=>{return e.k(this,(t=this.subredditType,e.c({source:"content_gate",action:"click",noun:"go_to_community_button"},{action_info:{setting_value:t}})));var t},href:`/${this.prefixedSubredditName}`},children:"Go To Community"})} ${this.allowJoinRequests?e.u({appearance:"primary",attributes:{onclick:this.requestToJoin,disabled:!this.modMessageBody},size:e.v.Medium,children:"Send Request"}):e.u({appearance:"primary",attributes:{onclick:()=>{return e.k(this,(t=this.subredditType,e.c({source:"content_gate",action:"click",noun:"message_mods_button"},{action_info:{setting_value:t}})));var t},href:`/message/compose?to=${encodeURIComponent(this.prefixedSubredditName)}`},size:e.v.Medium,children:"Message Mods"})} </div> </div>`}get isPrivate(){return"private"===this.subredditType}getBgImagePath(){const t=this.isLoggedIn?"home":"popular",a=e.ab()?"dark":void 0,i=this.isDesktop?void 0:"mobile";return`${CLIENT_CONFIG.STATIC_BASE_URL}assets/feeds/${[t,a,i].filter(Boolean).join("-")}.jpg`}connectedCallback(){super.connectedCallback(),this.allowJoinRequests&&this.hasPendingRequest()&&(this.allowJoinRequests=!1),"private"===this.subredditType&&this.updateComplete.then((()=>{this?.dialog?.addEventListener("rpl-dialog:request-close",this.preventDefault),this?.dialog?.showModal()}))}disconnectedCallback(){super.disconnectedCallback(),"private"===this.subredditType&&this?.dialog?.removeEventListener("rpl-dialog:request-close",this.preventDefault),this?.dialog?.hide()}render(){return e.x`<rpl-dialog dialog-id="protected-community-modal" overlay-blur ?open="${this.open}" .litTemplateChildren="${this.renderTemplate()}"> </rpl-dialog>${"private"===this.subredditType&&this.open?e.x` <div class="blurred-bg h-screen-without-header w-100 bg-no-repeat bg-cover" style="background-image:url('${this.getBgImagePath()}')"> <div class="shade h-full w-full"></div> </div>`:e.A}`}};o.styles=[e.t],e._([e.n({type:String,attribute:"subreddit-id"})],o.prototype,"subredditId",void 0),e._([e.n({type:String,attribute:"prefixed-name"})],o.prototype,"prefixedSubredditName",void 0),e._([e.n({type:String,attribute:"banner"})],o.prototype,"banner",void 0),e._([e.n({type:String,attribute:"icon"})],o.prototype,"icon",void 0),e._([e.n({type:String,attribute:"icon-color"})],o.prototype,"iconColor",void 0),e._([e.n({type:String,attribute:"subreddit-description"})],o.prototype,"subredditDescription",void 0),e._([e.n({type:Boolean,attribute:"allow-join-requests",reflect:!0})],o.prototype,"allowJoinRequests",void 0),e._([e.n({type:String,attribute:"last-join-request",converter:{fromAttribute:n}})],o.prototype,"lastJoinRequest",void 0),e._([e.n({type:String,attribute:"subreddit-type"})],o.prototype,"subredditType",void 0),e._([e.n({type:Boolean,attribute:"is-commenting-restricted"})],o.prototype,"isCommentingRestricted",void 0),e._([e.n({type:Boolean,attribute:"is-posting-restricted"})],o.prototype,"isPostingRestricted",void 0),e._([e.n({type:Boolean})],o.prototype,"open",void 0),e._([e.n({type:Boolean})],o.prototype,"isLoggedIn",void 0),e._([e.n({type:Boolean})],o.prototype,"isDesktop",void 0),e._([e.j()],o.prototype,"modMessageBody",void 0),e._([e.Y("rpl-dialog")],o.prototype,"dialog",void 0),o=e._([e.e("protected-community-modal")],o);let s=class extends e.s{constructor(){super(...arguments),this.appearance="primary",this.size=e.v.Medium,this.unstyled=!1,this.hasPendingRequest=()=>i(this.lastJoinRequest),this.handleOpenModal=t=>{var a;this.hasPendingRequest()&&this.pendingLink||!this._modal||(t.preventDefault(),t.stopPropagation(),this._modal.showModal(),e.k(this,(a=this._modal.subredditType,e.c({source:"content_gate",action:"click",noun:"request_approval_button"},{action_info:{setting_value:a}}))))},this.handleKeydown=e=>{"Enter"!==e.key&&"Space"!==e.key||this.handleOpenModal(e)}}get _modal(){return document.querySelector("protected-community-modal")}render(){return this.unstyled?e.x`<slot @click="${this.handleOpenModal}" @keydown="${this.handleKeydown}" name="${e.aa(this.hasPendingRequest()?"pending-request":void 0)}"></slot>`:e.u({appearance:this.appearance,size:this.size,attributes:{href:this.hasPendingRequest()&&this.pendingLink?this.pendingLink:void 0,disabled:this.disabledWhenPending&&this.hasPendingRequest(),onclick:this.handleOpenModal},children:e.x`<slot name="${e.aa(this.hasPendingRequest()?"pending-request":void 0)}"></slot>`})}};s.styles=[e.t],e._([e.n({type:String})],s.prototype,"appearance",void 0),e._([e.n({type:String})],s.prototype,"size",void 0),e._([e.n({type:Boolean})],s.prototype,"unstyled",void 0),e._([e.n({type:Boolean,attribute:"disabled-when-pending"})],s.prototype,"disabledWhenPending",void 0),e._([e.n({type:String,attribute:"pending-link"})],s.prototype,"pendingLink",void 0),e._([e.n({type:String,attribute:"last-join-request",converter:{fromAttribute:n}})],s.prototype,"lastJoinRequest",void 0),s=e._([e.e("protected-community-modal-trigger")],s)}));
SML.di("./CYrPuvCiTj.js",import.meta.url,"CYrPuvCiTj");SML.di("./DEMzfTzoPS.js",import.meta.url,"DEMzfTzoPS");SML.di("./By24E9DXjo.js",import.meta.url,"By24E9DXjo");SML.di("./pfiQsiBZuw.js",import.meta.url,"pfiQsiBZuw");
SML.dm("Bi0AdoC6Eq",["CYrPuvCiTj","DEMzfTzoPS","By24E9DXjo","pfiQsiBZuw"],(async(t,e,n,o)=>{let i;const r=new Uint8Array(16);function s(){if(!i&&(i="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!i))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return i(r)}var l=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i;const a=[];for(let t=0;t<256;++t)a.push((t+256).toString(16).slice(1));function p(t,e=0){return(a[t[e+0]]+a[t[e+1]]+a[t[e+2]]+a[t[e+3]]+"-"+a[t[e+4]]+a[t[e+5]]+"-"+a[t[e+6]]+a[t[e+7]]+"-"+a[t[e+8]]+a[t[e+9]]+"-"+a[t[e+10]]+a[t[e+11]]+a[t[e+12]]+a[t[e+13]]+a[t[e+14]]+a[t[e+15]]).toLowerCase()}function c(t){if(!function(t){return"string"==typeof t&&l.test(t)}(t))throw TypeError("Invalid UUID");let e;const n=new Uint8Array(16);return n[0]=(e=parseInt(t.slice(0,8),16))>>>24,n[1]=e>>>16&255,n[2]=e>>>8&255,n[3]=255&e,n[4]=(e=parseInt(t.slice(9,13),16))>>>8,n[5]=255&e,n[6]=(e=parseInt(t.slice(14,18),16))>>>8,n[7]=255&e,n[8]=(e=parseInt(t.slice(19,23),16))>>>8,n[9]=255&e,n[10]=(e=parseInt(t.slice(24,36),16))/1099511627776&255,n[11]=e/4294967296&255,n[12]=e>>>24&255,n[13]=e>>>16&255,n[14]=e>>>8&255,n[15]=255&e,n}function u(t,e,n){function o(t,o,i,r){var s;if("string"==typeof t&&(t=function(t){t=unescape(encodeURIComponent(t));const e=[];for(let n=0;n<t.length;++n)e.push(t.charCodeAt(n));return e}(t)),"string"==typeof o&&(o=c(o)),16!==(null===(s=o)||void 0===s?void 0:s.length))throw TypeError("Namespace must be array-like (16 iterable integer values, 0-255)");let l=new Uint8Array(16+t.length);if(l.set(o),l.set(t,o.length),l=n(l),l[6]=15&l[6]|e,l[8]=63&l[8]|128,i){r=r||0;for(let t=0;t<16;++t)i[r+t]=l[t];return i}return p(l)}try{o.name=t}catch(t){}return o.DNS="6ba7b810-9dad-11d1-80b4-00c04fd430c8",o.URL="6ba7b811-9dad-11d1-80b4-00c04fd430c8",o}function d(t){return 14+(t+64>>>9<<4)+1}function h(t,e){const n=(65535&t)+(65535&e);return(t>>16)+(e>>16)+(n>>16)<<16|65535&n}function g(t,e,n,o,i,r){return h((s=h(h(e,t),h(o,r)))<<(l=i)|s>>>32-l,n);var s,l}function S(t,e,n,o,i,r,s){return g(e&n|~e&o,t,e,i,r,s)}function A(t,e,n,o,i,r,s){return g(e&o|n&~o,t,e,i,r,s)}function f(t,e,n,o,i,r,s){return g(e^n^o,t,e,i,r,s)}function m(t,e,n,o,i,r,s){return g(n^(e|~o),t,e,i,r,s)}u("v3",48,(function(t){if("string"==typeof t){const e=unescape(encodeURIComponent(t));t=new Uint8Array(e.length);for(let n=0;n<e.length;++n)t[n]=e.charCodeAt(n)}return function(t){const e=[],n=32*t.length,o="0123456789abcdef";for(let i=0;i<n;i+=8){const n=t[i>>5]>>>i%32&255,r=parseInt(o.charAt(n>>>4&15)+o.charAt(15&n),16);e.push(r)}return e}(function(t,e){t[e>>5]|=128<<e%32,t[d(e)-1]=e;let n=1732584193,o=-271733879,i=-1732584194,r=271733878;for(let e=0;e<t.length;e+=16){const s=n,l=o,a=i,p=r;n=S(n,o,i,r,t[e],7,-680876936),r=S(r,n,o,i,t[e+1],12,-389564586),i=S(i,r,n,o,t[e+2],17,606105819),o=S(o,i,r,n,t[e+3],22,-1044525330),n=S(n,o,i,r,t[e+4],7,-176418897),r=S(r,n,o,i,t[e+5],12,1200080426),i=S(i,r,n,o,t[e+6],17,-1473231341),o=S(o,i,r,n,t[e+7],22,-45705983),n=S(n,o,i,r,t[e+8],7,1770035416),r=S(r,n,o,i,t[e+9],12,-1958414417),i=S(i,r,n,o,t[e+10],17,-42063),o=S(o,i,r,n,t[e+11],22,-1990404162),n=S(n,o,i,r,t[e+12],7,1804603682),r=S(r,n,o,i,t[e+13],12,-40341101),i=S(i,r,n,o,t[e+14],17,-1502002290),o=S(o,i,r,n,t[e+15],22,1236535329),n=A(n,o,i,r,t[e+1],5,-165796510),r=A(r,n,o,i,t[e+6],9,-1069501632),i=A(i,r,n,o,t[e+11],14,643717713),o=A(o,i,r,n,t[e],20,-373897302),n=A(n,o,i,r,t[e+5],5,-701558691),r=A(r,n,o,i,t[e+10],9,38016083),i=A(i,r,n,o,t[e+15],14,-660478335),o=A(o,i,r,n,t[e+4],20,-405537848),n=A(n,o,i,r,t[e+9],5,568446438),r=A(r,n,o,i,t[e+14],9,-1019803690),i=A(i,r,n,o,t[e+3],14,-187363961),o=A(o,i,r,n,t[e+8],20,1163531501),n=A(n,o,i,r,t[e+13],5,-1444681467),r=A(r,n,o,i,t[e+2],9,-51403784),i=A(i,r,n,o,t[e+7],14,1735328473),o=A(o,i,r,n,t[e+12],20,-1926607734),n=f(n,o,i,r,t[e+5],4,-378558),r=f(r,n,o,i,t[e+8],11,-2022574463),i=f(i,r,n,o,t[e+11],16,1839030562),o=f(o,i,r,n,t[e+14],23,-35309556),n=f(n,o,i,r,t[e+1],4,-1530992060),r=f(r,n,o,i,t[e+4],11,1272893353),i=f(i,r,n,o,t[e+7],16,-155497632),o=f(o,i,r,n,t[e+10],23,-1094730640),n=f(n,o,i,r,t[e+13],4,681279174),r=f(r,n,o,i,t[e],11,-358537222),i=f(i,r,n,o,t[e+3],16,-722521979),o=f(o,i,r,n,t[e+6],23,76029189),n=f(n,o,i,r,t[e+9],4,-640364487),r=f(r,n,o,i,t[e+12],11,-421815835),i=f(i,r,n,o,t[e+15],16,530742520),o=f(o,i,r,n,t[e+2],23,-995338651),n=m(n,o,i,r,t[e],6,-198630844),r=m(r,n,o,i,t[e+7],10,1126891415),i=m(i,r,n,o,t[e+14],15,-1416354905),o=m(o,i,r,n,t[e+5],21,-57434055),n=m(n,o,i,r,t[e+12],6,1700485571),r=m(r,n,o,i,t[e+3],10,-1894986606),i=m(i,r,n,o,t[e+10],15,-1051523),o=m(o,i,r,n,t[e+1],21,-2054922799),n=m(n,o,i,r,t[e+8],6,1873313359),r=m(r,n,o,i,t[e+15],10,-30611744),i=m(i,r,n,o,t[e+6],15,-1560198380),o=m(o,i,r,n,t[e+13],21,1309151649),n=m(n,o,i,r,t[e+4],6,-145523070),r=m(r,n,o,i,t[e+11],10,-1120210379),i=m(i,r,n,o,t[e+2],15,718787259),o=m(o,i,r,n,t[e+9],21,-343485551),n=h(n,s),o=h(o,l),i=h(i,a),r=h(r,p)}return[n,o,i,r]}(function(t){if(0===t.length)return[];const e=8*t.length,n=new Uint32Array(d(e));for(let o=0;o<e;o+=8)n[o>>5]|=(255&t[o/8])<<o%32;return n}(t),8*t.length))}));var w={randomUUID:"undefined"!=typeof crypto&&crypto.randomUUID&&crypto.randomUUID.bind(crypto)};function y(t,e,n){if(w.randomUUID&&!t)return w.randomUUID();const o=(t=t||{}).random||(t.rng||s)();return o[6]=15&o[6]|64,o[8]=63&o[8]|128,p(o)}function v(t,e,n,o){switch(t){case 0:return e&n^~e&o;case 1:case 3:return e^n^o;case 2:return e&n^e&o^n&o}}function b(t,e){return t<<e|t>>>32-e}u("v5",80,(function(t){const e=[1518500249,1859775393,2400959708,3395469782],n=[1732584193,4023233417,2562383102,271733878,3285377520];if("string"==typeof t){const e=unescape(encodeURIComponent(t));t=[];for(let n=0;n<e.length;++n)t.push(e.charCodeAt(n))}else Array.isArray(t)||(t=Array.prototype.slice.call(t));t.push(128);const o=t.length/4+2,i=Math.ceil(o/16),r=new Array(i);for(let e=0;e<i;++e){const n=new Uint32Array(16);for(let o=0;o<16;++o)n[o]=t[64*e+4*o]<<24|t[64*e+4*o+1]<<16|t[64*e+4*o+2]<<8|t[64*e+4*o+3];r[e]=n}r[i-1][14]=8*(t.length-1)/Math.pow(2,32),r[i-1][14]=Math.floor(r[i-1][14]),r[i-1][15]=8*(t.length-1)&4294967295;for(let t=0;t<i;++t){const o=new Uint32Array(80);for(let e=0;e<16;++e)o[e]=r[t][e];for(let t=16;t<80;++t)o[t]=b(o[t-3]^o[t-8]^o[t-14]^o[t-16],1);let i=n[0],s=n[1],l=n[2],a=n[3],p=n[4];for(let t=0;t<80;++t){const n=Math.floor(t/20),r=b(i,5)+v(n,s,l,a)+p+e[n]+o[t]>>>0;p=a,a=l,l=b(s,30)>>>0,s=i,i=r}n[0]=n[0]+i>>>0,n[1]=n[1]+s>>>0,n[2]=n[2]+l>>>0,n[3]=n[3]+a>>>0,n[4]=n[4]+p>>>0}return[n[0]>>24&255,n[0]>>16&255,n[0]>>8&255,255&n[0],n[1]>>24&255,n[1]>>16&255,n[1]>>8&255,255&n[1],n[2]>>24&255,n[2]>>16&255,n[2]>>8&255,255&n[2],n[3]>>24&255,n[3]>>16&255,n[3]>>8&255,255&n[3],n[4]>>24&255,n[4]>>16&255,n[4]>>8&255,255&n[4]]}));const C=o.W(t.s);let I=class extends C{constructor(){super(...arguments),this.authFlow=t.q.Unknown,this.locale="en-EN",this.disableGoogleSSOButton=!1,this.disableAppleSSOButton=!1,this.subscribeToEmailDigest=!1,this.shouldNotTrackContinueWithGoogleTelemetry=!1,this.googleApiController=new n.G(this,n.G.ButtonUX),this.googleSSOButtonWidth=0,this.googleSlotName=`${this.tagName.toLowerCase()}-google-${y()}`,this.googleSlotController=new o.L(this,this.googleSlotName),this.appleSlotName=`${this.tagName.toLowerCase()}-apple-${y()}`,this.appleSlotController=new o.L(this,this.appleSlotName),this.authFlowController=new e.A(this),this.googleSigninBoundOnClick=this.onContinueWithGoogleClick.bind(this),this.renderGoogleSSOButton=()=>{const t=this.googleSlotController.slotted;if(t?.classList.add("h-[40px]"),0===this.container.clientWidth)return;const e=Math.max(Math.min(this.container.clientWidth,400),251);if(e===this.googleSSOButtonWidth)return;this.googleSSOButtonWidth=e,window.google?.accounts.id.renderButton(t,{logo_alignment:"left",size:"large",shape:"pill",text:"continue_with",theme:"outline",type:"standard",locale:this.locale,width:this.googleSSOButtonWidth,state:this.googleSlotName,click_listener:this.googleSigninBoundOnClick});const n=t?.querySelector("iframe");n?.setAttribute("tabindex","0")},this.onGoogleCredentialResponse=async e=>{if(!this.isConnected)return;const o=this.getActiveElement();if(o===document.body||this.contains(o)||this.googleSlotController.slotted?.contains(o))try{const o=n.G.parseCredentialResponse(e);return this.dispatchSSOAuthSuccess({email:o.email,idToken:e.credential,isSignedInAutomatically:!1,provider:t.dx.Google})}catch(e){window.Sentry?.captureException?.(e),this.dispatchSSOAuthFailure(t.dx.Google)}},this.initAppleSSOButton=()=>{if(!this.isConnected)return;if(this.disableAppleSSOButton)return;const e=this.appleSlotController.slotted;if(e){e.id=t.dy;try{window.AppleID.auth.init({clientId:CLIENT_CONFIG.APPLE_SSO_CLIENT_ID,redirectURI:window.location.origin,scope:"email",state:t.am.get("csrf_token"),usePopup:!0})}catch(t){window.Sentry?.captureException?.(t)}finally{e.id="",this.dispatchEvent(t.d("focusable-content-loaded"))}}else window.Sentry?.captureMessage?.("Apple SSO button container could not be found")},this.onAppleIDSignInOnSuccess=({detail:e})=>{if(!this.isConnected)return;if(!e?.authorization)return window.Sentry?.captureMessage?.("Apple sign in success event is missing authorization data"),void this.dispatchSSOAuthFailure(t.dx.Apple,"missing_data");const n=e.authorization.id_token;if(!n)return window.Sentry?.captureMessage?.("Apple sign in success event is missing an id token"),void this.dispatchSSOAuthFailure(t.dx.Apple,"missing_token");this.dispatchSSOAuthSuccess({email:e.user?.email||"",idToken:n,isSignedInAutomatically:!1,provider:t.dx.Apple})},this.onAppleIDSignInFailure=({detail:e})=>{this.isConnected&&"popup_closed_by_user"!==e?.error&&this.dispatchSSOAuthFailure(t.dx.Apple,e?.error)}}connectedCallback(){super.connectedCallback?.(),this.googleSSOButtonWidth=0,this.initGoogleSSOButton(),document.addEventListener("AppleIDSignInOnFailure",this.onAppleIDSignInFailure),document.addEventListener("AppleIDSignInOnSuccess",this.onAppleIDSignInOnSuccess),this.insertRecaptchaScript()}disconnectedCallback(){super.disconnectedCallback?.(),document.removeEventListener("AppleIDSignInOnFailure",this.onAppleIDSignInFailure),document.removeEventListener("AppleIDSignInOnSuccess",this.onAppleIDSignInOnSuccess),this.resizeObserver?.disconnect()}firstUpdated(){this.injectScript(t.dz,this.initAppleSSOButton)}async injectScript(t,e){try{await n.l(`script#${t}`),e()}catch(t){window.Sentry?.captureException?.(t)}}getActiveElement(){return document.activeElement}async initGoogleSSOButton(){this.isConnected&&(await this.googleApiController.initialize(),window.google&&(this.resizeObserver=new ResizeObserver(this.renderGoogleSSOButton),this.resizeObserver.observe(this.container)),this.dispatchEvent(t.d("focusable-content-loaded")))}renderGoogleSSOButtonContainer(){return this.disableGoogleSSOButton?t.A:t.x` <div class="focusable"> <div class="rounded-5 h-[40px] flex justify-center items-center box-border overflow-hidden relative capitalize"> <slot class="${t.dA}" name="${this.googleSlotName}"></slot> </div> </div> `}renderAppleSSOButtonContainer(){return this.disableAppleSSOButton?t.A:t.x` <div class="relative focusable"> <div class="rounded-5 h-[40px] bg-white border-sm border-solid border-[#dadce0] cursor-pointer px-sm overflow-hidden relative text-center select-none align-middle whitespace-nowrap"> <div class="text-[#131313] flex flex-nowrap flex-row h-100 items-center justify-between relative w-100"> <svg height="18" viewBox="0 0 18 18" width="18" xmlns="http://www.w3.org/2000/svg"> <path fill="currentColor" strike="inherit" d="m8.8162 4.15385c.78824 0 1.7763-.54927 2.3647-1.28163.5329-.6637.9215-1.59059.9215-2.517484 0-.125875-.0111-.251748-.0333-.354736-.8771.0343293-1.9318.606484-2.56458 1.37317-.49959.5836-.95477 1.49905-.95477 2.43738 0 .13732.02221.27464.03331.32041.05551.01144.14433.02289.23314.02289zm-2.77549 13.84615c1.07689 0 1.55427-.7438 2.89761-.7438 1.36558 0 1.66528.7209 2.86428.7209 1.1768 0 1.9651-1.1214 2.7089-2.2199.8327-1.2588 1.1768-2.4946 1.199-2.5519-.0777-.0228-2.3314-.9726-2.3314-3.63887 0-2.3115 1.7763-3.35283 1.8762-3.43293-1.1768-1.73935-2.9642-1.78512-3.4527-1.78512-1.3211 0-2.39799.8239-3.07521.8239-.73274 0-1.69861-.77813-2.84211-.77813-2.17599 0-4.38528 1.85378-4.38528 5.35537 0 2.17418.82155 4.47428 1.83183 5.96188.86595 1.2587 1.62088 2.2886 2.70888 2.2886z"/> </svg> <span class="flex-grow font-[500] text-14 overflow-hidden overflow-ellipsis align-top"> ${"Continue With Apple"} </span> </div> <div class="opacity-0 absolute top-0 start-0 end-0 bottom-0"> <slot class="${t.dy}" name="${this.appleSlotName}" @click="${this.onContinueWithAppleClick}" @keydown="${this.onContinueWithAppleKeydown}"></slot> </div> </div> </div> `;}dispatchSSOAuthFailure(t,e="unknown"){this.authFlowController.trackSSOFailure({authFlow:this.authFlow,provider:t,reason:e})}async dispatchSSOAuthSuccess(e){const n=(await this.getRecaptchaTokenSafe())??void 0,o=t.d("sso-auth-success",e);if(this.dispatchEvent(o),!o.defaultPrevented)return this.authFlowController.identityProviderSigin({...e,recaptchaToken:n,recaptchaAction:this.captchaAction,authFlow:this.authFlow,subscribeToEmailDigest:this.subscribeToEmailDigest})}onContinueWithGoogleClick(){this.trackContinueWithGoogle()}onContinueWithAppleClick(){this.trackContinueWithApple()}onContinueWithAppleKeydown(t){"Enter"!==t.key&&"Space"!==t.key||this.trackContinueWithApple()}trackContinueWithGoogle(){this.shouldNotTrackContinueWithGoogleTelemetry||t.k(this,e.a(this.authFlow,t.dx.Google))}trackContinueWithApple(){t.k(this,e.a(this.authFlow,t.dx.Apple))}render(){return t.x` <div id="container" class="flex flex-col gap-xs mx-auto max-w-[400px]"> ${this.renderGoogleSSOButtonContainer()} ${this.renderAppleSSOButtonContainer()} </div> `}};I.styles=[t.i`.focusable:focus-within{outline:var(--color-global-focus) auto 1px;outline-offset:2px}`,t.t],t._([t.n({type:String,attribute:"auth-flow"})],I.prototype,"authFlow",void 0),t._([t.n({type:String,attribute:"locale"})],I.prototype,"locale",void 0),t._([t.n({type:Boolean,attribute:"disable-google-sso-button"})],I.prototype,"disableGoogleSSOButton",void 0),t._([t.n({type:Boolean,attribute:"disable-apple-sso-button"})],I.prototype,"disableAppleSSOButton",void 0),t._([t.n({type:Boolean,attribute:"subscribe-to-email"})],I.prototype,"subscribeToEmailDigest",void 0),t._([t.n({type:Boolean,attribute:"should-not-track-continue-with-google-telemetry"})],I.prototype,"shouldNotTrackContinueWithGoogleTelemetry",void 0),t._([t.Y("#container")],I.prototype,"container",void 0),I=t._([t.e("auth-flow-sso-buttons")],I)}));
SML.di("./CYrPuvCiTj.js",import.meta.url,"CYrPuvCiTj");SML.di("./BEOg1WTiXx.js",import.meta.url,"BEOg1WTiXx");SML.di("./Be6gGpScOz.js",import.meta.url,"Be6gGpScOz");SML.di("./DyzvzwR0Ee.js",import.meta.url,"DyzvzwR0Ee");SML.di("./DVVJsZH047.js",import.meta.url,"DVVJsZH047");SML.di("./wzdls1o9Kk.js",import.meta.url,"wzdls1o9Kk");SML.di("./JaGlTj3I-9.js",import.meta.url,"JaGlTj3I-9");SML.di("./CZtlI9NlXS.js",import.meta.url,"CZtlI9NlXS");SML.di("./DCbB57ubLb.js",import.meta.url,"DCbB57ubLb");
SML.dm("Bme97yW7Ze",["CYrPuvCiTj","BEOg1WTiXx","Be6gGpScOz","DyzvzwR0Ee","DVVJsZH047","wzdls1o9Kk","JaGlTj3I-9","CZtlI9NlXS","DCbB57ubLb"],(async(e,t,i,o,r,s,a,n,l)=>{function m(e){let t="";for(const i of e.root.children)t+=d(i);return t}function d(e){switch(e.type){case l.F.getType():return e.children.map(d).join("");case l.j.getType():{const t=e.text;return t===r.B?"":t}case r.E.getType():return e.mediaId;default:throw new Error("unimplemented type: "+e.type)}}var E;!function(e){e.EMPTY_CONTENT_REQUIRE_TEXT_OR_EMOJI="EMPTY_CONTENT_REQUIRE_TEXT_OR_EMOJI",e.EMPTY_CONTENT_REQUIRE_TEXT="EMPTY_CONTENT_REQUIRE_TEXT",e.EMPTY_CONTENT_REQUIRE_EMOJI="EMPTY_CONTENT_REQUIRE_EMOJI",e.MAX_FLAIR_LENGTH_EXCEEDED="MAX_FLAIR_LENGTH_EXCEEDED",e.MAX_EMOJI_COUNT_EXCEEDED="MAX_EMOJI_COUNT_EXCEEDED",e.ONLY_EMOJIS_ALLOWED="ONLY_EMOJIS_ALLOWED",e.EMOJIS_NOT_ALLOWED="EMOJIS_NOT_ALLOWED"}(E||(E={}));const c=(e,t)=>({reason:e,message:u(e,t)}),u=(t,i)=>{switch(t){case E.EMPTY_CONTENT_REQUIRE_TEXT_OR_EMOJI:return "Text or emoji is required";case E.EMPTY_CONTENT_REQUIRE_TEXT:return "Text is required";case E.EMPTY_CONTENT_REQUIRE_EMOJI:return "Emoji is required";case E.MAX_FLAIR_LENGTH_EXCEEDED:return "Character limit exceeded";case E.ONLY_EMOJIS_ALLOWED:return "Only emojis allowed";case E.EMOJIS_NOT_ALLOWED:return "Emojis aren't allowed";case E.MAX_EMOJI_COUNT_EXCEEDED:{const t=i?.maxEmojiCount??0;return e.bZ({one:`Exceeds ${t} emoji limit`,other:`Exceeds ${t} emojis limit`,count:t});}}},h=t=>t===e.d$.Emoji||t===e.d$.All,j=(t,i)=>{const{allowableContent:o,maxEmojiCount:s=0}=i,a=t.getEditorState(),n=m(a.toJSON()).length,d=(t=>t===e.d$.Text||t===e.d$.All)(o),u=h(o);if(0===n)return c(d&&u?E.EMPTY_CONTENT_REQUIRE_TEXT_OR_EMOJI:u?E.EMPTY_CONTENT_REQUIRE_EMOJI:E.EMPTY_CONTENT_REQUIRE_TEXT);if(n>64)return c(E.MAX_FLAIR_LENGTH_EXCEEDED);const j=a.read((()=>l.U(r.E).length)),p=a.read((()=>l.U(l.j).length>0));return!d&&p?c(E.ONLY_EMOJIS_ALLOWED):!u&&j>0?c(E.EMOJIS_NOT_ALLOWED):j>s?c(E.MAX_EMOJI_COUNT_EXCEEDED,{maxEmojiCount:s}):null};function p(){return!0}let T=class extends e.s{constructor(){super(...arguments),this.validateAfterInputChange=!1,this.flairText="",this.validationError=null,this.isEmojiPickerOpen=!1,this.isDirty=!1,this.debouncedValidateUserInput=e.ae(this.validateUserInput,100),this.clearFlairEditor=t=>{t?.preventDefault(),t?.stopPropagation(),this.flairType&&e.k(this,s.aW(this.flairType)),this.editor?.update((()=>{const e=l.b();e.clear(),e.append(l.I())})),this.closeEmojiPickerIfOutside(t)},this.onEmojiPickerButtonClick=async e=>{e.preventDefault(),e.stopPropagation(),this.isEmojiPickerOpen=!0,await(this.emojiPickers[0]?.show())},this.closeEmojiPicker=()=>{this.emojiPickers[0]?.close()},this.closeEmojiPickerIfOutside=e=>{const t=this.emojiPickers[0];if(!t||!this.isEmojiPickerOpen)return;const i=t.modal;if(!i)return;const o=e.composedPath();if(!o.includes(i))if(t.close(),o.includes(this))setTimeout((()=>this.editor?.focus()),0);else{const e=o[0];setTimeout((()=>e.focus()),0)}},this.markEmojiPickerAsClosed=()=>{this.isEmojiPickerOpen=!1,document.removeEventListener("click",this.closeEmojiPickerIfOutside)},this.getFlairHtml=()=>this.editor?.getEditorState().read((()=>{const e=l.c(this.editor),t=(new DOMParser).parseFromString(e,"text/html").body.querySelector("p");return t?.querySelectorAll("span").forEach((e=>{e.style.removeProperty("white-space"),""===e.getAttribute("style")&&e.removeAttribute("style")})),t?.outerHTML??""})),this.getDescriptionText=()=>this.allowableContent===e.d$.All?n.p(this.maxEmojiCount||0):this.allowableContent===e.d$.Emoji?n.a(this.maxEmojiCount||0):"Allows text",this.getFlairText=()=>this.flairText}get editorRoot(){return this.editorRoots?.[0]}firstUpdated(){this.initLexicalEditor()}updated(e){if(e.has("text")||e.has("richtext"))return void this.updateLexicalEditorContent();const t=e.has("isEmojiPickerOpen");this.isEmojiPickerOpen&&t&&this.loadAndInitEmojis();const i=e.has("allowableContent")&&!!this.allowableContent,o=e.has("maxEmojiCount")&&!!this.maxEmojiCount;(i||o)&&this.validateUserInput()}disconnectedCallback(){this.emojiPickers[0]?.removeEventListener("faceplate-close",this.markEmojiPickerAsClosed),document.removeEventListener("click",this.closeEmojiPickerIfOutside),super.disconnectedCallback()}validateUserInput(){if(!this.allowableContent||!this.editor)return;if(!(!this.validateAfterInputChange||this.isDirty))return;const e={allowableContent:this.allowableContent,maxEmojiCount:this.maxEmojiCount};this.validationError=j(this.editor,e);const t=this.validationError?"flair-input-invalid":"flair-input-valid";this.dispatchEvent(new CustomEvent(t))}initLexicalEditor(){if(!this.editorRoot)throw new Error("A single child div should be passed into FlairEditor. e.g: <flair-editor><div></div></flair-editor>");this.editorRoot.setAttribute("contenteditable","true"),this.editorRoot.setAttribute("role","textbox"),this.editorRoot.setAttribute("class","outline-none relative"),this.editorRoot.setAttribute("tabindex","1");const t={onError:console.error,editable:!0,nodes:[r.E],namespace:`flair-editor-${this.namespace||Math.random()}`,theme:{paragraph:"m-0"}},i=l.d(t);i.setRootElement(this.editorRoot),l.e(i),i.registerUpdateListener((()=>{const t=this.editor?.getEditorState().toJSON(),i=t?m(t):"";this.isDirty=this.isDirty||this.flairText!==i,this.flairText=i,this.dispatchEvent(new InputEvent("input",{bubbles:!0})),this.debouncedValidateUserInput(),t&&this.dispatchEvent(e.d("flair-editor-value-change-event",{flair_text:this.flairText}))})),i.registerCommand(l.f,p,l.J),i.registerCommand(l.h,p,l.J),i.registerCommand(l.M,p,l.J),i.registerCommand(l.B,p,l.J),i.registerCommand(l.i,p,l.J),i.registerCommand(l.k,p,l.J),i.registerCommand(l.W,p,l.J),i.registerCommand(l.z,p,l.J),i.registerCommand(l.L,p,l.J),this.editor=i,this.clearFlairEditor()}setRichText(e){this.editor?.update((()=>{try{r.R({document:[{e:a.P,c:JSON.parse(e)}]},{}),l.l(null)}catch{}}))}setPlainText(e=""){this.editor?.update((()=>{l.b().clear();const t=l.I();t.append(l.Z(e)),l.b().append(t),l.l(null)}))}updateLexicalEditorContent(){this.richtext?this.setRichText(this.richtext):this.setPlainText(this.text||""),this.loadAndInitEmojis()}async loadAndInitEmojis(){await(this.emojiPartials[0]?.load()),this.editor&&this.emojiPickers.length>0&&(this.emojiPickers[0]?.setEditor(this.editor),this.emojiPickers[0]?.addEventListener("faceplate-close",this.markEmojiPickerAsClosed),document.addEventListener("click",this.closeEmojiPickerIfOutside),this.emojiTypeaheads[0]?.setEditor(this.editor))}render(){const r=64-this.flairText.length,s=this.allowableContent&&h(this.allowableContent),a="flex-initial";return e.x` <div class="relative pl-md pr-2xs py-[3px] box-border min-h-[40px] rounded-5 border-sm border-solid ${this.validationError?"border-danger-content":"border-secondary-background"}"> <div class="flex flex-row flex-nowrap items-center focus-within:border-neutral-border-strong cursor-text"> <slot class="block py-2xs text-16 text-tone-1 flex-1" name="editor"></slot> ${this.validationError?o.e({attributes:{className:"text-danger-content p-xs"},size:e.I.Small}):""} ${this.isEmojiPickerOpen?e.x``:e.u({appearance:"plain",attributes:{className:`emoji-picker-button ${s?"":"hidden"} ${a}`,type:"button","aria-label":"Open emoji picker",disabled:this.isEmojiPickerOpen,onclick:this.onEmojiPickerButtonClick},size:e.v.Small,screenReaderContent:"open emoji picker",leadingIcon:i.s({size:e.I.Small})})} ${e.u({appearance:"plain",attributes:{className:`clear-button ${a}`,type:"button","aria-label":"Clear",disabled:0===this.flairText.length,onclick:this.clearFlairEditor},size:e.v.Small,screenReaderContent:"clear",leadingIcon:t.c({size:e.I.Small})})} <slot ?hidden="${!s}" name="emojis"></slot> </div> </div> <div class="flex justify-between items-center pt-2xs px-md"> ${this.validationError?e.x` <span class="text-12 error-message text-danger-content">${this.validationError.message}</span> `:e.x`<span class="text-12">${this.getDescriptionText()}</span>`} <div class="flair-length flex-1 text-right ${r<0?"text-danger-content":"text-secondary-weak"}"> ${r} </div> </div> `}};return T.styles=[e.i`:host{--emote-size:20px;--emote-line-height:inherit}.border-danger-content{border-color:var(--color-danger-content)}`,e.t],e._([e.n({type:String})],T.prototype,"namespace",void 0),e._([e.n({type:String})],T.prototype,"text",void 0),e._([e.n({type:String})],T.prototype,"richtext",void 0),e._([e.n({type:String,attribute:"allowable-content"})],T.prototype,"allowableContent",void 0),e._([e.n({type:Number,attribute:"max-emoji-count"})],T.prototype,"maxEmojiCount",void 0),e._([e.n({type:String,attribute:"flair-type"})],T.prototype,"flairType",void 0),e._([e.n({type:Boolean,attribute:"validate-after-input-change"})],T.prototype,"validateAfterInputChange",void 0),e._([e.j()],T.prototype,"flairText",void 0),e._([e.j()],T.prototype,"validationError",void 0),e._([e.j()],T.prototype,"isEmojiPickerOpen",void 0),e._([e.r({slot:"editor",flatten:!0,selector:"div"})],T.prototype,"editorRoots",void 0),e._([e.r({slot:"emojis",selector:"faceplate-partial"})],T.prototype,"emojiPartials",void 0),e._([e.r({slot:"emojis",selector:"emoji-picker"})],T.prototype,"emojiPickers",void 0),e._([e.r({slot:"emojis",selector:"emoji-typeahead"})],T.prototype,"emojiTypeaheads",void 0),e._([e.Y(".emoji-picker-button")],T.prototype,"emojiPickerButton",void 0),T=e._([e.e("flair-editor")],T),{get F(){return T}}}));
SML.di("./CYrPuvCiTj.js",import.meta.url,"CYrPuvCiTj");SML.di("./nC5ghTdpSV.js",import.meta.url,"nC5ghTdpSV");
SML.dm("BtK6oxQpcr",["CYrPuvCiTj","nC5ghTdpSV"],(async(t,e)=>{const i="-comment-rtjson-content",n="#text",s=t=>t.replace(/\n/g,"").replace(/\s+/g," ").trim(),o=({commentId:t,noPrefix:e})=>{let n=t.replace(i,"");return e&&(n=n.replace("t1_","")),n},r=({commentId:t,permalink:e,snippetData:i})=>t?`https://publish.reddit.com/embed?url=https://www.reddit.com${e.replace(/\/[^/]+(?=\/$)|\/$/,"")}comment/${o({commentId:t,noPrefix:!0})}?snippet=${i}`:`https://publish.reddit.com/embed?url=https://www.reddit.com${e}?snippet=${i}`,l=["TR","TH","TD","TABLE","TBODY","THEAD"],d=new Set(["H1","P"]);let a=class extends t.s{constructor(){super(...arguments),this.postId="",this.permalink="",this.topOffset=0,this.leftOffset=0,this.snippetData="",this.isTitleSelected=!1,this.isSelectionOutOfRange=!1,this.isFullTextSelected=!1,this.isComment=!1,this.clearSelection=t=>{if(2!==t.button&&t.target.getAttribute("postid")!==this.postId){const e=((t,e)=>{for(;t;){if(t.id&&(t.id.includes(`${e}-post-rtjson-content`)||t.id.includes(i)))return t;t=t.parentNode}return null})(t.target,this.postId);this.richTextContainer=e,getSelection()?.empty(),this.snippetData="",this.isTitleSelected=!1,this.isSelectionOutOfRange=!1,this.isFullTextSelected=!1}},this.handleEmbedClick=()=>{this.isComment&&this.richTextContainer?.id?open(r({commentId:this.richTextContainer?.id,permalink:this.permalink,snippetData:this.snippetData}),"RedditEmbed"):open(r({permalink:this.permalink,snippetData:this.snippetData}),"RedditEmbed"),this.sendClickTelemetry()},this.isTripleClickHandled=t=>3===t.detail,this.getChildTextNode=t=>{let e;const i=t.childNodes;for(let t=0;t<i.length;t++){const o=i[t];if(o.nodeName!==n)continue;0!==s(o.textContent||"").length&&(e=o)}return e},this.getCorrectSelection=t=>{const e=getSelection();if(this.isTripleClickHandled(t)&&e?.anchorNode?.nodeName&&d.has(e?.anchorNode?.nodeName)){const t=this.getChildTextNode(e.anchorNode),i=t?.textContent?.length||0;e.setBaseAndExtent(t,0,t,i)}return e},this.calculateSnippetData=t=>{if(this.shouldShowButton)return void this.clearSelection(t);this.isComment=Boolean(this.richTextContainer?.id&&this.richTextContainer.id.startsWith("t1")),this.snippetData="";const e=this.getCorrectSelection(t),i=s(e?.toString()||"");if(!e||!i?.length)return;const o=this.richTextContainer?s(this.richTextContainer.innerText):"",r=s(this.postTitleElement.innerText);this.richTextContainer&&i===o&&(this.isFullTextSelected=!0);const d=e?.anchorNode;if(d.parentNode?.nodeName&&l.includes(d.parentNode?.nodeName))return;const a=e.getRangeAt(0);d.parentNode===this.postTitleElement&&(this.isTitleSelected=!0),(this.isTitleSelected&&i.length>r.length||this.richTextContainer&&i.length>o.length)&&(this.isSelectionOutOfRange=!0);const c=this.isTitleSelected?this.postTitleElement?.getBoundingClientRect():this.richTextContainer?.getBoundingClientRect(),h=e?.getRangeAt(0).getBoundingClientRect();if(c&&h){if(this.topOffset=h.top+scrollY,this.leftOffset=h.left+h.width/2,(this.shadowRoot?.host).style.setProperty("--left-offset",`${this.leftOffset}px`),(this.shadowRoot?.host).style.setProperty("--top-offset",this.topOffset-32-4+"px"),this.isTitleSelected||this.isFullTextSelected)return void this.sendViewTelemetry();if(e.rangeCount>0){let t=-1;const e=Array.from((this.isComment?this.richTextContainer?.children[0].children:this.richTextContainer?.children)||[]).filter((t=>t.nodeName!==n));for(let i=0;i<e.length;i++){const n=e[i];if(a.intersectsNode(n)){t=i;break}}if(-1!==t&&i){const n=(({nodeText:t,selectedText:e})=>{if(!t||!e)return-1;const i=t.length,n=e.length,s=[];for(let t=0;t<=i;t++)s[t]=new Array(n+1).fill(0);let o=0,r=0;for(let l=1;l<=i;l++)for(let i=1;i<=n;i++)t[l-1]===e[i-1]&&(s[l][i]=s[l-1][i-1]+1,s[l][i]>o&&(o=s[l][i],r=l-1));const l=t.substring(r-o+1,r+1);return l?t.indexOf(l):-1})({nodeText:s(e[t].innerText),selectedText:i});t>-1&&n>-1&&i.length>0&&(this.snippetData=`${t}_${n}_${i.length}`,this.sendViewTelemetry())}}}},this.getEventDetails=()=>{const t={};return this.isComment&&this.richTextContainer?.id&&(t.comment={id:o({commentId:this.richTextContainer.id})}),t},this.sendViewTelemetry=()=>{const e=this.getEventDetails();this.dispatchEvent(t.d(t.cM,{details:e}))},this.sendClickTelemetry=()=>{const e=this.getEventDetails();this.dispatchEvent(t.d(t.cN,{details:e}))}}get shouldShowButton(){return(this.snippetData.length||this.isTitleSelected||this.isFullTextSelected)&&!this.isSelectionOutOfRange}connectedCallback(){super.connectedCallback();const t=document.getElementById(`post-title-${this.postId}`);t&&(this.postTitleElement=t),document.addEventListener("mousedown",this.clearSelection),document.addEventListener("mouseup",this.calculateSnippetData)}disconnectedCallback(){super.disconnectedCallback(),document.removeEventListener("mousedown",this.clearSelection),document.removeEventListener("mouseup",this.calculateSnippetData)}render(){return t.x` ${this.shouldShowButton?t.x` <div class="button-container bg-neutral-content-strong rounded-full shadow-sm flex"> ${t.u({appearance:"plainInverted",size:t.v.Small,attributes:{onclick:this.handleEmbedClick},leadingIcon:e.c(),children:"Embed"})} </div> `:""} `;}};a.styles=[t.i`.button-container{position:absolute;left:var(--left-offset);top:var(--top-offset);transform:translateX(-50%);z-index:1}`,t.t],t._([t.n({type:String})],a.prototype,"postId",void 0),t._([t.n({type:String})],a.prototype,"permalink",void 0),t._([t.j()],a.prototype,"topOffset",void 0),t._([t.j()],a.prototype,"leftOffset",void 0),t._([t.j()],a.prototype,"snippetData",void 0),t._([t.j()],a.prototype,"isTitleSelected",void 0),t._([t.j()],a.prototype,"isSelectionOutOfRange",void 0),t._([t.j()],a.prototype,"isFullTextSelected",void 0),t._([t.j()],a.prototype,"isComment",void 0),a=t._([t.e("embed-snippet-share-button")],a)}));
SML.di("./CYrPuvCiTj.js",import.meta.url,"CYrPuvCiTj");
SML.dm("BwGaAA3TFj",["CYrPuvCiTj"],(async t=>{let e=class extends t.s{constructor(){super(...arguments),this.size=1/0,this.target="",this.isBatching=!1}static get styles(){return t.i`:host{display:block}`}render(){return t.x` <slot></slot> `}getCurrentTarget(t=this){return this.target&&t.querySelector(this.target)||t}async batchInsert(e){if(this.isBatching)throw new Error("Cannot call batchInsert while batching is already in progress");const s=this.getCurrentTarget();if(!(s instanceof HTMLElement))throw new TypeError("Target element must be instance of HTMLElement");const i=t.d("faceplate-batch-begin",{size:this.size,count:e.length});if(s.dispatchEvent(i),i.defaultPrevented)return;this.isBatching=!0;const n=()=>{if(e.length){const t=e.slice(0,this.size),i=document.createDocumentFragment();for(let s=0;s<t.length;s++)i.appendChild(e[s]);s.appendChild(i)}e.length>this.size?(e=e.slice(this.size),window.setTimeout(n)):(s.style.willChange="unset",this.isBatching=!1)};s.style.willChange="contents",await n()}};t._([t.n({type:Number})],e.prototype,"size",void 0),t._([t.n({type:String})],e.prototype,"target",void 0),e=t._([t.e("faceplate-batch")],e)}));
SML.di("./CYrPuvCiTj.js",import.meta.url,"CYrPuvCiTj");
SML.dm("BwTjuuyYF4",["CYrPuvCiTj"],(async e=>{let t=class extends e.s{constructor(){super(...arguments),this.redirect=e=>{window.location.href=e.toString()},this.refreshAndAppendConsent=e=>{if("click"===e.type||"Enter"===e.key||"Space"===e.key){const e=new URL(window.location.href);e.searchParams.set("consent","true"),this.redirect(e)}},this.goBack=e=>{history.length>1&&("click"===e.type||"Enter"===e.key||"Space"===e.key)?this.redirect(new URL(document.referrer||location.origin)):this.redirect(new URL(location.origin))}}render(){return e.x`<slot name="continue" @click="${this.refreshAndAppendConsent}" @keypress="${this.refreshAndAppendConsent}"></slot> <slot name="back" @click="${this.goBack}" @keypress="${this.goBack}"></slot>`}};t.styles=[e.t],t=e._([e.e("blocked-profile-interactions")],t);let r=class extends e.s{constructor(){super(...arguments),this.redirect=e=>{window.location.href=e.toString()},this.goBack=e=>{history.length>1&&("click"===e.type||"Enter"===e.key||"Space"===e.key)?this.redirect(new URL(document.referrer||location.origin)):this.redirect(new URL(location.origin))}}render(){return e.x`<slot name="back" @click="${this.goBack}" @keypress="${this.goBack}"></slot>`}};r.styles=[e.t],r=e._([e.e("back-to-reddit")],r),customElements.whenDefined("faceplate-modal").then((()=>{const e=document.querySelector("#over-18-interstitial-modal");e?.showModal({blur:!0})}))}));
SML.di("./CYrPuvCiTj.js",import.meta.url,"CYrPuvCiTj");
SML.dm("C61SRTLcxs",["CYrPuvCiTj"],(async s=>{const e="data-chat-channel-recommendations-element-dismiss",t="click";let n=class extends(s.W(s.s)){constructor(){super(...arguments),this.onDismiss=e=>{this.parentNode?.removeChild(this),e.stopPropagation(),s.fg(s.fi.Dismiss,s.fh.ChatChannelsOnPdp)}}connectedCallback(){super.connectedCallback(),this.addDismissHandlers()}disconnectedCallback(){super.disconnectedCallback(),this.removeDismissHandlers()}addDismissHandlers(){this.querySelector(`[${e}]`)?.addEventListener(t,this.onDismiss)}removeDismissHandlers(){this.querySelector(`[${e}]`)?.removeEventListener(t,this.onDismiss)}render(){return s.x`<slot></slot>`}};n.styles=[s.t],n=s._([s.e("chat-channel-recommendations-wrapper")],n)}));
SML.di("./CYrPuvCiTj.js",import.meta.url,"CYrPuvCiTj");SML.di("./G2F6lxYj4X.js",import.meta.url,"G2F6lxYj4X");SML.di("./jzmnNb68mH.js",import.meta.url,"jzmnNb68mH");SML.di("./B74fdX6mon.js",import.meta.url,"B74fdX6mon");SML.di("./zWWS8JSAAa.js",import.meta.url,"zWWS8JSAAa");SML.di("./BpRbUpfRsm.js",import.meta.url,"BpRbUpfRsm");
SML.dm("C7feCqbuOE",["CYrPuvCiTj","zWWS8JSAAa","BpRbUpfRsm","G2F6lxYj4X","jzmnNb68mH","B74fdX6mon"],(async(e,t,a)=>{const{svg:s}=e.a(),o=e.m(s`<path d="M13 8.75a1.75 1.75 0 100-3.5 1.75 1.75 0 000 3.5z"></path><path d="M8.6 18c0 .55-.45 1-1 1H4.11c-.84 0-1.62-.32-2.2-.9a3.109 3.109 0 01-.86-2.78c.12-.65.47-1.23.94-1.7l5.18-5.18c-.51-2.05.07-4.18 1.57-5.68 2.34-2.34 6.16-2.34 8.5 0s2.34 6.16 0 8.5a5.952 5.952 0 01-5.02 1.7v1.43c0 .55-.45 1-1 1H8.6V18zm4.39-15.2c-1.08 0-2.16.41-2.98 1.23a4.195 4.195 0 00-.98 4.37l.19.53-6.04 6.04c-.25.25-.38.57-.38.92 0 .35.14.68.38.92s.57.38.93.38H6.8v-3.61h3.62v-3.03l1.2.41c1.54.54 3.21.16 4.35-.98a4.213 4.213 0 000-5.95c-.82-.82-1.9-1.23-2.98-1.23z"></path>`,"0 0 20 20","key"),i=()=>e.c({source:"content_gate",action:"click",noun:"continue"});let r=class extends e.s{constructor(){super(...arguments),this.country="",this.subredditName="",this.subredditId="",this.showMessageModeModal=!1,this.messageModsType="request",this.modMessageTextArea=e.Z(),this.modSubjectText=e.Z(),this.setPrefGatedOptIn=async()=>{if(e.k(this,i()),this.isLoggedIn&&this.subredditName.length)try{await e.ag({operation:e.af.OptInToGatedSubreddit,variables:{input:{subredditName:this.subredditName}}})}catch(e){window.console.error(e)}finally{this.reload()}else this.setCookie(e.d5)},this.setPrefQuarantinedOptIn=async()=>{if(e.k(this,i()),this.isLoggedIn&&this.subredditName.length)try{await e.ag({operation:e.af.UpdateSubredditQuarantineOptInState,variables:{input:{optInState:e.d6.OptedOut,subredditId:this.subredditId}}})}catch(e){window.console.error(e)}finally{this.reload()}else await this.setCookie(e.d7),this.reload()},this.setNsfwAllowed=async()=>{if(this.isLoggedIn){const{data:t}=await e.ag({operation:e.af.UpdateProfileSettings,variables:{input:{isNsfw:!0}}});t.updateProfileSettings?.ok&&this.reload()}else this.setCookie(e.b0)},this.onCancelModModal=()=>{this.showMessageModeModal=!1},this.messageMod=async()=>{this.showMessageModeModal=!0,this.messageModsType="message"},this.requestToJoin=async()=>{this.showMessageModeModal=!0,this.messageModsType="request",e.k(this,e.c({source:"content_gate",action:"click",noun:"request_to_join_button"}))},this.sendMessageToMods=async()=>{const t=this.modMessageTextArea.value?.value||"",a=this.modSubjectText.value?.value||"Request to join";if(t.length){const{data:s}=await e.ag({operation:e.af.SendMessageToSubreddit,variables:{input:{body:t,subject:`[join] ${a}`,subredditId:this.subredditId}}});if(s.sendMessageToSubreddit.ok){if("request"===this.messageModsType){const{data:t}=await e.ag({operation:e.af.UpdateContributorRequestTimestamp,variables:{input:{requestDatetime:(new Date).toISOString(),subredditId:this.subredditId}}});if(t.updateLastContributorRequestTimestamp?.ok)return e.k(this,e.c({source:"content_gate",action:"click",noun:"request_to_join_submit"})),this.reload()}this.showMessageModeModal=!1}}}}reload(){window.location.reload()}initializeSlottedElements(){this.shadowRoot.querySelector('[slot="secondaryButton"]')?.assignedNodes({flatten:!0}).forEach((e=>{const t=e;"gated-action-button"===t.id&&(this.gatedButton=t),"nsfw-action-button"===t.id&&(this.nsfwButton=t),"quarantine-action-button"===t.id&&(this.quarantineButton=t),"private-mod-action-button"===t.id&&(this.privateModeButton=t)})),this.shadowRoot.querySelector('[slot="tertiaryButton"]')?.assignedNodes({flatten:!0}).forEach((e=>{const t=e;"private-join-action-button"===t.id&&(this.privateRequestToJoinButton=t)}))}addEventListenerToSlottedElements(){this.gatedButton?.addEventListener("click",this.setPrefGatedOptIn),this.nsfwButton?.addEventListener("click",this.setNsfwAllowed),this.quarantineButton?.addEventListener("click",this.setPrefQuarantinedOptIn),this.privateModeButton?.addEventListener("click",this.messageMod),this.privateRequestToJoinButton?.addEventListener("click",this.requestToJoin)}removeEventListenerFromSlottedElements(){this.gatedButton?.removeEventListener("click",this.setPrefGatedOptIn),this.nsfwButton?.removeEventListener("click",this.setNsfwAllowed),this.quarantineButton?.removeEventListener("click",this.setPrefQuarantinedOptIn),this.privateModeButton?.removeEventListener("click",this.messageMod),this.privateRequestToJoinButton?.removeEventListener("click",this.requestToJoin)}firstUpdated(){this.initializeSlottedElements(),this.addEventListenerToSlottedElements()}disconnectedCallback(){super.disconnectedCallback(),this.removeEventListenerFromSlottedElements()}setCookie(t){e.ao({country:this.country,name:t,value:"true",options:e.b1}),this.reload()}getBgImagePath(){const t=this.isLoggedIn?"home":"popular",a=e.ab()?"dark":void 0,s=this.isDesktop?void 0:"mobile";return`${CLIENT_CONFIG.STATIC_BASE_URL}assets/feeds/${[t,a,s].filter(Boolean).join("-")}.jpg`}renderModForm(){return e.x`<faceplate-form class="w-full"> <p class="mb-md"> ${"message"===this.messageModsType?"Send A Private Message":"Write a short message to the moderators explaining why you want to join."} </p> ${"message"===this.messageModsType?e.x`<faceplate-text-input ${e.$(this.modSubjectText)} ?novalidate="${!0}" maxLength="${100}" class="mb-md w-100"> <span slot="label">${"Subject"}</span></faceplate-text-input>`:""} <faceplate-textarea-input class="w-full" ${e.$(this.modMessageTextArea)} size="${t.T.EXPANDED}" appearance="${t.a.SECONDARY}" name="textarea" maxLength="${1e4}" ?novalidate="${!0}"> <span slot="label">${"Message to moderators"}</span> </faceplate-textarea-input> </faceplate-form>`;}renderModModal(){return e.x`<faceplate-modal open class="fixed top-1/2 -translate-y-1/2 w-[500px]"> <div slot="closeButton"> ${e.u({appearance:"secondary",attributes:{onclick:this.onCancelModModal},leadingIcon:e.al({size:e.I.Medium}),size:e.v.Medium})} </div> <div slot="titleGraphic" class="flex"> ${"message"===this.messageModsType?a.m({size:e.I.ExtraLarge}):o({size:e.I.ExtraLarge})} </div> <div slot="title"> ${"message"===this.messageModsType?"Message Mods":"Request to join"} </div> <div slot="primaryButton" ,> ${e.u({appearance:"primary",attributes:{className:"w-100",onclick:this.sendMessageToMods},children:"Send Message"})} </div> <div slot="secondaryButton" ,> ${e.u({appearance:"secondary",attributes:{className:"w-100",onclick:this.onCancelModModal},children:"Cancel"})} </div> ${this.renderModForm()} </faceplate-modal>`;}render(){return e.x`<main> ${this.showMessageModeModal?this.renderModModal():e.x`<faceplate-modal open class="fixed top-1/2 -translate-y-1/2"> <slot name="titleGraphic" slot="titleGraphic"></slot> <slot name="title" slot="title"></slot> <slot name="closeButton" slot="closeButton"></slot> <slot name="primaryButton" slot="primaryButton"></slot> <slot name="secondaryButton" slot="secondaryButton"></slot> <slot name="tertiaryButton" slot="tertiaryButton"></slot> <slot></slot> </faceplate-modal> `} <div class="blurred-bg h-full w-full bg-no-repeat bg-cover" style="background-image:url('${this.getBgImagePath()}')"> <div class="shade h-full w-full"></div> </div> </main> `}};r.styles=[e.i`main{height:calc(100vh - var(--shreddit-header-height));width:100vw}faceplate-modal{max-width:min(90%,656px)}.blurred-bg{filter:blur(10px)}.blurred-bg .shade{background-color:rgba(0,0,0,.7)}`,e.t],e._([e.n({type:String})],r.prototype,"country",void 0),e._([e.n({type:String})],r.prototype,"subredditName",void 0),e._([e.n({type:String})],r.prototype,"subredditId",void 0),e._([e.n({type:Boolean})],r.prototype,"isDesktop",void 0),e._([e.n({type:Boolean})],r.prototype,"isLoggedIn",void 0),e._([e.j()],r.prototype,"showMessageModeModal",void 0),e._([e.j()],r.prototype,"messageModsType",void 0),r=e._([e.e("guard-community-modal")],r)}));
SML.di("./D7VxXfygHQ.js",import.meta.url,"D7VxXfygHQ");SML.di("./BIlQ5upx3L.js",import.meta.url,"BIlQ5upx3L");SML.di("./BwGaAA3TFj.js",import.meta.url,"BwGaAA3TFj");SML.di("./CYrPuvCiTj.js",import.meta.url,"CYrPuvCiTj");SML.di("./B_JCIjxvZc.js",import.meta.url,"B_JCIjxvZc");SML.di("./C_Ye-hONhE.js",import.meta.url,"C_Ye-hONhE");SML.di("./C_biyTh4iY.js",import.meta.url,"C_biyTh4iY");SML.di("./C-PXJvnKib.js",import.meta.url,"C-PXJvnKib");SML.di("./CEBL3uuwif.js",import.meta.url,"CEBL3uuwif");SML.di("./D2-YkDs3Od.js",import.meta.url,"D2-YkDs3Od");SML.di("./CNFB3MJQUJ.js",import.meta.url,"CNFB3MJQUJ");SML.di("./BO-gPCvdUU.js",import.meta.url,"BO-gPCvdUU");SML.di("./CcWrGyc4YB.js",import.meta.url,"CcWrGyc4YB");SML.di("./BvPcMFr1Lr.js",import.meta.url,"BvPcMFr1Lr");SML.di("./iJcINZywq8.js",import.meta.url,"iJcINZywq8");SML.di("./CBEvrTHeKf.js",import.meta.url,"CBEvrTHeKf");SML.di("./D2VJiRUxKq.js",import.meta.url,"D2VJiRUxKq");SML.di("./C8CrqKCiqJ.js",import.meta.url,"C8CrqKCiqJ");SML.di("./wzdls1o9Kk.js",import.meta.url,"wzdls1o9Kk");SML.di("./DWiY65FgXJ.js",import.meta.url,"DWiY65FgXJ");SML.di("./BNhmBC31Qc.js",import.meta.url,"BNhmBC31Qc");SML.di("./BkN3vL5jOX.js",import.meta.url,"BkN3vL5jOX");SML.di("./CZtlI9NlXS.js",import.meta.url,"CZtlI9NlXS");SML.di("./BA-YMBSJ68.js",import.meta.url,"BA-YMBSJ68");SML.di("./CbYjzDlHSg.js",import.meta.url,"CbYjzDlHSg");SML.di("./CVFZT5qG1t.js",import.meta.url,"CVFZT5qG1t");SML.di("./CeSKxcW4bq.js",import.meta.url,"CeSKxcW4bq");SML.di("./gvWVn4JBWB.js",import.meta.url,"gvWVn4JBWB");SML.di("./BIGAbYW0aG.js",import.meta.url,"BIGAbYW0aG");SML.di("./DLdgTt_kCu.js",import.meta.url,"DLdgTt_kCu");SML.di("./Bb-T49I7YR.js",import.meta.url,"Bb-T49I7YR");SML.di("./hgVDyxZ2rL.js",import.meta.url,"hgVDyxZ2rL");SML.di("./COfLy9zygd.js",import.meta.url,"COfLy9zygd");SML.di("./gMEDXxO5ap.js",import.meta.url,"gMEDXxO5ap");SML.di("./BDMOQ0-Tf9.js",import.meta.url,"BDMOQ0-Tf9");SML.di("./vhsAG6S_0w.js",import.meta.url,"vhsAG6S_0w");SML.di("./3jd2bjBQv5.js",import.meta.url,"3jd2bjBQv5");SML.di("./DdQ8ToexAC.js",import.meta.url,"DdQ8ToexAC");SML.di("./CsnZoaUuMa.js",import.meta.url,"CsnZoaUuMa");SML.di("./nZA40q2akY.js",import.meta.url,"nZA40q2akY");SML.di("./D0lCIVsZym.js",import.meta.url,"D0lCIVsZym");SML.di("./BEOg1WTiXx.js",import.meta.url,"BEOg1WTiXx");SML.di("./Bu_0OLU9_w.js",import.meta.url,"Bu_0OLU9_w");SML.di("./buPlOxYAo2.js",import.meta.url,"buPlOxYAo2");SML.di("./DKP07AmMm9.js",import.meta.url,"DKP07AmMm9");SML.di("./CVk7Sw8fup.js",import.meta.url,"CVk7Sw8fup");SML.di("./DAeuL7zDX0.js",import.meta.url,"DAeuL7zDX0");SML.di("./BG_G1Cif8U.js",import.meta.url,"BG_G1Cif8U");SML.di("./DyzvzwR0Ee.js",import.meta.url,"DyzvzwR0Ee");SML.di("./D4Ab94OqLr.js",import.meta.url,"D4Ab94OqLr");SML.di("./jzmnNb68mH.js",import.meta.url,"jzmnNb68mH");SML.di("./tXzIaFuSwM.js",import.meta.url,"tXzIaFuSwM");SML.di("./DcxJbk2B3f.js",import.meta.url,"DcxJbk2B3f");SML.di("./h2J0CF1huj.js",import.meta.url,"h2J0CF1huj");SML.di("./By2sopqXTk.js",import.meta.url,"By2sopqXTk");SML.di("./DGvV9ljiFl.js",import.meta.url,"DGvV9ljiFl");SML.di("./Xj9Z_fzyKi.js",import.meta.url,"Xj9Z_fzyKi");SML.di("./NKGs0TL7Ol.js",import.meta.url,"NKGs0TL7Ol");SML.di("./C6Xqqgad3v.js",import.meta.url,"C6Xqqgad3v");SML.di("./B2_gjouej4.js",import.meta.url,"B2_gjouej4");SML.di("./CEf2DD9Ins.js",import.meta.url,"CEf2DD9Ins");SML.di("./B39chFHLCe.js",import.meta.url,"B39chFHLCe");SML.di("./DGkwklwWNC.js",import.meta.url,"DGkwklwWNC");SML.di("./CaC8XqiTGs.js",import.meta.url,"CaC8XqiTGs");SML.di("./DgaC1xItoR.js",import.meta.url,"DgaC1xItoR");SML.di("./B2_754HZA-.js",import.meta.url,"B2_754HZA-");SML.di("./BvU2E9FwXI.js",import.meta.url,"BvU2E9FwXI");SML.di("./DVa-SVjWU5.js",import.meta.url,"DVa-SVjWU5");SML.di("./BRVVLb7Eld.js",import.meta.url,"BRVVLb7Eld");SML.di("./B58tzg41t5.js",import.meta.url,"B58tzg41t5");SML.di("./BJdHdrH8mb.js",import.meta.url,"BJdHdrH8mb");SML.di("./CgCqj_GEht.js",import.meta.url,"CgCqj_GEht");SML.di("./rxXg4kAY8P.js",import.meta.url,"rxXg4kAY8P");SML.di("./DiH4zLRIso.js",import.meta.url,"DiH4zLRIso");SML.di("./q5XTF3XWlp.js",import.meta.url,"q5XTF3XWlp");SML.di("./BtqmVQuPYp.js",import.meta.url,"BtqmVQuPYp");SML.di("./BesoUDZOXX.js",import.meta.url,"BesoUDZOXX");SML.di("./CCzrQmnfhp.js",import.meta.url,"CCzrQmnfhp");SML.di("./DTFTCiYeLz.js",import.meta.url,"DTFTCiYeLz");
SML.dm("C8r4QF8E1X",["CYrPuvCiTj","D7VxXfygHQ","BIlQ5upx3L","BwGaAA3TFj","B_JCIjxvZc","C_Ye-hONhE","C_biyTh4iY","C-PXJvnKib","CEBL3uuwif","D2-YkDs3Od","CNFB3MJQUJ","BO-gPCvdUU","CcWrGyc4YB","BvPcMFr1Lr","iJcINZywq8","CBEvrTHeKf","D2VJiRUxKq","C8CrqKCiqJ","wzdls1o9Kk","DWiY65FgXJ","BNhmBC31Qc","BkN3vL5jOX","CZtlI9NlXS","BA-YMBSJ68","CbYjzDlHSg","CVFZT5qG1t","CeSKxcW4bq","gvWVn4JBWB","BIGAbYW0aG","DLdgTt_kCu","Bb-T49I7YR","hgVDyxZ2rL","COfLy9zygd","gMEDXxO5ap","BDMOQ0-Tf9","vhsAG6S_0w","3jd2bjBQv5","DdQ8ToexAC","CsnZoaUuMa","nZA40q2akY","D0lCIVsZym","BEOg1WTiXx","Bu_0OLU9_w","buPlOxYAo2","DKP07AmMm9","CVk7Sw8fup","DAeuL7zDX0","BG_G1Cif8U","DyzvzwR0Ee","D4Ab94OqLr","jzmnNb68mH","tXzIaFuSwM","DcxJbk2B3f","h2J0CF1huj","By2sopqXTk","DGvV9ljiFl","Xj9Z_fzyKi","NKGs0TL7Ol","C6Xqqgad3v","B2_gjouej4","CEf2DD9Ins","B39chFHLCe","DGkwklwWNC","CaC8XqiTGs","DgaC1xItoR","B2_754HZA-","BvU2E9FwXI","DVa-SVjWU5","BRVVLb7Eld","B58tzg41t5","BJdHdrH8mb","CgCqj_GEht","rxXg4kAY8P","DiH4zLRIso","q5XTF3XWlp","BtqmVQuPYp","BesoUDZOXX","CCzrQmnfhp","DTFTCiYeLz"],(async E=>{E.g()&&SML.di("./Ba7V6_Y9nN.js",import.meta.url,"Ba7V6_Y9nN")}));
SML.di("./CYrPuvCiTj.js",import.meta.url,"CYrPuvCiTj");SML.di("./DdQ8ToexAC.js",import.meta.url,"DdQ8ToexAC");SML.di("./BEOg1WTiXx.js",import.meta.url,"BEOg1WTiXx");SML.di("./B74fdX6mon.js",import.meta.url,"B74fdX6mon");SML.di("./jzmnNb68mH.js",import.meta.url,"jzmnNb68mH");SML.di("./B8bPYlQRZA.js",import.meta.url,"B8bPYlQRZA");SML.di("./BG_G1Cif8U.js",import.meta.url,"BG_G1Cif8U");SML.di("./DAeuL7zDX0.js",import.meta.url,"DAeuL7zDX0");SML.di("./DyzvzwR0Ee.js",import.meta.url,"DyzvzwR0Ee");SML.di("./D4Ab94OqLr.js",import.meta.url,"D4Ab94OqLr");SML.di("./wzdls1o9Kk.js",import.meta.url,"wzdls1o9Kk");SML.di("./BvPcMFr1Lr.js",import.meta.url,"BvPcMFr1Lr");SML.di("./BtqmVQuPYp.js",import.meta.url,"BtqmVQuPYp");
SML.dm("CDX7Foh9qe",["CYrPuvCiTj","DdQ8ToexAC","BEOg1WTiXx","B74fdX6mon","jzmnNb68mH","B8bPYlQRZA","BG_G1Cif8U","DAeuL7zDX0","DyzvzwR0Ee","D4Ab94OqLr","wzdls1o9Kk","BvPcMFr1Lr","BtqmVQuPYp"],(async(e,t,i)=>{var a,s,r,o;!function(e){e.AgeCollect="age-collect",e.AgeRestrict="age-restrict",e.AgeVerify="age-verify",e.AgeConfirm="age-confirm"}(a||(a={})),function(e){e.UNAVAILABLE_AGE="UNAVAILABLE_AGE",e.UNAVAILABLE_UNVERIFIED_AGE="UNAVAILABLE_UNVERIFIED_AGE",e.UNDER_VERIFIED_AGE="UNDER_VERIFIED_AGE",e.UNVERIFIED_AGE="UNVERIFIED_AGE",e.UNDERAGE="UNDERAGE"}(s||(s={})),function(e){e.BeginVerification="begin-verification"}(r||(r={})),function(e){e.BeginVerification="/svc/shreddit/age-verification/begin-verification"}(o||(o={}));const n="force_age_gating";let l=window.location,c=class extends e.s{constructor(){super(...arguments),this.page=a.AgeCollect,this.postSubmitBehavior="destination",this.successDestination="reload",this.isSettingsCollection=!1,this.gateType=e.fe.Content,this.countdown=new t.C(this),this.pubsub=new e.z(this),this.onInputKeypress=e=>{"Enter"===e.key&&this.isValid?this.validateAge():isNaN(e.key)&&e.preventDefault()},this.onInput=()=>{this.clearErrorMessage(),this.saveButton.disabled=!this.isValid},this.redirectToAgeVerificationFlow=async()=>{if(this.withAgeVerification){this.submitButton.disabled=!0;try{const t=await fetch(o.BeginVerification,{body:JSON.stringify({completionUrl:this.getAgeVerificationCompletionUrl(),csrf_token:e.am.get("csrf_token")}),method:"POST"}),{data:i,error:a}=await t.json();if(!t.ok||!i?.continueUrl||a)throw new Error(`Failed to fetch age verification url from ${o.BeginVerification}`);l.href=i.continueUrl}catch(t){this.dispatchError("Something went wrong",e.bH(t)),this.submitButton.disabled=!1;const i=t;window.Sentry?.captureMessage?.(i.message)}}},this.submitAge=async()=>{try{const t=i.g(this.inputs);if(null===t)return;const s=await fetch(e.db.UpdateBirthdate,{method:"POST",body:JSON.stringify({birthdate:t,csrf_token:e.am.get("csrf_token")})});if(s.ok){const{collection_status:i}=await s.json();if(i===e.ff.Underage)return void this.cancelAndRedirect();if(this.withAgeVerification&&i===e.ff.Unverified)return void this.redirectToAgeVerificationFlow();if("destination"===this.postSubmitBehavior)if("reload"===this.successDestination)this.reloadThePage();else{const e=new URL(this.successDestination);e.origin===l.origin&&(l.href=this.successDestination)}else"close"===this.postSubmitBehavior&&(this.pubsub.publish(e.T.AgeGateBirthdateSubmitted,{birthdate:t}),await(this.dialogSheet?.hide()),this.disableCollectionPage(),this.page=a.AgeCollect)}else this.dispatchError("Something went wrong",e.bm.FetchBadResponse)}catch(t){this.dispatchError("Something went wrong",e.bH(t))}},this.validateAge=()=>{const e=i.g(this.inputs);null===e?(this.saveButton.disabled=!0,this.setErrorMessage("Invalid birthdate")):(this.agePlaceholders.forEach((t=>{t.date=i.a(e)})),this.page=a.AgeConfirm)},this.dispatchError=(t,i,a=e.a0.error)=>{const s=e.d("faceplate-alert",{level:a,message:t});this.dispatchEvent(s)},this.updateCountdown=()=>{this.countdownText.textContent=this.countdown.secondsRemaining},this.cancelAndClose=()=>{this.page=a.AgeCollect,this.dialogSheet?.hide()},this.cancelAndRedirect=()=>{this.page=a.AgeRestrict,this.gateType!==e.fe.Platform&&(this.countdown.start(8e3),this.redirectTimeout=setTimeout(this.goHome,8e3))}}get dialogSheet(){return document.querySelector("#age-gate-interstitial")}get inputs(){return[this.querySelector('faceplate-text-input[name="year"]'),this.querySelector('faceplate-text-input[name="month"]'),this.querySelector('faceplate-text-input[name="day"]')].filter(Boolean)}get form(){return this.querySelector("faceplate-form")}get saveButton(){return this.querySelector("#age-gate-submit-btn")}get submitButton(){return this.querySelector(`[slot="${this.page}"] button[slot="primary-button"]`)}get isValid(){return Array.from(this.inputs).every((e=>e.value.length>0&&e.value.length<=(e.maxLength||4)))}get countdownText(){return this.querySelector("#age-restricted-countdown")}get agePlaceholders(){return this.querySelectorAll(".age-date-placeholder")}connectedCallback(){super.connectedCallback(),this.addEventListener("input",this.onInput),this.addEventListener("change",this.onInput),this.inputs?.forEach((e=>e.addEventListener("keypress",this.onInputKeypress))),this.page===a.AgeRestrict&&this.cancelAndRedirect()}disconnectedCallback(){super.disconnectedCallback(),this.removeEventListener("input",this.onInput),this.removeEventListener("change",this.onInput),this.inputs?.forEach((e=>e.removeEventListener("keypress",this.onInputKeypress))),clearTimeout(this.redirectTimeout)}updated(e){super.updated(e),this.countdown.active&&this.updateCountdown()}getAgeVerificationCompletionUrl(){let t=l.origin;t.includes("old.reddit.com")&&(t=t.replace("old.reddit.com","www.reddit.com"));const i=new URL(`${t}/partner/persona/return`),a="reload"===this.successDestination?l.href:this.successDestination,s=new URL(a);s.searchParams.delete(n),i.searchParams.set("destination",s.toString());const r=e.N();return r&&i.searchParams.set("page-type",r),i.searchParams.set("variant","age-verification"),i.toString()}disableCollectionPage(){this.inputs.forEach((e=>{e.disabled=!0})),this.saveButton&&(this.saveButton.disabled=!0)}reloadThePage(){const e=new URL(l.href);e.searchParams.delete(n),e.href===l.href?l.reload():l.href=e.href}goHome(){l.href="/"}setErrorMessage(e){const t=this.form;this.inputs.forEach(((i,a)=>{t?.invalidateFieldWithMessage(i.name,0===a?e:" ")}))}clearErrorMessage(){const e=this.form;this.inputs.forEach((t=>{t.checkValidity()||e?.invalidateFieldWithMessage(t.name,"")}))}render(){return e.x`<slot name="${this.page}"></slot>`}};c.styles=[e.t],e._([e.n({type:Boolean,attribute:"with-age-verification"})],c.prototype,"withAgeVerification",void 0),e._([e.n({type:String,reflect:!0})],c.prototype,"page",void 0),e._([e.n({type:String,attribute:"post-submit-behavior"})],c.prototype,"postSubmitBehavior",void 0),e._([e.n({type:String,attribute:"post-success-destination"})],c.prototype,"successDestination",void 0),e._([e.n({type:Boolean,attribute:"is-settings-collection"})],c.prototype,"isSettingsCollection",void 0),e._([e.n({type:String,attribute:"gate-type"})],c.prototype,"gateType",void 0),c=e._([e.e("age-gate-dialog")],c)}));
SML.di("./CYrPuvCiTj.js",import.meta.url,"CYrPuvCiTj");SML.di("./D0lCIVsZym.js",import.meta.url,"D0lCIVsZym");SML.di("./DVVJsZH047.js",import.meta.url,"DVVJsZH047");SML.di("./DCbB57ubLb.js",import.meta.url,"DCbB57ubLb");SML.di("./G2F6lxYj4X.js",import.meta.url,"G2F6lxYj4X");SML.di("./CVk7Sw8fup.js",import.meta.url,"CVk7Sw8fup");SML.di("./BJdHdrH8mb.js",import.meta.url,"BJdHdrH8mb");
SML.dm("CIrdFHbT17",["CYrPuvCiTj","D0lCIVsZym","DVVJsZH047","DCbB57ubLb","G2F6lxYj4X","CVk7Sw8fup","BJdHdrH8mb"],(async(e,t,i,o)=>{function s(e,t=document.documentElement){for(;e&&!e.dataset.token&&e!==t;)e=e.parentElement;return e?.dataset.token?e:void 0}function r(e){if(!e)return;const{token:t,url:i}=e.dataset;return t&&i?{token:t,url:i}:void 0}const a=/:/g;let n=class extends e.s{constructor(){super(...arguments),this.isModalView=!1,this.query="",this.options={},this.showAsModal=async()=>{this.modal?.show(),await(this.modal?.updateComplete)},this.showAsBlockingModal=async()=>{this.modal?.showModal(),await(this.modal?.updateComplete),this.removeModalShadow()},this.removeModalShadow=()=>{this.modal&&this.modal.style&&(this.modal.style.boxShadow="")},this.focusSearchInput=()=>{setTimeout((()=>this.searchInput?.focus()),0)},this.resetInputAndFilter=()=>{this.query="",this.searchInput.value=""}}static get styles(){return[e.t,e.i`:host{--content-width:min(400px, calc(100vw - var(--size-4xl)))}`]}setEditor(e){this.editor=e}onSelectEmoji(e){e.preventDefault(),e.stopPropagation();const t=s(e.target);if(!t)return;const a=r(t);a&&this.editor?.update((()=>{const e=o.E()||o.T();if(!o.u(e))return;const t=i.$({src:a.url,mediaId:a.token,mimetype:"image/png"}),{anchor:s}=e;if(o.x(s.getNode())){const e=s.getNode();o.g(e)&&e.getLastChild()?.append(t)}else e.insertNodes([t])}))}async show(){this.isModalView?await this.showAsBlockingModal():await this.showAsModal(),this.focusSearchInput()}close(){this.modal?.open&&(this.resetInputAndFilter(),this.modal?.close())}onSearchFieldInput(e){this.query=e.target?.value??""}preRenderOptions(){this.options={};for(const t of this.optionTemplates){const{token:i}=t.dataset;i&&(this.options[i]=e.X(t))}}onOptionKeyDown(e){"Enter"!==e.code&&"Space"!==e.code||this.onSelectEmoji(e)}renderSearchInput(){return e.x` <faceplate-search-input class="block pt-xs m-0" type="text" name="emojiQuery" appearance="secondary" placeholder="${"Search for emoji"}" @input="${this.onSearchFieldInput}" clearable> <span slot="leadingIcon">${t.s({size:e.I.Small})}</span> </faceplate-search-input> `;}render(){const t=this.query.replaceAll(a,""),i=Object.entries(this.options).filter((([e])=>!t||e.toLowerCase().includes(t.toLowerCase()))).map((([,e])=>e));return e.x` <slot @slotchange="${this.preRenderOptions}"></slot> <faceplate-modal class="relative"> <div slot="title" class="flex-1 text-neutral-content-strong"> ${"Flair Emojis"} </div> ${e.u({attributes:{slot:"closeButton",type:"button",onclick:this.close},appearance:"secondary",shape:"pill",leadingIcon:e.al({size:e.I.Small}),size:e.v.Small})} <div class="flex flex-col ${this.isModalView?"w-[var(--content-width)]":""}"> ${this.renderSearchInput()} ${i.length?e.x`<ul class="list-none grid grid-cols-[repeat(6,minmax(32px,1fr))] grid-rows-[32px] gap-xs px-xs py-2xs mb-0 mt-md -mx-xs overflow-auto h-[112px]" @click="${this.onSelectEmoji}" @keydown="${this.onOptionKeyDown}"> ${i} </ul>`:e.x`<div class="px-xs py-2xs mt-md h-[112px] text-neutral-content-weak text-14 text-center pt-2xs"> ${`Hm... we couldnt find any emoji for ${this.query}`} </div>`} </div> </faceplate-modal> `;}};e._([e.Y("faceplate-modal")],n.prototype,"modal",void 0),e._([e.Y('faceplate-search-input[name="emojiQuery"]')],n.prototype,"searchInput",void 0),e._([e.r({selector:"template"})],n.prototype,"optionTemplates",void 0),e._([e.n({type:Boolean,attribute:"is-modal-view"})],n.prototype,"isModalView",void 0),e._([e.j()],n.prototype,"query",void 0),e._([e.j()],n.prototype,"options",void 0),n=e._([e.e("emoji-picker")],n);const l=/(:.+?:)/g,u=/(:\w+?)$/;function m(e,t,o,s){let r;0===o?[r]=e.splitText(s):[,r]=e.splitText(o,s);const a=i.$({src:t.url,mediaId:t.token,mimetype:"image/png"});return r.replace(a),a}let h=class extends e.s{constructor(){super(...arguments),this.query="",this.selection=null,this.editorsWeakSet=new WeakSet,this.onEmojiOptionKeyDown=e=>{"Enter"!==e.code&&"Space"!==e.code||this.onSelectEmoji(e)}}static get styles(){return[e.t]}updateQuery(e){this.query=e}close(){this.updateQuery("")}setEditor(e){this.editorsWeakSet.has(e)||(e.registerUpdateListener((({editorState:e})=>{e.read((()=>{const e=o.E();if(!o.u(e)||!e.isCollapsed())return void this.close();const t=function(e){const t=e.anchor;if("text"!==t.type)return null;const i=t.getNode();if(!i.isSimpleText())return null;const o=t.offset;return i.getTextContent().slice(0,o)}(e);if(null===t)return void this.close();const i=t.match(u);i?(this.query=i[1]??"",e&&(this.selection=e)):this.close()}))})),e.registerCommand(o.a,(()=>(this.menu?.setFocus(0),!0)),o.J),e.registerNodeTransform(o.j,(e=>{if(!e.isSimpleText())return;const t=e.getTextContent().matchAll(l),i=Array.from(t);i.reverse();for(const t of i){const{index:i}=t,o=t[0],s=r(this.suggestionTemplates.find((e=>e.dataset.token===o)));"number"==typeof i&&s&&m(e,s,i,i+o.length)}}))),this.editor=e}onSelectEmoji(e){e.preventDefault(),e.stopPropagation();const t=s(e.target);if(!t)return;const i=r(t);i&&this.editor?.update((()=>{const e=this.selection||o.E();if(!o.u(e))return;const t=e.anchor;if("text"!==t.type)return;const s=t.getNode();if(!s.isSimpleText())return;const r=s.getTextContent().toLowerCase(),a=t.offset-this.query.length;let n=t.offset;for(;n<s.getTextContentSize()&&n-a<i.token.length&&r[n]===i.token[n-a];)n++;const l=m(s,i,a,n);this.selection&&(l.select(),this.selection=null),this.close()}))}render(){const t=this.suggestionTemplates.filter((e=>e.dataset.token?.toLowerCase().startsWith(this.query.toLowerCase()))).map((e=>e.cloneNode(!0)));return e.x` <slot class="hidden"></slot> ${this.query?e.x` <faceplate-menu class="${this.query?"block":"hidden"}" disable-auto-focus @click="${this.onSelectEmoji}" @keydown="${this.onEmojiOptionKeyDown}"> ${t} </faceplate-menu> `:""} `}};e._([e.r({selector:"li"})],h.prototype,"suggestionTemplates",void 0),e._([e.Y("faceplate-menu")],h.prototype,"menu",void 0),e._([e.j()],h.prototype,"query",void 0),h=e._([e.e("emoji-typeahead")],h)}));
SML.di("./CYrPuvCiTj.js",import.meta.url,"CYrPuvCiTj");SML.di("./gvWVn4JBWB.js",import.meta.url,"gvWVn4JBWB");SML.di("./Xj9Z_fzyKi.js",import.meta.url,"Xj9Z_fzyKi");SML.di("./DGvV9ljiFl.js",import.meta.url,"DGvV9ljiFl");SML.di("./DLdgTt_kCu.js",import.meta.url,"DLdgTt_kCu");SML.di("./CEf2DD9Ins.js",import.meta.url,"CEf2DD9Ins");SML.di("./Bb-T49I7YR.js",import.meta.url,"Bb-T49I7YR");SML.di("./DWiY65FgXJ.js",import.meta.url,"DWiY65FgXJ");
SML.dm("CNFB3MJQUJ",["CYrPuvCiTj","gvWVn4JBWB","Xj9Z_fzyKi","DGvV9ljiFl","DLdgTt_kCu","Bb-T49I7YR","DWiY65FgXJ","CEf2DD9Ins"],(async(t,e,i,a,n,r,o)=>{const s=t.W(t.s);let l=class extends s{constructor(){super(...arguments),this.isVisible=!1}connectedCallback(){super.connectedCallback(),this.enableObserver({threshold:1})}disconnectedCallback(){super.disconnectedCallback(),this.disableObserver()}publishEvent(){t.p(t.T.TriggerCommentBlockingAuth,{source:e.C.Scroll})}publishCloseEvent(){t.p(t.T.TriggerCommentBlockingAuth,{source:e.C.Close})}observerIsIntersectingCallback(){this.publishEvent(),this.isVisible=!0}observerIsNotIntersectingCallback(t){const{boundingClientRect:e,rootBounds:i}=t;i&&this.isVisible&&e.top>i.bottom&&(this.isVisible=!1,this.publishCloseEvent())}render(){return t.x`<div></div> `}};l=t._([t.e("cbau-trigger")],l);let m=class extends t.s{constructor(){super(...arguments),this.isCommentPretranslated=!1,this.pubsub=new t.z(this),this.onPostTranslationOverride=t=>{(t.id===this.postId||t.isContextUpdateEvent)&&(this.commentTranslated=t.isTranslationActive)},this.onCommentTranslationOverride=t=>{t.id===this.commentId&&(this.commentTranslated=t.isTranslationActive)},this.handleClick=()=>{if(!this.commentId)return;const e=!this.commentTranslated,i=document.querySelector(`shreddit-comment[thingId*="${this.commentId}"]`),a=r.e({id:this.commentId,parent_id:i?.parentId,post_id:this.postId,score:parseInt(i?.score??"",10)||void 0,type:"comment",created_timestamp:t.cK(i?.created??""),content_type:i?.contentType===o.C.TEXT?void 0:i?.contentType,translation_state:this.commentTranslated,translation_language:document.querySelector(`shreddit-post[id*="${this.postId}"]`)?.translationLanguage});t.k(this,a),this.pubsub.publish(t.T.I18nCommentTranslationOverride,{id:this.commentId,isTranslationActive:e})}}connectedCallback(){super.connectedCallback(),this.pubsub.subscribe(t.T.I18nCommentTranslationOverride,this.onCommentTranslationOverride,!1),this.pubsub.subscribe(t.T.I18nPostTranslationOverride,this.onPostTranslationOverride,!1),this.commentTranslated=this.isCommentPretranslated||n.i()}render(){return t.x` <rpl-tooltip appearance="inverted" placement="top" trigger="hover focus" content="${this.commentTranslated?"Show original":"Translate"}"> ${t.u({appearance:"plain",attributes:{onclick:this.handleClick,"data-testid":"comment-translation-status-icon","aria-label":"Toggle comment translation"},leadingIcon:this.commentTranslated?a.t({size:t.I.ExtraSmall,attributes:{"data-testid":"comment-translation-status-icon-translated-icon","aria-label":"Comment is translated",className:"text-primary-plain"}}):i.t({size:t.I.ExtraSmall,attributes:{"data-testid":"comment-translation-status-icon-original-icon","aria-label":"Comment is in original language",className:"text-primary-plain"}}),size:t.v.ExtraSmall})} </rpl-tooltip> `;}};m.styles=[t.t],t._([t.j()],m.prototype,"commentTranslated",void 0),t._([t.n({type:String,attribute:"comment-id"})],m.prototype,"commentId",void 0),t._([t.n({type:String,attribute:"post-id"})],m.prototype,"postId",void 0),t._([t.n({type:Boolean,attribute:"comment-pretranslated"})],m.prototype,"isCommentPretranslated",void 0),m=t._([t.e("comment-translation-status-icon")],m);let d=class extends t.s{constructor(){super(...arguments),this.commentId="",this.dedupe=!1,this.shouldTrackPosition=!1,this.pubsub=new t.z(this),this.loadInAd=()=>{const t=this.shouldTrackPosition?this:this.shadowRoot;if(!t||t.childNodes.length>0)return;const e=document.querySelector(`shreddit-comment-tree-ads > template#comment-tree-ad_${this.commentId}`),i=e?.content.querySelector("shreddit-comments-page-ad");e&&i&&this.isNotADuplicate(i)&&(t.replaceChildren(e.content.cloneNode(!0)),i.hasAttribute("is-blank")||this.removeAttribute("class"))},this.isNotADuplicate=t=>{if(!this.dedupe||t.hasAttribute("is-blank"))return!0;const e=document.querySelector("shreddit-comments-page-ad");return!e||t.getAttribute("campaign-id")!==e.getAttribute("campaign-id")}}createRenderRoot(){return this.shouldTrackPosition?this:super.createRenderRoot()}connectedCallback(){super.connectedCallback(),this.commentId&&(this.loadInAd(),this.pubsub.subscribe(t.T.CommentTreeAdsLoaded,this.loadInAd))}render(){return t.A}};d.styles=[t.t],t._([t.n({type:String,attribute:"comment-id"})],d.prototype,"commentId",void 0),t._([t.n({type:Boolean,attribute:"dedupe"})],d.prototype,"dedupe",void 0),t._([t.n({type:Boolean,attribute:"should-track-position"})],d.prototype,"shouldTrackPosition",void 0),d=t._([t.e("shreddit-comment-tree-ad")],d)}));
SML.di("./CYrPuvCiTj.js",import.meta.url,"CYrPuvCiTj");SML.di("./BHQvZGlXFT.js",import.meta.url,"BHQvZGlXFT");
SML.dm("CQXEpftGjH",["CYrPuvCiTj","BHQvZGlXFT"],(async(t,e)=>{let i=class extends t.s{constructor(){super(...arguments),this.subredditName="",this.pageId=e.E.Main,this.openModal=async()=>{await this._activateCommunityWidgetEditModalFeature();const t=document.querySelector(`community-widget-edit-modal#${e.C}`);t?.showModal({pageId:this.pageId,widgetId:this.widgetId})},this.onClick=()=>{this.openModal()},this.onKeyPress=t=>{"Enter"!==t.key&&"Space"!==t.key||this.openModal()}}static get styles(){return[t.t]}_activateCommunityWidgetEditModalFeature(){return t.w({name:t.O,routeParams:{subreddit:this.subredditName}})}render(){return t.x`<slot @click="${this.onClick}" @keypress="${this.onKeyPress}"></slot>`}};t._([t.n({type:String,attribute:"subreddit-name"})],i.prototype,"subredditName",void 0),t._([t.n({type:String,attribute:"page-id"})],i.prototype,"pageId",void 0),t._([t.n({type:String,attribute:"widget-id"})],i.prototype,"widgetId",void 0),i=t._([t.e("community-widget-edit-button")],i)}));
SML.di("./zsgsVPyBfM.js",import.meta.url,"zsgsVPyBfM");SML.di("./Dm8cQHQfWH.js",import.meta.url,"Dm8cQHQfWH");SML.di("./CYrPuvCiTj.js",import.meta.url,"CYrPuvCiTj");
SML.di("./CYrPuvCiTj.js",import.meta.url,"CYrPuvCiTj");SML.di("./wzdls1o9Kk.js",import.meta.url,"wzdls1o9Kk");SML.di("./h2J0CF1huj.js",import.meta.url,"h2J0CF1huj");SML.di("./DGvV9ljiFl.js",import.meta.url,"DGvV9ljiFl");SML.di("./Xj9Z_fzyKi.js",import.meta.url,"Xj9Z_fzyKi");SML.di("./NKGs0TL7Ol.js",import.meta.url,"NKGs0TL7Ol");SML.di("./C6Xqqgad3v.js",import.meta.url,"C6Xqqgad3v");SML.di("./B2_gjouej4.js",import.meta.url,"B2_gjouej4");SML.di("./CEf2DD9Ins.js",import.meta.url,"CEf2DD9Ins");SML.di("./CaC8XqiTGs.js",import.meta.url,"CaC8XqiTGs");SML.di("./DgaC1xItoR.js",import.meta.url,"DgaC1xItoR");SML.di("./DGkwklwWNC.js",import.meta.url,"DGkwklwWNC");SML.di("./B39chFHLCe.js",import.meta.url,"B39chFHLCe");
SML.dm("C_Ye-hONhE",["CYrPuvCiTj","wzdls1o9Kk","h2J0CF1huj","DGvV9ljiFl","Xj9Z_fzyKi","NKGs0TL7Ol","C6Xqqgad3v","B2_gjouej4","DGkwklwWNC","B39chFHLCe","CEf2DD9Ins","CaC8XqiTGs","DgaC1xItoR"],(async(e,t,a,i,n,o,r,s,d,m)=>{let l=class extends e.s{constructor(){super(...arguments),this.pubsub=new e.z(this),this.class="",this.thingId="",this.isOP=!1,this.isCollaborator=!1,this.isCommentDeleted=!1,this.handleCommentUpdated=({commentId:t,action:i,value:n})=>{this.thingId===t&&i===a.C.distinguishAsMod?this.distinguishedAs=n?e.e5.Moderator:void 0:this.thingId===t&&i===a.C.distinguishAsAdmin&&(this.distinguishedAs=n?e.e5.Admin:void 0)},this.handleCommentDeleted=({commentId:e})=>{this.thingId===e&&(this.isCommentDeleted=!0)}}static get styles(){return[e.t,e.i`:host{display:contents}`]}get authorType(){return this.isCommentDeleted?"":this.distinguishedAs===e.e5.Admin?"admin":this.distinguishedAs===e.e5.Moderator?"moderator":this.isOP?"op":this.isCollaborator?"collaborator":""}connectedCallback(){super.connectedCallback(),this.pubsub.subscribe(e.T.CommentUpdated,this.handleCommentUpdated,!1),this.pubsub.subscribe(e.T.CommentDeleted,this.handleCommentDeleted,!1)}render(){const a=this.authorType,i=`font-semibold text-12 tracking-wide uppercase ${this.class} ${a}`;switch(a){case"moderator":return e.x`<span class="${t.j(i,"text-identity-moderator")}" aria-label="${"Comment distinguished by moderator"}"> ${t.a_()} </span>`;case"admin":return e.x`<span class="${t.j(i,"text-identity-admin")}" aria-label="${"Comment distinguished by admin"}"> ${t.aZ()} </span>`;case"op":return e.x`<span class="${t.j(i,"comment-op-icon-js text-alienblue-600")}" aria-label="${"Comment distinguished as the original poster"}"> ${t.aY()} </span>`;case"collaborator":return e.x`<span class="${t.j(i,"text-alienblue-600")}" aria-label="${"Comment distinguished as a post collaborator"}"> ${t.aX()} </span>`;default:return e.A}}};e._([e.n({type:String})],l.prototype,"class",void 0),e._([e.n({type:String,attribute:"thing-id"})],l.prototype,"thingId",void 0),e._([e.n({type:String,attribute:"distinguished-as"})],l.prototype,"distinguishedAs",void 0),e._([e.n({type:Boolean,attribute:"op"})],l.prototype,"isOP",void 0),e._([e.n({type:Boolean,attribute:"collaborator"})],l.prototype,"isCollaborator",void 0),e._([e.n({type:Boolean,attribute:"comment-deleted"})],l.prototype,"isCommentDeleted",void 0),l=e._([e.e("shreddit-comment-author-modifier-icon")],l);let u=class extends e.s{constructor(){super(...arguments),this._showShareToModChatBanner=!e.a6.getItem(this.getLocalStorageKey()),this.closeCoachmark=()=>{this._showShareToModChatBanner=!1}}getLocalStorageKey(){return e.a7.ModQueueTranslationCoachmarkSeen}connectedCallback(){super.connectedCallback();e.a6.getItem(this.getLocalStorageKey())?this._showShareToModChatBanner=!1:(e.a6.setItem(this.getLocalStorageKey(),"true"),this._showShareToModChatBanner=!0)}render(){return e.x`<rpl-coachmark placement="${d.P.Top}" appearance="${m.a.Inverted}" ?open="${this._showShareToModChatBanner}"> <slot></slot> <rpl-coachmark-card slot="content" aria-live="polite" appearance="${m.a.Inverted}" class="w-[220px]"> <div slot="title" class="pt-xs pb-2xs"> <div class="max-w-[120px]"> ${"Translations are active"} </div> </div> ${e.u({attributes:{className:"close-btn",slot:"close-button",onclick:e=>{e.stopPropagation(),this.closeCoachmark()}},appearance:"plainInverted",size:e.v.Small,leadingIcon:e.al({size:e.I.Small})})} <div class="text-12 w-[170px] mb-sm"> ${"Redditors can contribute in any language, so content in communities you mod will be translated for you. Update your known language in account settings."} </div> <div slot="primary-button"> ${e.u({attributes:{onclick:e=>{this.closeCoachmark(),e.stopPropagation()}},appearance:"plainInverted",size:e.v.Small,children:"Got it"})} </div> <div slot="secondary-button"> ${e.u({attributes:{onclick:e=>{window.open("/settings/preferences","_blank"),e.stopPropagation()}},appearance:"plainInverted",size:e.v.Small,children:"Settings"})} </div> </rpl-coachmark-card> </rpl-coachmark>`;}};u.styles=[e.t],e._([e.j()],u.prototype,"_showShareToModChatBanner",void 0),u=e._([e.e("mod-queue-item-translation-coachmark")],u);let c=class extends e.s{constructor(){super(...arguments),this.thingId="",this.iconSize=e.I.Small,this.isDeleted=!1,this.isLocked=!1,this.isStickied=!1,this.isOP=!1,this.translationIndicator=s.T.none,this.pubsub=new e.z(this),this.handleCommentUpdated=({commentId:t,action:i,value:n})=>{if(this.thingId===t)switch(i){case a.C.distinguishAsMod:this.distinguishedAs=n?e.e5.Moderator:void 0;break;case a.C.sticky:this.isStickied=Boolean(n);break;case a.C.lock:this.isLocked=Boolean(n)}},this.handleCommentDeleted=({commentId:e})=>{this.thingId===e&&(this.isDeleted=!0)}}connectedCallback(){super.connectedCallback(),this.pubsub.subscribe(e.T.CommentUpdated,this.handleCommentUpdated),this.pubsub.subscribe(e.T.CommentDeleted,this.handleCommentDeleted)}renderLockedIcon(){return this.isDeleted||!this.isLocked?null:o.l({size:this.iconSize,attributes:{"aria-label":"Locked comment",className:"lock-icon text-alert-caution"}});}renderStickiedIcon(){if(this.isDeleted||!this.isStickied)return null;let t;return this.distinguishedAs===e.e5.Admin?t="text-identity-admin":this.distinguishedAs===e.e5.Moderator?t="text-identity-moderator":this.isOP&&(t="text-action-secondary"),this.isLocked?r.p({size:this.iconSize,attributes:{"aria-label":"Stickied comment",className:t}}):e.x` <span class="text-12 text-neutral-content inline-flex items-center gap-2xs"> ${r.p({attributes:{"aria-hidden":"true"},size:this.iconSize})} <span> ${"Stickied comment"} </span> </span> `;}renderTranslationIcon(){return this.translationIndicator!==s.T.none?e.x`<rpl-tooltip appearance="inverted" trigger="hover focus"> <span slot="content">${"Translations active"}</span><mod-queue-item-translation-coachmark> ${n.t({size:e.I.ExtraSmall,attributes:{"aria-label":"Comment is translated",className:t.j(this.translationIndicator===s.T.untranslated&&"hidden")}})} </mod-queue-item-translation-coachmark></rpl-tooltip> <rpl-tooltip appearance="inverted" trigger="hover focus"> <span slot="content">${"Translations not active"}</span>${i.t({size:e.I.ExtraSmall,attributes:{"aria-label":"Comment is not translated",className:t.j(this.translationIndicator===s.T.translated&&"hidden")}})}</rpl-tooltip> `:"";}render(){const t=this.renderLockedIcon(),a=this.renderStickiedIcon(),i=this.renderTranslationIcon();return t||a||this.translationIndicator!==s.T.none?e.x` <span class="ml-2xs text-12 text-neutral-content-weak" aria-hidden="true"></span> ${i} ${t} ${a} `:null}};c.styles=[e.i`:host{display:inline-flex;align-items:center;gap:var(--spacer-2xs)}`,e.t],e._([e.n({type:String,attribute:"thing-id"})],c.prototype,"thingId",void 0),e._([e.n({type:String,attribute:"icon-size"})],c.prototype,"iconSize",void 0),e._([e.n({type:Boolean,attribute:"deleted"})],c.prototype,"isDeleted",void 0),e._([e.n({type:Boolean,attribute:"locked"})],c.prototype,"isLocked",void 0),e._([e.n({type:Boolean,attribute:"stickied"})],c.prototype,"isStickied",void 0),e._([e.n({type:Boolean,attribute:"op"})],c.prototype,"isOP",void 0),e._([e.n({type:String,attribute:"distinguished-as"})],c.prototype,"distinguishedAs",void 0),e._([e.n({type:String,attribute:"translation-indicator"})],c.prototype,"translationIndicator",void 0),c=e._([e.e("shreddit-comment-badges")],c)}));
SML.di("./CYrPuvCiTj.js",import.meta.url,"CYrPuvCiTj");SML.di("./B2_754HZA-.js",import.meta.url,"B2_754HZA-");SML.di("./D0lCIVsZym.js",import.meta.url,"D0lCIVsZym");SML.di("./DKP07AmMm9.js",import.meta.url,"DKP07AmMm9");SML.di("./CVk7Sw8fup.js",import.meta.url,"CVk7Sw8fup");SML.di("./tXzIaFuSwM.js",import.meta.url,"tXzIaFuSwM");SML.di("./Bu_0OLU9_w.js",import.meta.url,"Bu_0OLU9_w");
SML.dm("C_biyTh4iY",["CYrPuvCiTj","B2_754HZA-","D0lCIVsZym","Bu_0OLU9_w","DKP07AmMm9","CVk7Sw8fup","tXzIaFuSwM"],(async(e,t,a,o)=>{let r=class extends e.s{constructor(){super(...arguments),this.target="",this.path="",this.pdpCommentSearchInputSelector=e.cr.pdpCommentSearchInput,this.handleBackNavigation=async()=>{this.showCommentComposer();const t=new URL(location.href);t.searchParams.delete(o.S.Query),t.searchParams.delete(o.S.Pane),t.searchParams.delete(o.S.ConversationId),t.searchParams.delete(o.S.ImpressionId);const a=new URL(`${location.origin}${this.path}`);history.replaceState({},"",t.toString());const r=a.toString().substring(location.origin.length),n=new URLSearchParams(location.search).get(o.S.Sort),s=`/svc/shreddit/comments${r}?${new URLSearchParams({"inline-refresh":"true","render-mode":"partial",...(n ? {sort:n} : {})}).toString()}`;this.replaceContentController.loadAndReplaceContent({src:s,target:this.target,afterSuccess:()=>e.cs(this,{message:"Navigated to all comments successfully",options:{priority:e.S.assertive}}),afterFailure:()=>this.dispatchEvent(e.d("faceplate-alert",{level:e.a0.error,cause:"uncategorized",message:"Failed to load the comments."}))})},this.replaceContentController=new a.R}showCommentComposer(){document.querySelector(this.pdpCommentSearchInputSelector)?.resetSearchInput()}render(){return e.x` <faceplate-tracker source="post" action="click" noun="view_all_comments"> <faceplate-tooltip appearance="inverted">${e.u({appearance:"plain",size:e.v.Small,shape:"pill",attributes:{className:"m-xs border-none","aria-label":"Back",onclick:this.handleBackNavigation,slot:"trigger",type:"button"},children:"All Comments",screenReaderContent:"Show all Comments tree",leadingIcon:t.a({size:e.I.Small})})} ${"Navigate to all comments"} </faceplate-tooltip> </faceplate-tracker>`;}};r.styles=[e.t],e._([e.n({type:String})],r.prototype,"target",void 0),e._([e.n({type:String})],r.prototype,"path",void 0),e._([e.n({type:String,attribute:"pdp-comment-search-input-selector"})],r.prototype,"pdpCommentSearchInputSelector",void 0),r=e._([e.e("pdp-comment-search-close")],r)}));
SML.di("./CYrPuvCiTj.js",import.meta.url,"CYrPuvCiTj");
SML.dm("CaD8uOkU6B",["CYrPuvCiTj"],(async e=>{var _,n,t;function E({subredditId:e,subredditName:_}){return{id:e,name:_}}function i({isEnabled:_}){return{page_type:e.N(),reason:_?"on":"off"}}!function(e){e.MODERATOR="moderator",e.COMMUNITY_GUIDE="community_guide"}(_||(_={})),function(e){e.VIEW="view",e.CLICK="click"}(n||(n={})),function(e){e.GUIDE_TOGGLE="community_guide_toggle",e.SHOW_ON_JOIN_TOGGLE="show_on_join_toggle",e.HEADER_LAYOUT_EDIT="header_layout_edit",e.HEADER_BANNER_EDIT="header_banner_edit",e.WELCOME_MESSAGE_EDIT="welcome_message_edit",e.USER_FLAIR_EDIT="user_flair_edit",e.COMMUNITY_RESOURCES_EDIT="community_resources_edit",e.COMMUNITY_RESOURCE_LINK="resource_link",e.GUIDE="guide",e.CLOSE="close",e.OPEN="open"}(t||(t={}));const r=(_,n,t)=>r=>e.c({source:_,action:n,noun:t},{action_info:i(r),subreddit:E(r)});const o=r(_.MODERATOR,n.CLICK,t.GUIDE_TOGGLE),u=r(_.MODERATOR,n.CLICK,t.SHOW_ON_JOIN_TOGGLE);return{get A(){return n},get N(){return t},get S(){return _},a:u,c:o,g:function(e,_){return JSON.stringify({subreddit:{id:e,name:_}})}}}));
SML.di("./CYrPuvCiTj.js",import.meta.url,"CYrPuvCiTj");
SML.dm("CaGmqNE-Ml",["CYrPuvCiTj"],(async t=>{let e;const n=new Uint8Array(16);function s(){if(!e&&(e="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!e))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return e(n)}var i=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i;const o=[];for(let t=0;t<256;++t)o.push((t+256).toString(16).slice(1));function r(t,e=0){return(o[t[e+0]]+o[t[e+1]]+o[t[e+2]]+o[t[e+3]]+"-"+o[t[e+4]]+o[t[e+5]]+"-"+o[t[e+6]]+o[t[e+7]]+"-"+o[t[e+8]]+o[t[e+9]]+"-"+o[t[e+10]]+o[t[e+11]]+o[t[e+12]]+o[t[e+13]]+o[t[e+14]]+o[t[e+15]]).toLowerCase()}function c(t){if(!function(t){return"string"==typeof t&&i.test(t)}(t))throw TypeError("Invalid UUID");let e;const n=new Uint8Array(16);return n[0]=(e=parseInt(t.slice(0,8),16))>>>24,n[1]=e>>>16&255,n[2]=e>>>8&255,n[3]=255&e,n[4]=(e=parseInt(t.slice(9,13),16))>>>8,n[5]=255&e,n[6]=(e=parseInt(t.slice(14,18),16))>>>8,n[7]=255&e,n[8]=(e=parseInt(t.slice(19,23),16))>>>8,n[9]=255&e,n[10]=(e=parseInt(t.slice(24,36),16))/1099511627776&255,n[11]=e/4294967296&255,n[12]=e>>>24&255,n[13]=e>>>16&255,n[14]=e>>>8&255,n[15]=255&e,n}function a(t,e,n){function s(t,s,i,o){var a;if("string"==typeof t&&(t=function(t){t=unescape(encodeURIComponent(t));const e=[];for(let n=0;n<t.length;++n)e.push(t.charCodeAt(n));return e}(t)),"string"==typeof s&&(s=c(s)),16!==(null===(a=s)||void 0===a?void 0:a.length))throw TypeError("Namespace must be array-like (16 iterable integer values, 0-255)");let m=new Uint8Array(16+t.length);if(m.set(s),m.set(t,s.length),m=n(m),m[6]=15&m[6]|e,m[8]=63&m[8]|128,i){o=o||0;for(let t=0;t<16;++t)i[o+t]=m[t];return i}return r(m)}try{s.name=t}catch(t){}return s.DNS="6ba7b810-9dad-11d1-80b4-00c04fd430c8",s.URL="6ba7b811-9dad-11d1-80b4-00c04fd430c8",s}function m(t){return 14+(t+64>>>9<<4)+1}function d(t,e){const n=(65535&t)+(65535&e);return(t>>16)+(e>>16)+(n>>16)<<16|65535&n}function u(t,e,n,s,i,o){return d((r=d(d(e,t),d(s,o)))<<(c=i)|r>>>32-c,n);var r,c}function h(t,e,n,s,i,o,r){return u(e&n|~e&s,t,e,i,o,r)}function l(t,e,n,s,i,o,r){return u(e&s|n&~s,t,e,i,o,r)}function _(t,e,n,s,i,o,r){return u(e^n^s,t,e,i,o,r)}function p(t,e,n,s,i,o,r){return u(n^(e|~s),t,e,i,o,r)}a("v3",48,(function(t){if("string"==typeof t){const e=unescape(encodeURIComponent(t));t=new Uint8Array(e.length);for(let n=0;n<e.length;++n)t[n]=e.charCodeAt(n)}return function(t){const e=[],n=32*t.length,s="0123456789abcdef";for(let i=0;i<n;i+=8){const n=t[i>>5]>>>i%32&255,o=parseInt(s.charAt(n>>>4&15)+s.charAt(15&n),16);e.push(o)}return e}(function(t,e){t[e>>5]|=128<<e%32,t[m(e)-1]=e;let n=1732584193,s=-271733879,i=-1732584194,o=271733878;for(let e=0;e<t.length;e+=16){const r=n,c=s,a=i,m=o;n=h(n,s,i,o,t[e],7,-680876936),o=h(o,n,s,i,t[e+1],12,-389564586),i=h(i,o,n,s,t[e+2],17,606105819),s=h(s,i,o,n,t[e+3],22,-1044525330),n=h(n,s,i,o,t[e+4],7,-176418897),o=h(o,n,s,i,t[e+5],12,1200080426),i=h(i,o,n,s,t[e+6],17,-1473231341),s=h(s,i,o,n,t[e+7],22,-45705983),n=h(n,s,i,o,t[e+8],7,1770035416),o=h(o,n,s,i,t[e+9],12,-1958414417),i=h(i,o,n,s,t[e+10],17,-42063),s=h(s,i,o,n,t[e+11],22,-1990404162),n=h(n,s,i,o,t[e+12],7,1804603682),o=h(o,n,s,i,t[e+13],12,-40341101),i=h(i,o,n,s,t[e+14],17,-1502002290),s=h(s,i,o,n,t[e+15],22,1236535329),n=l(n,s,i,o,t[e+1],5,-165796510),o=l(o,n,s,i,t[e+6],9,-1069501632),i=l(i,o,n,s,t[e+11],14,643717713),s=l(s,i,o,n,t[e],20,-373897302),n=l(n,s,i,o,t[e+5],5,-701558691),o=l(o,n,s,i,t[e+10],9,38016083),i=l(i,o,n,s,t[e+15],14,-660478335),s=l(s,i,o,n,t[e+4],20,-405537848),n=l(n,s,i,o,t[e+9],5,568446438),o=l(o,n,s,i,t[e+14],9,-1019803690),i=l(i,o,n,s,t[e+3],14,-187363961),s=l(s,i,o,n,t[e+8],20,1163531501),n=l(n,s,i,o,t[e+13],5,-1444681467),o=l(o,n,s,i,t[e+2],9,-51403784),i=l(i,o,n,s,t[e+7],14,1735328473),s=l(s,i,o,n,t[e+12],20,-1926607734),n=_(n,s,i,o,t[e+5],4,-378558),o=_(o,n,s,i,t[e+8],11,-2022574463),i=_(i,o,n,s,t[e+11],16,1839030562),s=_(s,i,o,n,t[e+14],23,-35309556),n=_(n,s,i,o,t[e+1],4,-1530992060),o=_(o,n,s,i,t[e+4],11,1272893353),i=_(i,o,n,s,t[e+7],16,-155497632),s=_(s,i,o,n,t[e+10],23,-1094730640),n=_(n,s,i,o,t[e+13],4,681279174),o=_(o,n,s,i,t[e],11,-358537222),i=_(i,o,n,s,t[e+3],16,-722521979),s=_(s,i,o,n,t[e+6],23,76029189),n=_(n,s,i,o,t[e+9],4,-640364487),o=_(o,n,s,i,t[e+12],11,-421815835),i=_(i,o,n,s,t[e+15],16,530742520),s=_(s,i,o,n,t[e+2],23,-995338651),n=p(n,s,i,o,t[e],6,-198630844),o=p(o,n,s,i,t[e+7],10,1126891415),i=p(i,o,n,s,t[e+14],15,-1416354905),s=p(s,i,o,n,t[e+5],21,-57434055),n=p(n,s,i,o,t[e+12],6,1700485571),o=p(o,n,s,i,t[e+3],10,-1894986606),i=p(i,o,n,s,t[e+10],15,-1051523),s=p(s,i,o,n,t[e+1],21,-2054922799),n=p(n,s,i,o,t[e+8],6,1873313359),o=p(o,n,s,i,t[e+15],10,-30611744),i=p(i,o,n,s,t[e+6],15,-1560198380),s=p(s,i,o,n,t[e+13],21,1309151649),n=p(n,s,i,o,t[e+4],6,-145523070),o=p(o,n,s,i,t[e+11],10,-1120210379),i=p(i,o,n,s,t[e+2],15,718787259),s=p(s,i,o,n,t[e+9],21,-343485551),n=d(n,r),s=d(s,c),i=d(i,a),o=d(o,m)}return[n,s,i,o]}(function(t){if(0===t.length)return[];const e=8*t.length,n=new Uint32Array(m(e));for(let s=0;s<e;s+=8)n[s>>5]|=(255&t[s/8])<<s%32;return n}(t),8*t.length))}));var w={randomUUID:"undefined"!=typeof crypto&&crypto.randomUUID&&crypto.randomUUID.bind(crypto)};function f(t,e,n){if(w.randomUUID&&!t)return w.randomUUID();const i=(t=t||{}).random||(t.rng||s)();return i[6]=15&i[6]|64,i[8]=63&i[8]|128,r(i)}function v(t,e,n,s){switch(t){case 0:return e&n^~e&s;case 1:case 3:return e^n^s;case 2:return e&n^e&s^n&s}}function y(t,e){return t<<e|t>>>32-e}a("v5",80,(function(t){const e=[1518500249,1859775393,2400959708,3395469782],n=[1732584193,4023233417,2562383102,271733878,3285377520];if("string"==typeof t){const e=unescape(encodeURIComponent(t));t=[];for(let n=0;n<e.length;++n)t.push(e.charCodeAt(n))}else Array.isArray(t)||(t=Array.prototype.slice.call(t));t.push(128);const s=t.length/4+2,i=Math.ceil(s/16),o=new Array(i);for(let e=0;e<i;++e){const n=new Uint32Array(16);for(let s=0;s<16;++s)n[s]=t[64*e+4*s]<<24|t[64*e+4*s+1]<<16|t[64*e+4*s+2]<<8|t[64*e+4*s+3];o[e]=n}o[i-1][14]=8*(t.length-1)/Math.pow(2,32),o[i-1][14]=Math.floor(o[i-1][14]),o[i-1][15]=8*(t.length-1)&4294967295;for(let t=0;t<i;++t){const s=new Uint32Array(80);for(let e=0;e<16;++e)s[e]=o[t][e];for(let t=16;t<80;++t)s[t]=y(s[t-3]^s[t-8]^s[t-14]^s[t-16],1);let i=n[0],r=n[1],c=n[2],a=n[3],m=n[4];for(let t=0;t<80;++t){const n=Math.floor(t/20),o=y(i,5)+v(n,r,c,a)+m+e[n]+s[t]>>>0;m=a,a=c,c=y(r,30)>>>0,r=i,i=o}n[0]=n[0]+i>>>0,n[1]=n[1]+r>>>0,n[2]=n[2]+c>>>0,n[3]=n[3]+a>>>0,n[4]=n[4]+m>>>0}return[n[0]>>24&255,n[0]>>16&255,n[0]>>8&255,255&n[0],n[1]>>24&255,n[1]>>16&255,n[1]>>8&255,255&n[1],n[2]>>24&255,n[2]>>16&255,n[2]>>8&255,255&n[2],n[3]>>24&255,n[3]>>16&255,n[3]>>8&255,255&n[3],n[4]>>24&255,n[4]>>16&255,n[4]>>8&255,255&n[4]]}));const g=t.s;let b=class extends g{constructor(){super(...arguments),this.totalComments=0,this.pubsub=new t.z(this),this.pageUnloaded=!1,this.initialViewStats={num_comments_viewed:0,comments_viewed_json:[],comments_viewed_list:[],num_comments_consumed:0,comments_consumed_json:[],comments_consumed_list:[]},this.view_stats=this.cloneObject(this.initialViewStats),this.viewedEntityFilterChips=new Set,this.correlation_id=f(),this.page_request_id=t.cy(),this.handleCommentCreated=()=>{this.totalComments+=1},this.handleVisibilityChange=t=>{t?(this.pageUnloaded=!1,this.resetViewStats()):this.pageUnloaded||this.flushEvents()},this.onBeforeUnload=()=>{this.pageUnloaded=!0,this.flushEvents()},this.flushEvents=()=>{const e=((e,n,s,i,o,r)=>{let c={};const a=t.gB("post"),m=n.slice(0,1e3);return c={correlation_id:o,view_stats:{num_comments_viewed:e,comments_viewed_json:JSON.stringify(m),comments_viewed_list:s},post:{...a,number_comments:i},action_info:{page_request_id:r}},t.c({source:"post",action:"view",noun:"comments"},c)})(this.view_stats.num_comments_viewed,this.view_stats.comments_viewed_json,this.view_stats.comments_viewed_list,this.totalComments,this.correlation_id,this.page_request_id);t.k(this,e);const n=((e,n,s,i,o,r)=>{let c={};const a=t.gB("post"),m=n.slice(0,1e3);return c={correlation_id:o,view_stats:{num_comments_consumed:e,comments_consumed_json:JSON.stringify(m),comments_consumed_list:s},post:{...a,number_comments:i},screen:{height:window?.screen.height,width:window?.screen.width},action_info:{page_request_id:r}},t.c({source:"post",action:"consume",noun:"comments"},c)})(this.view_stats.num_comments_consumed,this.view_stats.comments_consumed_json,this.view_stats.comments_consumed_list,this.totalComments,this.correlation_id,this.page_request_id);if(t.k(this,n),this.viewedEntityFilterChips.size){const e=((e,n,s)=>{let i={};return i={correlation_id:n,view_stats:{entity_ids:e},post:{...t.gB("post")},action_info:{page_request_id:s}},t.c({source:"post_detail",action:"view",noun:"comment_filter"},i)})(Array.from(this.viewedEntityFilterChips),this.correlation_id,this.page_request_id);t.k(this,e)}this.resetViewStats()},this.commentsViewedListener=t=>{this.updateCommentsViewedStats(t.detail)},this.commentsConsumedListener=t=>{this.updateCommentsConsumedStats(t.detail)},this.handleEntityFilterViewTracking=t=>{t.entity_id&&this.viewedEntityFilterChips.add(t.entity_id)}}cloneObject(t){return JSON.parse(JSON.stringify(t))}connectedCallback(){super.connectedCallback(),this.parentElement.addEventListener("comments-viewed-event",this.commentsViewedListener),this.parentElement.addEventListener("comments-consumed-event",this.commentsConsumedListener),this.pubsub.subscribe(t.T.EntityFilterView,this.handleEntityFilterViewTracking),this.pubsub.subscribe(t.T.CommentCreated,this.handleCommentCreated),t.aH.subscribe(this.onBeforeUnload,{unloadOnly:!0}),t.cw(this.handleVisibilityChange,{immediate:!0}),window.addEventListener("beforeRoute",this.flushEvents)}disconnectedCallback(){super.disconnectedCallback(),this.parentElement.removeEventListener("comments-viewed-event",this.commentsViewedListener),this.parentElement.removeEventListener("comments-consumed-event",this.commentsConsumedListener),t.aH.unsubscribe(this.onBeforeUnload),t.cx(this.handleVisibilityChange),window.removeEventListener("beforeRoute",this.flushEvents)}resetViewStats(){this.correlation_id=f(),this.view_stats=this.cloneObject(this.initialViewStats),this.viewedEntityFilterChips=new Set}includesComment(t,e){return t.some((t=>t.comment_id===e))}updateCommentsViewedStats(t){const e=t?.detail;this.includesComment(this.view_stats.comments_viewed_json,e.comment_id)||(this.view_stats.comments_viewed_json.push(e),this.view_stats.comments_viewed_list.push(e.comment_id),this.view_stats.num_comments_viewed=this.view_stats.comments_viewed_json.length)}updateCommentsConsumedStats(t){const e=t?.detail;this.includesComment(this.view_stats.comments_consumed_json,e.comment_id)||(this.view_stats.comments_consumed_json.push(e),this.view_stats.comments_consumed_list.push(e.comment_id),this.view_stats.num_comments_consumed=this.view_stats.comments_consumed_json.length)}};t._([t.n({type:Number,attribute:"total-comments"})],b.prototype,"totalComments",void 0),b=t._([t.e("shreddit-comment-tree-stats")],b)}));
SML.di("./D4iLzhUylu.js",import.meta.url,"D4iLzhUylu");SML.di("./tXzIaFuSwM.js",import.meta.url,"tXzIaFuSwM");SML.di("./CfGK5ScJd8.js",import.meta.url,"CfGK5ScJd8");SML.di("./CQXEpftGjH.js",import.meta.url,"CQXEpftGjH");SML.di("./BSYJ2p6cWD.js",import.meta.url,"BSYJ2p6cWD");SML.di("./CYrPuvCiTj.js",import.meta.url,"CYrPuvCiTj");SML.di("./BArq6DHk8G.js",import.meta.url,"BArq6DHk8G");SML.di("./BO1LrDxm4o.js",import.meta.url,"BO1LrDxm4o");SML.di("./DcxJbk2B3f.js",import.meta.url,"DcxJbk2B3f");SML.di("./wzdls1o9Kk.js",import.meta.url,"wzdls1o9Kk");SML.di("./BHQvZGlXFT.js",import.meta.url,"BHQvZGlXFT");SML.di("./CEf2DD9Ins.js",import.meta.url,"CEf2DD9Ins");SML.di("./B39chFHLCe.js",import.meta.url,"B39chFHLCe");SML.di("./DGkwklwWNC.js",import.meta.url,"DGkwklwWNC");SML.di("./7mROGt_umO.js",import.meta.url,"7mROGt_umO");SML.di("./BaesuPO9Of.js",import.meta.url,"BaesuPO9Of");SML.di("./BvU2E9FwXI.js",import.meta.url,"BvU2E9FwXI");SML.di("./DVa-SVjWU5.js",import.meta.url,"DVa-SVjWU5");SML.di("./D4Ab94OqLr.js",import.meta.url,"D4Ab94OqLr");SML.di("./BG_G1Cif8U.js",import.meta.url,"BG_G1Cif8U");SML.di("./BRVVLb7Eld.js",import.meta.url,"BRVVLb7Eld");SML.di("./Dm8cQHQfWH.js",import.meta.url,"Dm8cQHQfWH");
SML.dm("CmT_6t2al5",["CYrPuvCiTj","D4iLzhUylu","tXzIaFuSwM","CfGK5ScJd8","CQXEpftGjH","BSYJ2p6cWD","BArq6DHk8G","BO1LrDxm4o","DcxJbk2B3f","wzdls1o9Kk","BHQvZGlXFT","CEf2DD9Ins","B39chFHLCe","DGkwklwWNC","7mROGt_umO","BaesuPO9Of","BvU2E9FwXI","DVa-SVjWU5","D4Ab94OqLr","BG_G1Cif8U","BRVVLb7Eld","Dm8cQHQfWH"],(async E=>{E.g()&&(SML.di("./DuqlmJMEve.js",import.meta.url,"DuqlmJMEve").then((function(E){return E.f})),SML.di("./BuusMXXC0P.js",import.meta.url,"BuusMXXC0P"),SML.di("./kJ54wV-lew.js",import.meta.url,"kJ54wV-lew"),SML.di("./C6WYjiQ1xk.js",import.meta.url,"C6WYjiQ1xk"),SML.di("./DWZFFwtqSU.js",import.meta.url,"DWZFFwtqSU"))}));
SML.di("./CYrPuvCiTj.js",import.meta.url,"CYrPuvCiTj");SML.di("./Bb-T49I7YR.js",import.meta.url,"Bb-T49I7YR");SML.di("./BvU2E9FwXI.js",import.meta.url,"BvU2E9FwXI");
SML.dm("D2-YkDs3Od",["CYrPuvCiTj","Bb-T49I7YR","BvU2E9FwXI"],(async(e,t)=>{const n=e.s;let a=class extends n{constructor(){super(...arguments),this.translationContextValue=e.aN,this.checked=!0,this.isViewEventSent=!1,this.renderTitleText=()=>e.x` ${this.isCommentToggle()?"Translate comment":"Translate post"} `,this.renderbodyText=()=>e.x` ${this.isCommentToggle()?"You are commenting in a community speaking a language different from yours.":"You are posting in a community speaking a language different from yours."} `}getCommentIdForEditMode(){const e=this.closest("comment-composer-host");if(e&&e.isInEditMode)return this.closest("shreddit-comment")?.getAttribute("thingId")??void 0}updated(){if(this.translationContextValue.isTranslationActive&&!this.isViewEventSent){if(this.isCommentToggle()){const n=this.getCommentIdForEditMode();e.k(this,t.t(n))}else this.isPostToggle()&&e.k(this,t.a(this.thingId));this.isViewEventSent=!0}}handleToggleClick(n){if(n.preventDefault(),n.stopPropagation(),this.checked=!this.checked,this.isCommentToggle()){const n=this.getCommentIdForEditMode();e.k(this,t.c(this.checked,n))}this.isPostToggle()&&e.k(this,t.d(this.checked,this.thingId))}isCommentToggle(){return"comment"===this.toggleType}isPostToggle(){return"post"===this.toggleType}render(){if(!this.translationContextValue.isTranslationActive)return e.x``;const t=this.isCommentToggle()?"flex ml-sm mb-2xs justify-between":"flex justify-between py-md";return e.x` <div class="${t}"> <div> <div class="font-normal text-14 leading-5 text-secondary-plain"> ${this.renderTitleText()} </div> <div class="font-normal text-12 leading-4 text-secondary-plain-weak"> ${this.renderbodyText()} </div> </div> <faceplate-switch-input ?checked="${this.checked}" @click="${this.handleToggleClick}"></faceplate-switch-input> </div> `}};a.styles=[e.t],e._([e.aM({context:e.aO,subscribe:!0}),e.j()],a.prototype,"translationContextValue",void 0),e._([e.n({type:String,attribute:"toggle-type"})],a.prototype,"toggleType",void 0),e._([e.n({type:String,attribute:"thing-id"})],a.prototype,"thingId",void 0),e._([e.j()],a.prototype,"checked",void 0),e._([e.j()],a.prototype,"isViewEventSent",void 0),a=e._([e.e("translation-contribution-toggle")],a)}));
SML.di("./CYrPuvCiTj.js",import.meta.url,"CYrPuvCiTj");SML.di("./D2VJiRUxKq.js",import.meta.url,"D2VJiRUxKq");SML.di("./C8CrqKCiqJ.js",import.meta.url,"C8CrqKCiqJ");SML.di("./DWiY65FgXJ.js",import.meta.url,"DWiY65FgXJ");SML.di("./wzdls1o9Kk.js",import.meta.url,"wzdls1o9Kk");SML.di("./CNFB3MJQUJ.js",import.meta.url,"CNFB3MJQUJ");SML.di("./nZA40q2akY.js",import.meta.url,"nZA40q2akY");SML.di("./gvWVn4JBWB.js",import.meta.url,"gvWVn4JBWB");SML.di("./CEBL3uuwif.js",import.meta.url,"CEBL3uuwif");SML.di("./CeSKxcW4bq.js",import.meta.url,"CeSKxcW4bq");SML.di("./D0lCIVsZym.js",import.meta.url,"D0lCIVsZym");SML.di("./BEOg1WTiXx.js",import.meta.url,"BEOg1WTiXx");SML.di("./Bu_0OLU9_w.js",import.meta.url,"Bu_0OLU9_w");SML.di("./buPlOxYAo2.js",import.meta.url,"buPlOxYAo2");SML.di("./DKP07AmMm9.js",import.meta.url,"DKP07AmMm9");SML.di("./CVk7Sw8fup.js",import.meta.url,"CVk7Sw8fup");SML.di("./tXzIaFuSwM.js",import.meta.url,"tXzIaFuSwM");
SML.dm("D7VxXfygHQ",["CYrPuvCiTj","D2VJiRUxKq","C8CrqKCiqJ","wzdls1o9Kk","nZA40q2akY","gvWVn4JBWB","CEBL3uuwif","CeSKxcW4bq","D0lCIVsZym","BEOg1WTiXx","Bu_0OLU9_w","buPlOxYAo2","DWiY65FgXJ","CNFB3MJQUJ","DKP07AmMm9","CVk7Sw8fup","tXzIaFuSwM"],(async(e,t,n,r,i,a,s,o,l,m,c,h)=>{let d=window.location,u=class extends e.s{constructor(){super(...arguments),this.commentId="",this.parentCommentPermalink="",this.postPermalink="",this.isInModQueue=!1,this.onLinkClick=(t,n)=>{this.isInModQueue&&(t.stopPropagation(),t.preventDefault(),e.p?.(e.T.ModQueuePdpLinkClick,{isFullDiscussionLink:n,parentCommentPermalink:this.parentCommentPermalink,postPermalink:this.postPermalink}))}}static get styles(){return[e.t,e.V(".single-comment-thread-toolbar {\n  align-items: center;\n  display: flex;\n  flex-flow: row nowrap;\n  font: var(--font-title-h6);\n  justify-content: space-between;\n  padding: 0.5rem 1rem;\n}\n")]}firstUpdated(){this.updateComplete.then((()=>{if(this.isInModQueue)return;"1"===new URLSearchParams(d.search).get("draft")||t.s("auto")}))}handleSeeFullDiscussionLink(t){this.onLinkClick(t,!0);const r=document.querySelector("shreddit-post");r&&e.k(this,n.s(r))}render(){if(!this.commentId)return;const t=this.isInModQueue?"View parent comment":"Single comment thread",n="no-underline hover:no-underline visited:no-underline text-primary";return e.x` <div> <div class="single-comment-thread-toolbar text-neutral-content-weak"> ${this.parentCommentPermalink?e.x` <a href="${this.parentCommentPermalink}" class="${n}" @click="${this.onLinkClick}"> ${t} </a> `:e.x` <span>${t}</span> `} <span class="flex-1 h-px mx-xs bg-tone-4" data-id="line"></span> <a href="${this.postPermalink}" class="${n}" @click="${this.handleSeeFullDiscussionLink}"> ${"See full discussion"} </a> </div> </div> `;}};e._([e.n({type:String,attribute:"comment-id"})],u.prototype,"commentId",void 0),e._([e.n({type:String,attribute:"parent-comment-permalink"})],u.prototype,"parentCommentPermalink",void 0),e._([e.n({type:String,attribute:"post-permalink"})],u.prototype,"postPermalink",void 0),e._([e.n({type:Boolean,attribute:"is-in-modqueue"})],u.prototype,"isInModQueue",void 0),u=e._([e.e("shreddit-comments-page-tools")],u);let p=class extends e.s{constructor(){super(...arguments),this.postId="",this.isTruncated=!1,this.ui="mobile",this.pubsub=new e.z(this),this._searchDynamicIdCacheController=new s.S(this,e.ec.PdpCommentHighlightedSearchTerm),this._visibilityDetails=null,this.depthUpdated=null,this.handleCommentCreated=({parentThingId:t,body:n})=>{this.postId===t&&n&&this.querySelector("#next-comment")?.after(...e.bl(n))}}static get styles(){return[e.t,e.V(":host {\n  display: block;\n  background-color: var(--shreddit-content-background);\n  padding-bottom: var(--spacer-xs);\n}\n")]}get visibilityDetails(){return null===this._visibilityDetails&&null===this.depthUpdated&&(this.depthUpdated=new Promise((e=>{requestAnimationFrame((()=>{const t=this.getVisibilityDetails();this._visibilityDetails=t,e(t)}))}))),this._visibilityDetails}getVisibilityDetails({containerWidth:e}={}){const t=this.querySelector(":scope > shreddit-comment"),n=t?.depth??0;e??(e=this.getBoundingClientRect().width);const r="mobile"===this.ui?232:320,i="mobile"===this.ui?18:32,a=this.maxDepth||("mobile"===this.ui?4:10),s=Math.floor((e-r)/i),o=Math.max(1,Math.min(s,a)),l=o+n,m=this.querySelector(":scope shreddit-comment[is-chosen-mq-comment]"),c=m?.depth??0,h=Math.max(n,c-o+1);return m?{maxVisibleDepth:h+o,minVisibleDepth:h}:{maxVisibleDepth:l}}connectedCallback(){super.connectedCallback(),this.pubsub.subscribe(e.T.CommentCreated,this.handleCommentCreated),this.resizeObserver=new ResizeObserver(r.R((e=>{let t=0;for(const n of e){const e=n.contentBoxSize.at(0)?.inlineSize;if(e){t=e;break}}if(0===t)return;const n=this.getVisibilityDetails({containerWidth:t});if(this._visibilityDetails?.maxVisibleDepth!==n.maxVisibleDepth||this._visibilityDetails?.minVisibleDepth!==n.minVisibleDepth){this._visibilityDetails=n,this.depthUpdated=Promise.resolve(n);for(const e of this.querySelectorAll("shreddit-comment"))e.setVisibility(n.maxVisibleDepth,n.minVisibleDepth)}}),128,!0)),this.resizeObserver.observe(this,{box:"content-box"})}disconnectedCallback(){super.disconnectedCallback(),this.resizeObserver?.unobserve(this),this.resizeObserver?.disconnect()}showAllComments(){e.p(e.T.TriggerCommentBlockingAuth,{source:a.C.Button}),this.isTruncated=!1,e.k(this,r.b3())}renderShredtopViewMoreCommentsButton(t){return e.u({attributes:{type:"button",className:"ms-sm xs:ms-0 font-semibold mt-md",onclick:t},appearance:"brand",shape:"pill",leadingIcon:i.c({size:e.I.Medium}),size:e.v.Small,children:"View more comments"});}renderTruncatedExpandButton(){return this.renderShredtopViewMoreCommentsButton(this.showAllComments)}renderContent(){return function(e,t){const n="Comments Section";return e` <section class="flex flex-col px-md xs:px-0 gap-md relative" aria-label="${"Comments"}"> <h1 class="absolute -top-full -start-full w-px h-px overflow-hidden" aria-label="${n}"> ${n} </h1> ${e`<slot></slot>`} ${t?"":e`<slot name="truncated"></slot>`} </section> `;}(e.x,this.isTruncated);}renderExpandButton(){return this.isTruncated?this.renderTruncatedExpandButton():""}render(){return e.x` ${this.renderContent()} ${this.renderExpandButton()} `}};e._([e.n({type:String,attribute:"post-id"})],p.prototype,"postId",void 0),e._([e.n({type:Boolean})],p.prototype,"isTruncated",void 0),e._([e.n({type:String,attribute:"ui"})],p.prototype,"ui",void 0),e._([e.n({type:Number,attribute:"max-depth"})],p.prototype,"maxDepth",void 0),p=e._([e.e("shreddit-comment-tree")],p);let k=class extends e.s{constructor(){super(),this.target="",this.path="",this.isMobile=!1,this.isEntityFilterEnabled=!1,this.isSearchActive=!1,this.amaCommentTab=null,this.commentSearch=null,this.commentSort=null,this.pubsub=new e.z(this),this.replaceComments=async({sort:t="",filter:n="",entityFilterId:r=""})=>{t!==this.getCurrentSort()&&this.updateLocation({sort:t});const i=new URL(`${location.origin}${this.path}`);t&&i.searchParams.set(o.b.Sort,t.toLowerCase()),n&&i.searchParams.set(o.b.Filter,n.toLowerCase()),r&&i.searchParams.set(o.b.EntityFilterId,r),i.searchParams.set(o.b.InlineRefresh,"true");const a=i.toString().substring(location.origin.length);this.replaceContentController.loadAndReplaceContent({src:a,target:this.target,afterSuccess:()=>e.cs(this,{message:"The comments are sorted successfully",options:{priority:e.S.assertive}}),afterFailure:()=>this.dispatchEvent(e.d("faceplate-alert",{level:e.a0.error,cause:"uncategorized",message:"Failed to load the comments."}))})},this.handleSortEvent=async t=>{this.replaceComments({sort:t.detail.selected?.toLowerCase(),filter:this.getCurrentFilter()}),this.pubsub.publish(e.T.CommentSort,{sort:t.detail.selected});const n=this.querySelector("rpl-filter-chip[selected]"),r=this.allChip?.assignedElements()?.[0];n?.removeAttribute("selected"),r?.setAttribute("selected","")},this.handleAmaTabClick=e=>{const t=e.target?.closest("button")?.getAttribute("value");if(t){if(e instanceof KeyboardEvent&&"Enter"!==e.key)return;this.replaceComments({filter:t,sort:this.getCurrentSort()}),e.preventDefault()}},this.replaceContentController=new l.R,this.handleCommentSearchToggle=e=>{const t=e.detail.isHidden;this.isSearchActive=t;const n=this.querySelector("search-dynamic-id-cache-controller");n?.classList.toggle("min-w-full",t),this.classList.toggle("w-full",t)}}updateLocation({sort:e}){const t=new URL(location.href);t.searchParams.set(o.b.Sort,e.toLowerCase()),history.replaceState({},"",t.toString())}getCurrentFilter(){return this.querySelector("[faceplate-tab-selected]")?.getAttribute("value")?.toLowerCase()||""}getCurrentSort(){return new URLSearchParams(location.search).get(o.b.Sort)||""}connectedCallback(){super.connectedCallback(),this.commentSearch=this.querySelector('[slot="comment-search"]'),this.amaCommentTab=this.querySelector('[slot="ama-comment-tab"]'),this.commentSort=this.querySelector('[slot="comment-sort"]')}renderDivider(){return this.isEntityFilterEnabled&&!this.isSearchActive?e.x`<hr class="border-neutral-border-weak my-0 mx-2xs p-0 h-xl border-[0.5px]">`:e.A}renderSortbar(){const t=e.Q({flex:!0,"xs:ml-auto":!!this.amaCommentTab,hidden:this.isSearchActive});return this.commentSort?e.x`<slot name="comment-sort" class="${t}"></slot>`:e.A}renderSearchToggle(){return this.commentSearch?e.x`<slot name="comment-search"></slot>`:e.A}renderAMATab(){const t=e.Q({flex:!0,hidden:this.isSearchActive});return this.amaCommentTab?e.x` <slot name="ama-comment-tab" @click="${this.handleAmaTabClick}" @keydown="${this.handleAmaTabClick}" class="${t}"></slot> `:e.A}renderToolbar(){const t=e.Q({"toolbar-container relative bg-neutral-background flex gap-xs items-center":!0,"flex-wrap":!this.isEntityFilterEnabled,"flex-1":this.isSearchActive});return e.x` ${this.renderAMATab()} <div class="${t}"> ${this.renderSortbar()} ${this.renderSearchToggle()} ${this.renderDivider()} </div> `}renderDesktop(t){return e.x` <div class="${t}">${this.renderToolbar()}</div> `}renderMobile(t){return e.x` <div class="${t}">${this.renderToolbar()}</div> `}render(){const t=e.Q({"flex gap-xs outer-container items-center flex-wrap ":!0,"w-full":!this.isMobile||this.isSearchActive,"justify-between w-full":Boolean(this.amaCommentTab)});return e.x` <div class="flex gap-xs w-full" @comment-sort="${this.handleSortEvent}" @pdp-comment-search-toggle="${this.handleCommentSearchToggle}"> ${this.isMobile?this.renderMobile(t):this.renderDesktop(t)} </div> `}};k.styles=[e.t,e.i`.hide-scrollbar{-ms-overflow-style:none;scrollbar-width:none}`],e._([e.n({type:String})],k.prototype,"target",void 0),e._([e.n({type:String})],k.prototype,"path",void 0),e._([e.n({type:Boolean,attribute:"is-mobile"})],k.prototype,"isMobile",void 0),e._([e.Y(".all-chip")],k.prototype,"allChip",void 0),e._([e.n({type:Boolean,attribute:"entity-filter-enabled"})],k.prototype,"isEntityFilterEnabled",void 0),e._([e.j()],k.prototype,"isSearchActive",void 0),k=e._([e.e("shreddit-comments-sort-dropdown")],k);const T="expand-pdp-comment-search-button";let S=class extends e.s{constructor(){super(...arguments),this.target="",this.path="",this.showOnLoad=!1,this.initialValue="",this.isEntityFilterEnabled=!1,this.open=this.showOnLoad,this.commentSearchActive=this.showOnLoad,this.focusSearchInput=()=>{this.open||(this.open=!0),this.searchInput?.innerInput?.focus()},this.resetSearchInput=()=>{this.handleClear(),this.open=!1,h.S.update(e.ec.PdpCommentSearch),this.commentSearchActive=!1,this.expandSearchButton?.focus()},this.replaceContentController=new l.R,this.handlePdpCommentSearch=e.ae((async()=>{const t=this.searchInput?.value??"";if(t){this.commentSearchActive=!0;const n={conversationId:h.a.get(e.ec.PdpCommentSearch),cursor:{},impressionId:h.S.getUUID(),pane:e.ed.Comments,query:t,scope:{type:e.a8.PDP,path:this.path}};this.addSearchParamsToUrl(n);const r=new URLSearchParams({...c.s(n)});e.k(this,e.c({source:"search",action:"click",noun:"full_search_button"},this.searchTelemetryData));const i=document.createElement("span");i.id=this.target,this.replaceContentController.loadAndReplaceContent({src:`/svc/shreddit${this.path}pdp-comment-search-results?${r.toString()}`,target:this.target,wrapPartialElement:e=>(i.appendChild(e),i)})}}),300),this.handleKeyDown=t=>{h.S.update(e.ec.PdpCommentSearch),"Enter"===t.key&&t.target===this.searchInput&&this.handlePdpCommentSearch(),"Escape"===t.key&&t.target===this.searchInput&&(t.stopPropagation(),this.commentSearchActive?this.searchInput?.blur():this.resetSearchInput())},this.handleClear=()=>{this.searchInput?.value&&(this.searchInput.value="")},this.searchCommentText=()=>"Search Comments"}hideElementsVisibility(t){this.dispatchEvent(e.d("pdp-comment-search-toggle",{isHidden:t}))}connectedCallback(){super.connectedCallback(),this.commentSearchActive=this.showOnLoad,this.open=this.showOnLoad}get searchTelemetryData(){const t=this.searchInput?.value??"";return{action_info:{page_type:e.ar.PostDetail},search:{conversation_id:h.a.get(e.ec.PdpCommentSearch),impression_id:h.S.get(e.ec.PdpCommentSearch),query:t,query_id:h.b.get({query:t,scope:{type:e.a8.PDP,path:this.path}},e.ec.PdpCommentSearch),origin_element:e.ee.CommentSearchBar,origin_page_type:e.ar.PostDetail}}}addSearchParamsToUrl(t){const n=location.href,r=new URL(n);r.searchParams.set(c.S.Query,t.query),r.searchParams.set(c.S.Pane,e.ed.Comments),r.searchParams.set(c.S.ConversationId,t.conversationId??h.a.get(e.ec.PdpCommentSearch)),r.searchParams.set(c.S.ImpressionId,t.impressionId??h.S.getUUID());const i=r.toString();i!==n&&history.replaceState({},"",i)}updated(e){if(e.has("open")){const t=!e.get("open")&&this.open,n=e.get("open")&&!this.open;t?this.focusSearchInput():n&&this.expandSearchButton?.focus()}this.hideElementsVisibility(this.commentSearchActive||this.open)}renderSearchButton(){const t={"aria-controls":"pdp-comment-search-form","aria-expanded":`${this.open}`,id:T,onclick:this.focusSearchInput,type:"button"},n={appearance:"bordered",screenReaderContent:"Expand comment search"};return this.isEntityFilterEnabled?e.u({attributes:{...t,className:""+(this.open?"hidden":"")},leadingIcon:l.s({size:e.I.Small}),size:e.v.Small,...n}):e.u({attributes:{...t,className:"border-neutral-border-weak hover:border-neutral-content-weak text-secondary-weak font-normal "+(this.open?"hidden":"")},children:e.x`<span class="flex pr-xs">${this.searchCommentText()}</span>`,leadingIcon:e.x`<span class="flex pl-xs">${l.s({size:e.I.Small})}</span>`,...n})}render(){return e.x`<div class="block" data-faceplate-tracking-context="${JSON.stringify(this.searchTelemetryData)}"> <faceplate-tracker source="search" action="click" noun="search_bar"> ${this.renderSearchButton()} </faceplate-tracker> <form class="flex w-full ${e.Q({hidden:!this.open})}" id="pdp-comment-search-form" @submit="${this.handlePdpCommentSearch}"> <faceplate-search-input class="text-secondary-plain m-0 rounded-full outline outline-1 outline-neutral-border-weak flex-grow focus:outline-neutral-content-weak" placeholder="${this.searchCommentText()}" enterkeyhint="search" @keydown="${this.handleKeyDown}" @focus="${()=>{this.open=!0}}" value="${this.initialValue}"> ${e.u({attributes:{id:"search-input-clear-button",slot:"clearIcon",type:"button",onclick:this.handleClear},appearance:"plain",size:e.v.Small,screenReaderContent:"Clear search",leadingIcon:m.c({size:e.I.Small})})}</faceplate-search-input> ${e.u({appearance:"plain",attributes:{className:"ml-xs"+(this.commentSearchActive?" hidden":""),id:"cancel-pdp-comment-search-button",onclick:this.resetSearchInput,type:"button"},children:"Cancel"})} </form> </div>`;}};S.styles=[e.t],e._([e.n({type:String})],S.prototype,"target",void 0),e._([e.n({type:String})],S.prototype,"path",void 0),e._([e.n({attribute:"show-on-load",type:Boolean})],S.prototype,"showOnLoad",void 0),e._([e.n({type:String,attribute:"initial-value"})],S.prototype,"initialValue",void 0),e._([e.n({type:Boolean,attribute:"entity-filter-enabled"})],S.prototype,"isEntityFilterEnabled",void 0),e._([e.Y(`#${T}`)],S.prototype,"expandSearchButton",void 0),e._([e.Y("faceplate-search-input")],S.prototype,"searchInput",void 0),e._([e.j()],S.prototype,"open",void 0),e._([e.j()],S.prototype,"commentSearchActive",void 0),S=e._([e.e("pdp-comment-search-input")],S);let b=class extends e.s{connectedCallback(){const e=this.getFullUrl();e.includes(":~:text=")?this.goToCommentWithTextFragment(e):this.goToCommentWithId(),super.connectedCallback()}goToCommentWithId(){const e=window.location.hash;if(!e)return;const t=e.substring(1);if(!t)return;const n=`t1_${t}-comment-rtjson-content`,r=document.getElementById(n);if(!r)return;const i=document.querySelector(`shreddit-comment[thingid="t1_${t}"]`);if(!i)return;r.style.fontWeight="900";const a=i.getBoundingClientRect(),s=i.offsetHeight,o=a.top+window.pageYOffset-s/2;o>window.innerHeight&&window.scrollTo({top:o,behavior:"smooth"})}goToCommentWithTextFragment(e){document.fragmentDirective&&this.setWindowHref(e)}getFullUrl(){const e=performance.getEntriesByType("navigation");return e.length>0?e[0].name:window.location.href}setWindowHref(e){window.location.href=e}render(){return e.x``}};b=e._([e.e("comment-url-fragment-manager")],b)}));
SML.di("./CYrPuvCiTj.js",import.meta.url,"CYrPuvCiTj");SML.di("./CW7ghdb8uD.js",import.meta.url,"CW7ghdb8uD");SML.di("./B74fdX6mon.js",import.meta.url,"B74fdX6mon");SML.di("./BG_G1Cif8U.js",import.meta.url,"BG_G1Cif8U");SML.di("./Bme97yW7Ze.js",import.meta.url,"Bme97yW7Ze");
SML.dm("DDBVulnHtL",["CYrPuvCiTj","CW7ghdb8uD","B74fdX6mon","BG_G1Cif8U","Bme97yW7Ze"],(async(e,t,a,i,r)=>{function s(e){return!!e&&"editable"in e.dataset}let l=class extends a.F{static get styles(){return[a.F.styles,e.i`:host{--styled-scrollbar-background:var(--color-neutral-background-weak)}:host([is-desktop]) slot[name=toggle]{display:none}:host([is-desktop]) .author:hover slot[name=toggle]{display:block}:host(:focus) slot[name=toggle]{display:block}`,e.t]}get flair(){return this.querySelector("div.flair")}get flairTemplateRadioButtons(){return this.querySelectorAll('faceplate-radio-input[name="flairTemplateId"]')}get flairTemplateRadioButton(){return this.querySelector(`faceplate-radio-input[name="flairTemplateId"][value="${this.templateId}"]`)}get clearFlairButton(){return this.querySelector("button.clear-flair")}get submitButton(){return this.querySelector('button[type="submit"]')}get flairEnabledCheckbox(){return this.querySelector('faceplate-checkbox-input[name="flairEnabled"]')}get editorPrompts(){return this.querySelectorAll('div[slot^="flair-edit-prompt-"]')}get editorPrompt(){return this.querySelector(`div[slot^="flair-edit-prompt-${this.templateId}"]`)}get editor(){return this.querySelector("flair-editor")}constructor(){super(),this.isDesktop=!1,this.isMod=!1,this.isOpen=!1,this.handleKeyDown=e=>{const t=e;"Enter"===t.key||" "===t.key?(t.preventDefault(),this.toggleSelector()):"Escape"===t.key&&this.isOpen&&(t.preventDefault(),this.isOpen=!1)},this.onInvalidFlairInput=()=>{this.enableDisableButtons(!1)},this.onValidFlairInput=()=>{this.enableDisableButtons(!0)},this.convertFormDataToGql=t=>{const{flairTemplateId:a,flairText:i,isOwnFlairEnabled:r}=this.currentUserFlairSetting||{},s=this.templateId||void 0,l=Boolean(this.flairEnabledCheckbox?.checked),o=this.isSelectedFlairTemplateEditable()?this.editor?.getFlairText():void 0,n=o&&i!==o||a!==s,d=r!==l,u={subredditId:this.subredditId??"",isEnabled:l,flairTemplateId:s??null,text:o??null,shouldUpdateUserFlair:n,shouldUpdateUserFlairEnabledStatus:d,username:this.username??""};return JSON.stringify({operation:e.af.UpdateUserFlairAndEnabledStatus,variables:u,csrf_token:t.get("csrf_token")})},this.onFaceplateRequest=e=>{e.target===this&&this.enableDisableButtons(!1)},this.onFaceplateResponse=e=>{e.target===this&&this.handleFormResponse(e.detail.response)},this.handleFormResponse=async t=>{this.enableDisableButtons(!0);try{(await this.checkSuccessfulResponse(t))?(this.propagateCurrentFlair(),this.showSuccessToast(),this.isOpen=!1):this.showErrorToast(e.bm.QueryBadResponse)}catch(t){this.showErrorToast(e.bH(t))}},this.onFaceplateError=e=>{e.target===this&&this.enableDisableButtons(!0)},this.clearFlair=()=>{this.querySelectorAll('faceplate-radio-input[name="flairTemplateId"][checked]')?.forEach((e=>{e.checked=!1})),this.templateId=void 0,this.flair?.replaceChildren("")},this.clearFlairOnKeyDown=e=>{"Enter"!==e.key&&"Space"!==e.key||this.clearFlair()},this.selectFlairTemplate=e=>{if(!(e.target instanceof t.FaceplateRadioInput)||"string"!=typeof e.target.value)return;this.templateId=e.target.value;const a=s(e.target),i=a?this.editor?this.getEditableFlairContent(this.editor):null:this.getReadonlyFlairContent(e.target);i&&this.updateCurrentFlairDraft(i),a&&this.editor&&(this.editor.richtext=e.target.dataset.richtext,this.editor.text=e.target.dataset.text,this.editor.allowableContent=e.target.dataset.allowableContent?e.target.dataset.allowableContent:void 0,this.editor.maxEmojiCount=e.target.dataset.maxEmojiCount?parseInt(e.target.dataset.maxEmojiCount):void 0)},this.onEditorInput=e=>{if(!this.templateId)return;if(!this.isSelectedFlairTemplateEditable())return;if(!(e.target instanceof r.F))return;const t=this.getEditableFlairContent(e.target);t&&this.updateCurrentFlairDraft(t)},this.encoders={...this.encoders,"application/json":this.convertFormDataToGql}}connectedCallback(){this.clearFlairButton?.addEventListener("click",this.clearFlair),this.clearFlairButton?.addEventListener("keydown",this.clearFlairOnKeyDown),this.flairTemplateRadioButtons.forEach((e=>{e.addEventListener("input",this.selectFlairTemplate)})),this.editor?.addEventListener("input",this.onEditorInput),this.editor?.addEventListener("flair-input-valid",this.onValidFlairInput),this.editor?.addEventListener("flair-input-invalid",this.onInvalidFlairInput),this.addEventListener("faceplate-error",this.onFaceplateError),this.addEventListener("faceplate-request",this.onFaceplateRequest),this.addEventListener("faceplate-response",this.onFaceplateResponse),super.connectedCallback()}disconnectedCallback(){this.removeEventListener("keydown",this.handleKeyDown),this.clearFlairButton?.removeEventListener("click",this.clearFlair),this.clearFlairButton?.removeEventListener("keydown",this.clearFlairOnKeyDown),this.flairTemplateRadioButtons.forEach((e=>{e.removeEventListener("input",this.selectFlairTemplate)})),this.editor?.removeEventListener("input",this.onEditorInput),this.editor?.removeEventListener("flair-input-valid",this.onValidFlairInput),this.editor?.removeEventListener("flair-input-invalid",this.onInvalidFlairInput),this.removeEventListener("faceplate-error",this.onFaceplateError),this.removeEventListener("faceplate-request",this.onFaceplateRequest),this.removeEventListener("faceplate-response",this.onFaceplateResponse),super.disconnectedCallback()}enableDisableButtons(e){this.clearFlairButton&&(this.clearFlairButton.disabled=!e),this.submitButton&&(this.submitButton.disabled=!e)}async checkSuccessfulResponse(e){const t=(await e.json()).data;let a=!0;return t?.updateUserFlair&&(a=a&&t?.updateUserFlair?.ok),t?.updateUserSubredditFlairEnabledStatus&&(a=a&&t?.updateUserSubredditFlairEnabledStatus?.ok),a}showErrorToast(t){this.showAlert("Something went wrong",e.a0.error,t)}showSuccessToast(){this.showAlert("User flair updated",e.a0.success)}showAlert(t,a,i){this.dispatchEvent(e.d("faceplate-alert",{level:a,message:t,cause:i}))}toggleSelector(){this.isOpen=!this.isOpen,this.setAttribute("aria-expanded",String(this.isOpen))}toggleSelectorOnKeyDown(e){"Enter"!==e.key&&"Space"!==e.key||this.toggleSelector()}getEditableFlairContent(e){const t=e.getFlairHtml();if(!t)return;const a=(new DOMParser).parseFromString(t,"text/html").body.querySelector("p");a?.querySelectorAll("img").forEach((e=>{e.classList.add("flair-image","m-0","h-md","w-md")}));const i=this.querySelector(`faceplate-radio-input[name="flairTemplateId"][value="${this.templateId}"]`)?.querySelector("data")?.cloneNode(!0);return i?.querySelector(".flair-content")?.replaceChildren(...Array.from(a?.childNodes||[])),Array.from(i?.childNodes||[])}getReadonlyFlairContent(e){const t=e.querySelector("data")?.childNodes;if(t)return Array.from(t).map((e=>e.cloneNode(!0)))}updateCurrentFlairDraft(e){this.flair?.replaceChildren(...e)}propagateCurrentFlair(){this.userId&&this.subredditId&&e.p(e.T.CommunityAuthorFlairUpdated,{userId:this.userId,subredditId:this.subredditId,html:this.flair?.innerHTML.trim()??"",isEnabled:Boolean(this.flairEnabledCheckbox?.checked)||this.isMod})}isSelectedFlairTemplateEditable(){return s(this.flairTemplateRadioButton)}render(){return e.x` <div class="author flex flex-row flex-nowrap items-center gap-xs" tabindex="0" role="button" aria-haspopup="true" aria-expanded="${this.isOpen}" @keydown="${this.handleKeyDown}"> <slot class="block overflow-hidden w-full"></slot> ${this.isOpen?"":e.x`<slot class="toggle" name="toggle" part="toggle-slot" @click="${this.toggleSelector}" @keydown="${this.toggleSelectorOnKeyDown}"></slot>`} </div> ${this.isOpen||this.isMod?e.x` <slot name="selector"></slot> <slot name="divider"></slot> ${this.isSelectedFlairTemplateEditable()?e.x`<slot name="flair-editor-label"></slot><slot name="flair-editor"></slot>`:""} <slot name="settings"></slot> <slot name="actions"></slot> `:""} `}};e._([e.n({type:Boolean,attribute:"is-desktop"})],l.prototype,"isDesktop",void 0),e._([e.n({type:String,attribute:"template-id"})],l.prototype,"templateId",void 0),e._([e.n({type:String,attribute:"user-id"})],l.prototype,"userId",void 0),e._([e.n({type:String,attribute:"subreddit-id"})],l.prototype,"subredditId",void 0),e._([e.n({type:String,attribute:"subreddit-name"})],l.prototype,"subredditName",void 0),e._([e.n({type:Object,attribute:"current-user-flair-setting"})],l.prototype,"currentUserFlairSetting",void 0),e._([e.n({type:String,attribute:"username"})],l.prototype,"username",void 0),e._([e.n({type:Boolean,attribute:"is-mod"})],l.prototype,"isMod",void 0),e._([e.j()],l.prototype,"isOpen",void 0),l=e._([e.e("community-author-flair")],l),i.r(l)}));
SML.di("./CYrPuvCiTj.js",import.meta.url,"CYrPuvCiTj");SML.di("./Cv3__sHJQf.js",import.meta.url,"Cv3__sHJQf");SML.di("./BBSbW5jO-u.js",import.meta.url,"BBSbW5jO-u");SML.di("./wzdls1o9Kk.js",import.meta.url,"wzdls1o9Kk");
SML.dm("DDRXhyeDDC",["CYrPuvCiTj","Cv3__sHJQf","BBSbW5jO-u","wzdls1o9Kk"],(async(e,t,i)=>{var o;const n=e=>e instanceof HTMLIFrameElement&&e.src.includes("recaptcha");let a=o=class extends e.s{constructor(){super(...arguments),this.pageName="",this.withBlur=!1,this.contentHiddenTop=!1,this.contentHiddenBottom=!1,this.isVirtualKeyboardVisible=!1,this.loading=!1,this.events=new e.E(this),this.observer=new e.aB(this,this),this.focusManager=new e.aK(this,this),this.inFocusTrap=!1,this.blocking=!0,this.open=!1,this._enter=this.events.define("faceplate-enter",this.showModal),this._leave=this.events.define("faceplate-leave",this.close),this.refreshFocus=e.ae((()=>this.focusManager.refresh()),100),this.checkForHiddenContent=()=>{if(this.content){const{scrollTop:e,scrollHeight:t,clientHeight:i}=this.content;this.contentHiddenTop=t>i&&e>0,this.contentHiddenBottom=this.isVirtualKeyboardVisible||t>i&&Math.ceil(i+e)<t}},this.handleViewport=e.ae((()=>{const e=window.visualViewport;e&&(e.height<this.clientHeight?(this.style.paddingBottom=this.clientHeight-e.height-e.offsetTop+"px",this.isVirtualKeyboardVisible=!0):(this.style.paddingBottom="0px",this.isVirtualKeyboardVisible=!1),this.checkForHiddenContent())}),100),this.onClick=t=>{const i=t.currentTarget;i instanceof e.cO&&"click"!==i.action&&"view"!==i.action&&(t.preventDefault(),i.trackEvent?.())}}disconnectedCallback(){super.disconnectedCallback(),this.close()}showModal(){o.isReported||this.isValidOrigin()||(e.k(this,i.r(this.pageName)),o.isReported=!0),e.k(this,i.m(this.pageName)),e.i3().then((()=>{e.hq.add(this),this.focusManager.focusFirst(),document.body.style.pointerEvents="auto",document.body.addEventListener("focusin",this.ignoreRecaptchaIframeFocus),document.body.addEventListener("keydown",this.ignoreRecaptchaIframeTab)})),this.addEventListener("focusable-content-loaded",this.refreshFocus),this.mutationObserver=new MutationObserver(this.refreshFocus),this.mutationObserver.observe(this,{subtree:!0,childList:!0,attributes:!0,attributeFilter:["disabled","aria-disabled","class","hidden","slot"]}),this.resizeObserver=new ResizeObserver(this.checkForHiddenContent),this.content&&(this.resizeObserver.observe(this.content),this.content.addEventListener("scroll",this.checkForHiddenContent)),window?.visualViewport?.addEventListener("resize",this.handleViewport),window?.visualViewport?.addEventListener("scroll",this.handleViewport),this.backButtonTrackers.forEach((e=>e.addEventListener("click",this.onClick))),this.closeButtonTrackers.forEach((e=>e.addEventListener("click",this.onClick))),this.dispatchEvent(new CustomEvent(e.fl.Open,{bubbles:!0,composed:!0})),this.open=!0}ignoreRecaptchaIframeFocus(e){n(e.target)&&e.stopPropagation()}ignoreRecaptchaIframeTab(e){"Tab"===e.key&&n(e?.target)&&e?.stopPropagation()}close(){this.open&&(window?.visualViewport?.removeEventListener("resize",this.handleViewport),window?.visualViewport?.removeEventListener("scroll",this.handleViewport),e.hq.remove(this),this.mutationObserver?.disconnect(),this.open=!1)}_getLocation(){return window.location}isValidOrigin(){const e=this._getLocation();return!(!("IS_STORYBOOK"in window)||!window.IS_STORYBOOK)||"https:"===e.protocol&&(e.origin.endsWith(".reddit.com")||e.origin.endsWith(".snoo.dev"))}render(){const i=e.x`${this.isValidOrigin()?"":e.x` <div class="w-100 top-0 start-0 bg-danger-background text-global-white flex items-center justify-center box-border p-md"> ${t.i({attributes:{className:"me-xs"},size:e.I.ExtraLarge})} ${"This page was served from a non-Reddit domain. Please be extra careful."} </div> `} <div class="flex justify-between items-end pt-lg pb-xs px-[var(--topbar-horizontal-padding)]"> <div class="inline-flex items-center gap-md"> <slot name="backButton"></slot> <slot name="titleGraphic"></slot> </div> <slot name="closeButton"></slot> </div>`,o={"border-t-sm":this.contentHiddenTop,"border-b-sm":this.contentHiddenBottom};return e.x`<div class="bg-ui-modalbackground max-w-full flex flex-col basis-full font-sans pointer-events-auto"> ${i} <slot name="title" class="inline-flex py-0 px-[var(--horizontal-padding)]"></slot> <slot name="subtitle" class="inline-flex py-0 px-[var(--horizontal-padding)]"></slot> <slot class="flex flex-col grow shrink overflow-y-auto py-0 px-[var(--horizontal-padding)] border-0 border-solid border-neutral-border ${e.Q(o)}"></slot> ${this.loading?e.x`<shreddit-loading class="pointer-events-none h-[8rem]"></shreddit-loading>`:e.x` <slot name="primaryButton" class="inline-flex"></slot>`} </div>`}};a.isReported=!1,a.styles=[e.i`:host{--horizontal-padding:80px;--topbar-horizontal-padding:24px;display:flex;position:fixed;box-sizing:border-box;margin:auto;border-radius:var(--rem16);background:var(--color-ui-modalbackground);overflow:hidden;left:0;right:0;top:50%;transform:translateY(-50%);min-width:320px;width:528px;max-width:528px;min-height:400px;height:100%;max-height:700px}:host([withBlur]){box-shadow:0 0 0 max(100vw,100vh) var(--color-scrim)}slot:not([name]){transition:width .1s ease-in}::slotted([slot=primaryButton]){padding:24px var(--horizontal-padding)}@media (max-width:528px){:host{--horizontal-padding:16px;--topbar-horizontal-padding:16px;max-height:none;width:100%;max-width:none;border-radius:0;padding-bottom:0;transition:padding-bottom .2s ease-in-out}}`,e.t],e._([e.n({type:String})],a.prototype,"pageName",void 0),e._([e.n({type:Boolean})],a.prototype,"withBlur",void 0),e._([e.r({slot:"backButton",selector:"faceplate-tracker"})],a.prototype,"backButtonTrackers",void 0),e._([e.r({slot:"closeButton",selector:"faceplate-tracker"})],a.prototype,"closeButtonTrackers",void 0),e._([e.Y("slot:not([name])",!0)],a.prototype,"content",void 0),e._([e.j()],a.prototype,"contentHiddenTop",void 0),e._([e.j()],a.prototype,"contentHiddenBottom",void 0),e._([e.j()],a.prototype,"isVirtualKeyboardVisible",void 0),e._([e.j()],a.prototype,"loading",void 0),a=o=e._([e.e("auth-flow-modal")],a)}));
SML.di("./DWvjLeuquR.js",import.meta.url,"DWvjLeuquR");SML.di("./CW7ghdb8uD.js",import.meta.url,"CW7ghdb8uD");SML.di("./DDBVulnHtL.js",import.meta.url,"DDBVulnHtL");SML.di("./Bme97yW7Ze.js",import.meta.url,"Bme97yW7Ze");SML.di("./CIrdFHbT17.js",import.meta.url,"CIrdFHbT17");SML.di("./CYrPuvCiTj.js",import.meta.url,"CYrPuvCiTj");SML.di("./DVa-SVjWU5.js",import.meta.url,"DVa-SVjWU5");SML.di("./D4Ab94OqLr.js",import.meta.url,"D4Ab94OqLr");SML.di("./BG_G1Cif8U.js",import.meta.url,"BG_G1Cif8U");SML.di("./Cwnwa9tZ9F.js",import.meta.url,"Cwnwa9tZ9F");SML.di("./wzdls1o9Kk.js",import.meta.url,"wzdls1o9Kk");SML.di("./Dba41u4k37.js",import.meta.url,"Dba41u4k37");SML.di("./B74fdX6mon.js",import.meta.url,"B74fdX6mon");SML.di("./BEOg1WTiXx.js",import.meta.url,"BEOg1WTiXx");SML.di("./Be6gGpScOz.js",import.meta.url,"Be6gGpScOz");SML.di("./DyzvzwR0Ee.js",import.meta.url,"DyzvzwR0Ee");SML.di("./DVVJsZH047.js",import.meta.url,"DVVJsZH047");SML.di("./JaGlTj3I-9.js",import.meta.url,"JaGlTj3I-9");SML.di("./DCbB57ubLb.js",import.meta.url,"DCbB57ubLb");SML.di("./lEw4CeTWZd.js",import.meta.url,"lEw4CeTWZd");SML.di("./Cv3__sHJQf.js",import.meta.url,"Cv3__sHJQf");SML.di("./Q1SsBT7kMe.js",import.meta.url,"Q1SsBT7kMe");SML.di("./jzmnNb68mH.js",import.meta.url,"jzmnNb68mH");SML.di("./DAeuL7zDX0.js",import.meta.url,"DAeuL7zDX0");SML.di("./DdQ8ToexAC.js",import.meta.url,"DdQ8ToexAC");SML.di("./Cszz6xIhIJ.js",import.meta.url,"Cszz6xIhIJ");SML.di("./COfLy9zygd.js",import.meta.url,"COfLy9zygd");SML.di("./hgVDyxZ2rL.js",import.meta.url,"hgVDyxZ2rL");SML.di("./gMEDXxO5ap.js",import.meta.url,"gMEDXxO5ap");SML.di("./D2VJiRUxKq.js",import.meta.url,"D2VJiRUxKq");SML.di("./BDMOQ0-Tf9.js",import.meta.url,"BDMOQ0-Tf9");SML.di("./vhsAG6S_0w.js",import.meta.url,"vhsAG6S_0w");SML.di("./3jd2bjBQv5.js",import.meta.url,"3jd2bjBQv5");SML.di("./CsnZoaUuMa.js",import.meta.url,"CsnZoaUuMa");SML.di("./DS9WepT8W8.js",import.meta.url,"DS9WepT8W8");SML.di("./BaesuPO9Of.js",import.meta.url,"BaesuPO9Of");SML.di("./Bq3qdqopCU.js",import.meta.url,"Bq3qdqopCU");SML.di("./BIlQ5upx3L.js",import.meta.url,"BIlQ5upx3L");SML.di("./pihWhdUG1Q.js",import.meta.url,"pihWhdUG1Q");SML.di("./CZtlI9NlXS.js",import.meta.url,"CZtlI9NlXS");SML.di("./DuqlmJMEve.js",import.meta.url,"DuqlmJMEve");SML.di("./D0lCIVsZym.js",import.meta.url,"D0lCIVsZym");SML.di("./G2F6lxYj4X.js",import.meta.url,"G2F6lxYj4X");SML.di("./CVk7Sw8fup.js",import.meta.url,"CVk7Sw8fup");SML.di("./BJdHdrH8mb.js",import.meta.url,"BJdHdrH8mb");
SML.di("./CYrPuvCiTj.js",import.meta.url,"CYrPuvCiTj");SML.di("./005PrA1Byk.js",import.meta.url,"005PrA1Byk");SML.di("./DEMzfTzoPS.js",import.meta.url,"DEMzfTzoPS");SML.di("./CXJ58rbE8s.js",import.meta.url,"CXJ58rbE8s");SML.di("./D1jB1lRGDu.js",import.meta.url,"D1jB1lRGDu");SML.di("./B9Z38jXwJn.js",import.meta.url,"B9Z38jXwJn");SML.di("./GAfaH20Chw.js",import.meta.url,"GAfaH20Chw");SML.di("./wzdls1o9Kk.js",import.meta.url,"wzdls1o9Kk");SML.di("./HQokY_KEgH.js",import.meta.url,"HQokY_KEgH");SML.di("./BBSbW5jO-u.js",import.meta.url,"BBSbW5jO-u");
SML.dm("DIoGZkDZIX",["CYrPuvCiTj","005PrA1Byk","DEMzfTzoPS","CXJ58rbE8s","D1jB1lRGDu","B9Z38jXwJn","GAfaH20Chw","wzdls1o9Kk","HQokY_KEgH","BBSbW5jO-u"],(async(t,e,i)=>{const r={[t.f_.Login]:"login",[t.f_.Password]:"password",[t.f_.Register]:"register",[t.f_.RegisterPrompt]:"register",[t.f_.RegisterEmailOnly]:"register",[t.f_.PasswordRecovery]:"passwordrecovery",[t.f_.Onboarding]:"onboarding",[t.f_.PhoneAuth]:"login",[t.f_.HighFlyerRegister]:"register",[t.f_.LoggedInAction]:"register",[t.f_.AnswersRegister]:"register",[t.f_.CommunityValueRegister]:"register",[t.f_.MagicLinkLogin]:"login"};const s=t.s;let o=class extends s{constructor(){super(...arguments),this.step=t.f_.Register,this.hasRegularFont=!1,this.hideUnderline=!1,this.hasFullWidth=!1,this.hasLargeText=!1,this.params={},this.authFlowController=new i.A(this),this.sendCustomEvent=t=>{t.preventDefault(),t.stopPropagation(),this.authFlowController.show(this.step,this.params)}}static get styles(){return[t.t]}render(){return e.a({attributes:{className:this.hasFullWidth?"block":"inline-block",href:(i=this.step,`${CLIENT_CONFIG.ORIGIN}/${r[i]}/`),onclick:this.sendCustomEvent},children:t.x`<slot></slot>`,fontWeight:this.hasRegularFont?e.b.Regular:e.b.Semibold,size:this.hasLargeText?e.A.Medium:e.A.Small,suppressVisitedStyle:!0,underline:this.hideUnderline?"none":"always"});var i}};t._([t.n({type:String})],o.prototype,"step",void 0),t._([t.n({type:Boolean,attribute:"has-regular-font"})],o.prototype,"hasRegularFont",void 0),t._([t.n({type:Boolean,attribute:"hide-underline"})],o.prototype,"hideUnderline",void 0),t._([t.n({type:Boolean,attribute:"full-width"})],o.prototype,"hasFullWidth",void 0),t._([t.n({type:Boolean,attribute:"large-text"})],o.prototype,"hasLargeText",void 0),t._([t.n({type:Object})],o.prototype,"params",void 0),o=t._([t.e("auth-flow-link")],o)}));
SML.dm("DS9WepT8W8",[],(async()=>{var e=/[\0-\uD7FF\uE000-\uFFFF]|[\uD800-\uDBFF][\uDC00-\uDFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF]/,t=/[\0-\x1F\x7F-\x9F]/,i=/[!-#%-\*,-\/:;\?@\[-\]_\{\}\xA1\xA7\xAB\xB6\xB7\xBB\xBF\u037E\u0387\u055A-\u055F\u0589\u058A\u05BE\u05C0\u05C3\u05C6\u05F3\u05F4\u0609\u060A\u060C\u060D\u061B\u061D-\u061F\u066A-\u066D\u06D4\u0700-\u070D\u07F7-\u07F9\u0830-\u083E\u085E\u0964\u0965\u0970\u09FD\u0A76\u0AF0\u0C77\u0C84\u0DF4\u0E4F\u0E5A\u0E5B\u0F04-\u0F12\u0F14\u0F3A-\u0F3D\u0F85\u0FD0-\u0FD4\u0FD9\u0FDA\u104A-\u104F\u10FB\u1360-\u1368\u1400\u166E\u169B\u169C\u16EB-\u16ED\u1735\u1736\u17D4-\u17D6\u17D8-\u17DA\u1800-\u180A\u1944\u1945\u1A1E\u1A1F\u1AA0-\u1AA6\u1AA8-\u1AAD\u1B5A-\u1B60\u1B7D\u1B7E\u1BFC-\u1BFF\u1C3B-\u1C3F\u1C7E\u1C7F\u1CC0-\u1CC7\u1CD3\u2010-\u2027\u2030-\u2043\u2045-\u2051\u2053-\u205E\u207D\u207E\u208D\u208E\u2308-\u230B\u2329\u232A\u2768-\u2775\u27C5\u27C6\u27E6-\u27EF\u2983-\u2998\u29D8-\u29DB\u29FC\u29FD\u2CF9-\u2CFC\u2CFE\u2CFF\u2D70\u2E00-\u2E2E\u2E30-\u2E4F\u2E52-\u2E5D\u3001-\u3003\u3008-\u3011\u3014-\u301F\u3030\u303D\u30A0\u30FB\uA4FE\uA4FF\uA60D-\uA60F\uA673\uA67E\uA6F2-\uA6F7\uA874-\uA877\uA8CE\uA8CF\uA8F8-\uA8FA\uA8FC\uA92E\uA92F\uA95F\uA9C1-\uA9CD\uA9DE\uA9DF\uAA5C-\uAA5F\uAADE\uAADF\uAAF0\uAAF1\uABEB\uFD3E\uFD3F\uFE10-\uFE19\uFE30-\uFE52\uFE54-\uFE61\uFE63\uFE68\uFE6A\uFE6B\uFF01-\uFF03\uFF05-\uFF0A\uFF0C-\uFF0F\uFF1A\uFF1B\uFF1F\uFF20\uFF3B-\uFF3D\uFF3F\uFF5B\uFF5D\uFF5F-\uFF65]|\uD800[\uDD00-\uDD02\uDF9F\uDFD0]|\uD801\uDD6F|\uD802[\uDC57\uDD1F\uDD3F\uDE50-\uDE58\uDE7F\uDEF0-\uDEF6\uDF39-\uDF3F\uDF99-\uDF9C]|\uD803[\uDEAD\uDF55-\uDF59\uDF86-\uDF89]|\uD804[\uDC47-\uDC4D\uDCBB\uDCBC\uDCBE-\uDCC1\uDD40-\uDD43\uDD74\uDD75\uDDC5-\uDDC8\uDDCD\uDDDB\uDDDD-\uDDDF\uDE38-\uDE3D\uDEA9]|\uD805[\uDC4B-\uDC4F\uDC5A\uDC5B\uDC5D\uDCC6\uDDC1-\uDDD7\uDE41-\uDE43\uDE60-\uDE6C\uDEB9\uDF3C-\uDF3E]|\uD806[\uDC3B\uDD44-\uDD46\uDDE2\uDE3F-\uDE46\uDE9A-\uDE9C\uDE9E-\uDEA2\uDF00-\uDF09]|\uD807[\uDC41-\uDC45\uDC70\uDC71\uDEF7\uDEF8\uDF43-\uDF4F\uDFFF]|\uD809[\uDC70-\uDC74]|\uD80B[\uDFF1\uDFF2]|\uD81A[\uDE6E\uDE6F\uDEF5\uDF37-\uDF3B\uDF44]|\uD81B[\uDE97-\uDE9A\uDFE2]|\uD82F\uDC9F|\uD836[\uDE87-\uDE8B]|\uD83A[\uDD5E\uDD5F]/,s=/[ \xA0\u1680\u2000-\u200A\u2028\u2029\u202F\u205F\u3000]/;function a(e){return Array.prototype.slice.call(arguments,1).forEach((function(t){t&&Object.keys(t).forEach((function(i){e[i]=t[i]}))})),e}function r(e){return Object.prototype.toString.call(e)}function o(e){return"[object Function]"===r(e)}function n(e){return e.replace(/[.?*+^$[\]\\(){}|-]/g,"\\$&")}const u={fuzzyLink:!0,fuzzyEmail:!0,fuzzyIP:!1};const c={"http:":{validate:function(e,t,i){const s=e.slice(t);return i.re.http||(i.re.http=new RegExp("^\\/\\/"+i.re.src_auth+i.re.src_host_port_strict+i.re.src_path,"i")),i.re.http.test(s)?s.match(i.re.http)[0].length:0}},"https:":"http:","ftp:":"http:","//":{validate:function(e,t,i){const s=e.slice(t);return i.re.no_http||(i.re.no_http=new RegExp("^"+i.re.src_auth+"(?:localhost|(?:(?:"+i.re.src_domain+")\\.)+"+i.re.src_domain_root+")"+i.re.src_port+i.re.src_host_terminator+i.re.src_path,"i")),i.re.no_http.test(s)?t>=3&&":"===e[t-3]||t>=3&&"/"===e[t-3]?0:s.match(i.re.no_http)[0].length:0}},"mailto:":{validate:function(e,t,i){const s=e.slice(t);return i.re.mailto||(i.re.mailto=new RegExp("^"+i.re.src_email_name+"@"+i.re.src_host_strict,"i")),i.re.mailto.test(s)?s.match(i.re.mailto)[0].length:0}}},l="biz|com|edu|gov|net|org|pro|web|xxx|aero|asia|coop|info|museum|name|shop|".split("|");function _(a){const u=a.re=function(a){const r={};a=a||{},r.src_Any=e.source,r.src_Cc=t.source,r.src_Z=s.source,r.src_P=i.source,r.src_ZPCc=[r.src_Z,r.src_P,r.src_Cc].join("|"),r.src_ZCc=[r.src_Z,r.src_Cc].join("|");const o="[><]";return r.src_pseudo_letter="(?:(?![><]|"+r.src_ZPCc+")"+r.src_Any+")",r.src_ip4="(?:(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\\.){3}(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)",r.src_auth="(?:(?:(?!"+r.src_ZCc+"|[@/\\[\\]()]).)+@)?",r.src_port="(?::(?:6(?:[0-4]\\d{3}|5(?:[0-4]\\d{2}|5(?:[0-2]\\d|3[0-5])))|[1-5]?\\d{1,4}))?",r.src_host_terminator="(?=$|[><]|"+r.src_ZPCc+")(?!"+(a["---"]?"-(?!--)|":"-|")+"_|:\\d|\\.-|\\.(?!$|"+r.src_ZPCc+"))",r.src_path="(?:[/?#](?:(?!"+r.src_ZCc+"|"+o+"|[()[\\]{}.,\"'?!\\-;]).|\\[(?:(?!"+r.src_ZCc+"|\\]).)*\\]|\\((?:(?!"+r.src_ZCc+"|[)]).)*\\)|\\{(?:(?!"+r.src_ZCc+'|[}]).)*\\}|\\"(?:(?!'+r.src_ZCc+'|["]).)+\\"|\\\'(?:(?!'+r.src_ZCc+"|[']).)+\\'|\\'(?="+r.src_pseudo_letter+"|[-])|\\.{2,}[a-zA-Z0-9%/&]|\\.(?!"+r.src_ZCc+"|[.]|$)|"+(a["---"]?"\\-(?!--(?:[^-]|$))(?:-*)|":"\\-+|")+",(?!"+r.src_ZCc+"|$)|;(?!"+r.src_ZCc+"|$)|\\!+(?!"+r.src_ZCc+"|[!]|$)|\\?(?!"+r.src_ZCc+"|[?]|$))+|\\/)?",r.src_email_name='[\\-;:&=\\+\\$,\\.a-zA-Z0-9_][\\-;:&=\\+\\$,\\"\\.a-zA-Z0-9_]*',r.src_xn="xn--[a-z0-9\\-]{1,59}",r.src_domain_root="(?:"+r.src_xn+"|"+r.src_pseudo_letter+"{1,63})",r.src_domain="(?:"+r.src_xn+"|(?:"+r.src_pseudo_letter+")|(?:"+r.src_pseudo_letter+"(?:-|"+r.src_pseudo_letter+"){0,61}"+r.src_pseudo_letter+"))",r.src_host="(?:(?:(?:(?:"+r.src_domain+")\\.)*"+r.src_domain+"))",r.tpl_host_fuzzy="(?:"+r.src_ip4+"|(?:(?:(?:"+r.src_domain+")\\.)+(?:%TLDS%)))",r.tpl_host_no_ip_fuzzy="(?:(?:(?:"+r.src_domain+")\\.)+(?:%TLDS%))",r.src_host_strict=r.src_host+r.src_host_terminator,r.tpl_host_fuzzy_strict=r.tpl_host_fuzzy+r.src_host_terminator,r.src_host_port_strict=r.src_host+r.src_port+r.src_host_terminator,r.tpl_host_port_fuzzy_strict=r.tpl_host_fuzzy+r.src_port+r.src_host_terminator,r.tpl_host_port_no_ip_fuzzy_strict=r.tpl_host_no_ip_fuzzy+r.src_port+r.src_host_terminator,r.tpl_host_fuzzy_test="localhost|www\\.|\\.\\d{1,3}\\.|(?:\\.(?:%TLDS%)(?:"+r.src_ZPCc+"|>|$))",r.tpl_email_fuzzy='(^|[><]|"|\\(|'+r.src_ZCc+")("+r.src_email_name+"@"+r.tpl_host_fuzzy_strict+")",r.tpl_link_fuzzy="(^|(?![.:/\\-_@])(?:[$+<=>^`|]|"+r.src_ZPCc+"))((?![$+<=>^`|])"+r.tpl_host_port_fuzzy_strict+r.src_path+")",r.tpl_link_no_ip_fuzzy="(^|(?![.:/\\-_@])(?:[$+<=>^`|]|"+r.src_ZPCc+"))((?![$+<=>^`|])"+r.tpl_host_port_no_ip_fuzzy_strict+r.src_path+")",r}(a.__opts__),c=a.__tlds__.slice();function l(e){return e.replace("%TLDS%",u.src_tlds)}a.onCompile(),a.__tlds_replaced__||c.push("a[cdefgilmnoqrstuwxz]|b[abdefghijmnorstvwyz]|c[acdfghiklmnoruvwxyz]|d[ejkmoz]|e[cegrstu]|f[ijkmor]|g[abdefghilmnpqrstuwy]|h[kmnrtu]|i[delmnoqrst]|j[emop]|k[eghimnprwyz]|l[abcikrstuvy]|m[acdeghklmnopqrstuvwxyz]|n[acefgilopruz]|om|p[aefghklmnrstwy]|qa|r[eosuw]|s[abcdeghijklmnortuvxyz]|t[cdfghjklmnortvwz]|u[agksyz]|v[aceginu]|w[fs]|y[et]|z[amw]"),c.push(u.src_xn),u.src_tlds=c.join("|"),u.email_fuzzy=RegExp(l(u.tpl_email_fuzzy),"i"),u.link_fuzzy=RegExp(l(u.tpl_link_fuzzy),"i"),u.link_no_ip_fuzzy=RegExp(l(u.tpl_link_no_ip_fuzzy),"i"),u.host_fuzzy_test=RegExp(l(u.tpl_host_fuzzy_test),"i");const _=[];function h(e,t){throw new Error('(LinkifyIt) Invalid schema "'+e+'": '+t)}a.__compiled__={},Object.keys(a.__schemas__).forEach((function(e){const t=a.__schemas__[e];if(null===t)return;const i={validate:null,link:null};if(a.__compiled__[e]=i,"[object Object]"===r(t))return!function(e){return"[object RegExp]"===r(e)}(t.validate)?o(t.validate)?i.validate=t.validate:h(e,t):i.validate=function(e){return function(t,i){const s=t.slice(i);return e.test(s)?s.match(e)[0].length:0}}(t.validate),void(o(t.normalize)?i.normalize=t.normalize:t.normalize?h(e,t):i.normalize=function(e,t){t.normalize(e)});!function(e){return"[object String]"===r(e)}(t)?h(e,t):_.push(e)})),_.forEach((function(e){a.__compiled__[a.__schemas__[e]]&&(a.__compiled__[e].validate=a.__compiled__[a.__schemas__[e]].validate,a.__compiled__[e].normalize=a.__compiled__[a.__schemas__[e]].normalize)})),a.__compiled__[""]={validate:null,normalize:function(e,t){t.normalize(e)}};const d=Object.keys(a.__compiled__).filter((function(e){return e.length>0&&a.__compiled__[e]})).map(n).join("|");a.re.schema_test=RegExp("(^|(?!_)(?:[><]|"+u.src_ZPCc+"))("+d+")","i"),a.re.schema_search=RegExp("(^|(?!_)(?:[><]|"+u.src_ZPCc+"))("+d+")","ig"),a.re.schema_at_start=RegExp("^"+a.re.schema_search.source,"i"),a.re.pretest=RegExp("("+a.re.schema_test.source+")|("+a.re.host_fuzzy_test.source+")|@","i"),function(e){e.__index__=-1,e.__text_cache__=""}(a)}function h(e,t){const i=e.__index__,s=e.__last_index__,a=e.__text_cache__.slice(i,s);this.schema=e.__schema__.toLowerCase(),this.index=i+t,this.lastIndex=s+t,this.raw=a,this.text=a,this.url=a}function d(e,t){const i=new h(e,t);return e.__compiled__[i.schema].normalize(i,e),i}function p(e,t){if(!(this instanceof p))return new p(e,t);var i;t||(i=e,Object.keys(i||{}).reduce((function(e,t){return e||u.hasOwnProperty(t)}),!1)&&(t=e,e={})),this.__opts__=a({},u,t),this.__index__=-1,this.__last_index__=-1,this.__schema__="",this.__text_cache__="",this.__schemas__=a({},c,e),this.__compiled__={},this.__tlds__=l,this.__tlds_replaced__=!1,this.re={},_(this)}p.prototype.add=function(e,t){return this.__schemas__[e]=t,_(this),this},p.prototype.set=function(e){return this.__opts__=a(this.__opts__,e),this},p.prototype.test=function(e){if(this.__text_cache__=e,this.__index__=-1,!e.length)return!1;let t,i,s,a,r,o,n,u,c;if(this.re.schema_test.test(e))for(n=this.re.schema_search,n.lastIndex=0;null!==(t=n.exec(e));)if(a=this.testSchemaAt(e,t[2],n.lastIndex),a){this.__schema__=t[2],this.__index__=t.index+t[1].length,this.__last_index__=t.index+t[0].length+a;break}return this.__opts__.fuzzyLink&&this.__compiled__["http:"]&&(u=e.search(this.re.host_fuzzy_test),u>=0&&(this.__index__<0||u<this.__index__)&&null!==(i=e.match(this.__opts__.fuzzyIP?this.re.link_fuzzy:this.re.link_no_ip_fuzzy))&&(r=i.index+i[1].length,(this.__index__<0||r<this.__index__)&&(this.__schema__="",this.__index__=r,this.__last_index__=i.index+i[0].length))),this.__opts__.fuzzyEmail&&this.__compiled__["mailto:"]&&(c=e.indexOf("@"),c>=0&&null!==(s=e.match(this.re.email_fuzzy))&&(r=s.index+s[1].length,o=s.index+s[0].length,(this.__index__<0||r<this.__index__||r===this.__index__&&o>this.__last_index__)&&(this.__schema__="mailto:",this.__index__=r,this.__last_index__=o))),this.__index__>=0},p.prototype.pretest=function(e){return this.re.pretest.test(e)},p.prototype.testSchemaAt=function(e,t,i){return this.__compiled__[t.toLowerCase()]?this.__compiled__[t.toLowerCase()].validate(e,i,this):0},p.prototype.match=function(e){const t=[];let i=0;this.__index__>=0&&this.__text_cache__===e&&(t.push(d(this,i)),i=this.__last_index__);let s=i?e.slice(i):e;for(;this.test(s);)t.push(d(this,i)),s=s.slice(this.__last_index__),i+=this.__last_index__;return t.length?t:null},p.prototype.matchAtStart=function(e){if(this.__text_cache__=e,this.__index__=-1,!e.length)return null;const t=this.re.schema_at_start.exec(e);if(!t)return null;const i=this.testSchemaAt(e,t[2],t[0].length);return i?(this.__schema__=t[2],this.__index__=t.index+t[1].length,this.__last_index__=t.index+t[0].length+i,d(this,0)):null},p.prototype.tlds=function(e,t){return e=Array.isArray(e)?e:[e],t?(this.__tlds__=this.__tlds__.concat(e).sort().filter((function(e,t,i){return e!==i[t-1]})).reverse(),_(this),this):(this.__tlds__=e.slice(),this.__tlds_replaced__=!0,_(this),this)},p.prototype.normalize=function(e){e.schema||(e.url="http://"+e.url),"mailto:"!==e.schema||/^mailto:/i.test(e.url)||(e.url="mailto:"+e.url)},p.prototype.onCompile=function(){};const m=/\s/,f=(e,t)=>(i,s)=>{if(s>e.length){const t=i[s-e.length-1];if(!t.match(m)){if("/"!==t)return 0;{const t=s-e.length-2;if(t>=0&&!i[t].match(m))return 0}}}const a=i.slice(s);return""===a&&"@"!==e||(t.test(a)?a?.match(t)[0].length??0:0)};var g,b;!function(e){e.All="all",e.Here="here"}(g||(g={})),function(e){e.subreddit="r/",e.subredditFull="/r/",e.profile="u/",e.profileFull="/u/",e.mention="@"}(b||(b={}));const D=new RegExp("^[A-Za-z0-9][A-Za-z0-9_]{0,20}\\b"),y=new RegExp("^[A-Za-z0-9_-]{0,20}"),F=new RegExp("^[A-Za-z0-9_-]{1,20}");b.subreddit;const x={subreddit:{prefix:b.subreddit,config:{validate:f(b.subreddit,D)}},profile:{prefix:b.profile,config:{validate:f(b.profile,y)}},mention:{prefix:b.mention,config:{validate:f(b.mention,F)}},subredditFullUrl:{prefix:b.subreddit,config:{validate:f(b.subreddit,D)}}},k={subredditFull:{prefix:b.subredditFull,config:x.subreddit.config},profileFull:{prefix:b.profileFull,config:x.profile.config}},z={...x,...k},v=["//","ftp:","http:","https:","mailto:"],w=["aaa","aarp","abarth","abb","abbott","abbvie","abc","able","abogado","abudhabi","ac","academy","accenture","accountant","accountants","aco","actor","ad","ads","adult","ae","aeg","aero","aetna","af","afl","africa","ag","agakhan","agency","ai","aig","airbus","airforce","airtel","akdn","al","alfaromeo","alibaba","alipay","allfinanz","allstate","ally","alsace","alstom","am","amazon","americanexpress","americanfamily","amex","amfam","amica","amsterdam","analytics","android","anquan","anz","ao","aol","apartments","app","apple","aq","aquarelle","ar","arab","aramco","archi","army","arpa","art","arte","as","asda","asia","associates","at","athleta","attorney","au","auction","audi","audible","audio","auspost","author","auto","autos","avianca","aw","aws","ax","axa","az","azure","ba","baby","baidu","banamex","bananarepublic","band","bank","bar","barcelona","barclaycard","barclays","barefoot","bargains","baseball","basketball","bauhaus","bayern","bb","bbc","bbt","bbva","bcg","bcn","bd","be","beats","beauty","beer","bentley","berlin","best","bestbuy","bet","bf","bg","bh","bharti","bi","bible","bid","bike","bing","bingo","bio","biz","bj","black","blackfriday","blockbuster","blog","bloomberg","blue","bm","bms","bmw","bn","bnpparibas","bo","boats","boehringer","bofa","bom","bond","boo","book","booking","bosch","bostik","boston","bot","boutique","box","br","bradesco","bridgestone","broadway","broker","brother","brussels","bs","bt","build","builders","business","buy","buzz","bv","bw","by","bz","bzh","ca","cab","cafe","cal","call","calvinklein","cam","camera","camp","canon","capetown","capital","capitalone","car","caravan","cards","care","career","careers","cars","casa","case","cash","casino","cat","catering","catholic","cba","cbn","cbre","cbs","cc","cd","center","ceo","cern","cf","cfa","cfd","cg","ch","chanel","channel","charity","chase","chat","cheap","chintai","christmas","chrome","church","ci","cipriani","circle","cisco","citadel","citi","citic","city","cityeats","ck","cl","claims","cleaning","click","clinic","clinique","clothing","cloud","club","clubmed","cm","cn","co","coach","codes","coffee","college","cologne","com","comcast","commbank","community","company","compare","computer","comsec","condos","construction","consulting","contact","contractors","cooking","cookingchannel","cool","coop","corsica","country","coupon","coupons","courses","cpa","cr","credit","creditcard","creditunion","cricket","crown","crs","cruise","cruises","cu","cuisinella","cv","cw","cx","cy","cymru","cyou","cz","dabur","dad","dance","data","date","dating","datsun","day","dclk","dds","de","deal","dealer","deals","degree","delivery","dell","deloitte","delta","democrat","dental","dentist","desi","design","dev","dhl","diamonds","diet","digital","direct","directory","discount","discover","dish","diy","dj","dk","dm","dnp","do","docs","doctor","dog","domains","dot","download","drive","dtv","dubai","dunlop","dupont","durban","dvag","dvr","dz","earth","eat","ec","eco","edeka","edu","education","ee","eg","email","emerck","energy","engineer","engineering","enterprises","epson","equipment","er","ericsson","erni","es","esq","estate","et","etisalat","eu","eurovision","eus","events","exchange","expert","exposed","express","extraspace","fage","fail","fairwinds","faith","family","fan","fans","farm","farmers","fashion","fast","fedex","feedback","ferrari","ferrero","fi","fiat","fidelity","fido","film","final","finance","financial","fire","firestone","firmdale","fish","fishing","fit","fitness","fj","fk","flickr","flights","flir","florist","flowers","fly","fm","fo","foo","food","foodnetwork","football","ford","forex","forsale","forum","foundation","fox","fr","free","fresenius","frl","frogans","frontdoor","frontier","ftr","fujitsu","fun","fund","furniture","futbol","fyi","ga","gal","gallery","gallo","gallup","game","games","gap","garden","gay","gb","gbiz","gd","gdn","ge","gea","gent","genting","george","gf","gg","ggee","gh","gi","gift","gifts","gives","giving","gl","glass","gle","global","globo","gm","gmail","gmbh","gmo","gmx","gn","godaddy","gold","goldpoint","golf","goo","goodyear","goog","google","gop","got","gov","gp","gq","gr","grainger","graphics","gratis","green","gripe","grocery","group","gs","gt","gu","guardian","gucci","guge","guide","guitars","guru","gw","gy","hair","hamburg","hangout","haus","hbo","hdfc","hdfcbank","health","healthcare","help","helsinki","here","hermes","hgtv","hiphop","hisamitsu","hitachi","hiv","hk","hkt","hm","hn","hockey","holdings","holiday","homedepot","homegoods","homes","homesense","honda","horse","hospital","host","hosting","hot","hoteles","hotels","hotmail","house","how","hr","hsbc","ht","hu","hughes","hyatt","hyundai","ibm","icbc","ice","icu","id","ie","ieee","ifm","ikano","il","im","imamat","imdb","immo","immobilien","in","inc","industries","infiniti","info","ing","ink","institute","insurance","insure","int","international","intuit","investments","io","ipiranga","iq","ir","irish","is","ismaili","ist","istanbul","it","itau","itv","jaguar","java","jcb","je","jeep","jetzt","jewelry","jio","jll","jm","jmp","jnj","jo","jobs","joburg","jot","joy","jp","jpmorgan","jprs","juegos","juniper","kaufen","kddi","ke","kerryhotels","kerrylogistics","kerryproperties","kfh","kg","kh","ki","kia","kids","kim","kinder","kindle","kitchen","kiwi","km","kn","koeln","komatsu","kosher","kp","kpmg","kpn","kr","krd","kred","kuokgroup","kw","ky","kyoto","kz","la","lacaixa","lamborghini","lamer","lancaster","lancia","land","landrover","lanxess","lasalle","lat","latino","latrobe","law","lawyer","lb","lc","lds","lease","leclerc","lefrak","legal","lego","lexus","lgbt","li","lidl","life","lifeinsurance","lifestyle","lighting","like","lilly","limited","limo","lincoln","link","lipsy","live","living","lk","llc","llp","loan","loans","locker","locus","lol","london","lotte","lotto","love","lpl","lplfinancial","lr","ls","lt","ltd","ltda","lu","lundbeck","luxe","luxury","lv","ly","ma","madrid","maif","maison","makeup","man","management","mango","map","market","marketing","markets","marriott","marshalls","maserati","mattel","mba","mc","mckinsey","md","me","med","media","meet","melbourne","meme","memorial","men","menu","merckmsd","mg","mh","miami","microsoft","mil","mini","mint","mit","mitsubishi","mk","ml","mlb","mls","mm","mma","mn","mo","mobi","mobile","moda","moe","moi","mom","monash","money","monster","mormon","mortgage","moscow","moto","motorcycles","mov","movie","mp","mq","mr","ms","msd","mt","mtn","mtr","mu","museum","music","mutual","mv","mw","mx","my","mz","na","nab","nagoya","name","natura","navy","nba","nc","ne","nec","net","netbank","netflix","network","neustar","new","news","next","nextdirect","nexus","nf","nfl","ng","ngo","nhk","ni","nico","nike","nikon","ninja","nissan","nissay","nl","no","nokia","northwesternmutual","norton","now","nowruz","nowtv","np","nr","nra","nrw","ntt","nu","nyc","nz","obi","observer","office","okinawa","olayan","olayangroup","oldnavy","ollo","om","omega","one","ong","onl","online","ooo","open","oracle","orange","org","organic","origins","osaka","otsuka","ott","ovh","pa","page","panasonic","paris","pars","partners","parts","party","passagens","pay","pccw","pe","pet","pf","pfizer","pg","ph","pharmacy","phd","philips","phone","photo","photography","photos","physio","pics","pictet","pictures","pid","pin","ping","pink","pioneer","pizza","pk","pl","place","play","playstation","plumbing","plus","pm","pn","pnc","pohl","poker","politie","porn","post","pr","pramerica","praxi","press","prime","pro","prod","productions","prof","progressive","promo","properties","property","protection","pru","prudential","ps","pt","pub","pw","pwc","py","qa","qpon","quebec","quest","racing","radio","re","read","realestate","realtor","realty","recipes","red","redstone","redumbrella","rehab","reise","reisen","reit","reliance","ren","rent","rentals","repair","report","republican","rest","restaurant","review","reviews","rexroth","rich","richardli","ricoh","ril","rio","rip","ro","rocher","rocks","rodeo","rogers","room","rs","rsvp","ru","rugby","ruhr","run","rw","rwe","ryukyu","sa","saarland","safe","safety","sakura","sale","salon","samsclub","samsung","sandvik","sandvikcoromant","sanofi","sap","sarl","sas","save","saxo","sb","sbi","sbs","sc","sca","scb","schaeffler","schmidt","scholarships","school","schule","schwarz","science","scot","sd","se","search","seat","secure","security","seek","select","sener","services","seven","sew","sex","sexy","sfr","sg","sh","shangrila","sharp","shaw","shell","shia","shiksha","shoes","shop","shopping","shouji","show","showtime","si","silk","sina","singles","site","sj","sk","ski","skin","sky","skype","sl","sling","sm","smart","smile","sn","sncf","so","soccer","social","softbank","software","sohu","solar","solutions","song","sony","soy","spa","space","sport","spot","sr","srl","ss","st","stada","staples","star","statebank","statefarm","stc","stcgroup","stockholm","storage","store","stream","studio","study","style","su","sucks","supplies","supply","support","surf","surgery","suzuki","sv","swatch","swiss","sx","sy","sydney","systems","sz","tab","taipei","talk","taobao","target","tatamotors","tatar","tattoo","tax","taxi","tc","tci","td","tdk","team","tech","technology","tel","temasek","tennis","teva","tf","tg","th","thd","theater","theatre","tiaa","tickets","tienda","tiffany","tips","tires","tirol","tj","tjmaxx","tjx","tk","tkmaxx","tl","tm","tmall","tn","to","today","tokyo","tools","top","toray","toshiba","total","tours","town","toyota","toys","tr","trade","trading","training","travel","travelchannel","travelers","travelersinsurance","trust","trv","tt","tube","tui","tunes","tushu","tv","tvs","tw","tz","ua","ubank","ubs","ug","uk","unicom","university","uno","uol","ups","us","uy","uz","va","vacations","vana","vanguard","vc","ve","vegas","ventures","verisign","vermgensberater","vermgensberatung","versicherung","vet","vg","vi","viajes","video","vig","viking","villas","vin","vip","virgin","visa","vision","viva","vivo","vlaanderen","vn","vodka","volkswagen","volvo","vote","voting","voto","voyage","vu","vuelos","wales","walmart","walter","wang","wanggou","watch","watches","weather","weatherchannel","webcam","weber","website","wed","wedding","weibo","weir","wf","whoswho","wien","wiki","williamhill","win","windows","wine","winners","wme","wolterskluwer","woodside","work","works","world","wow","ws","wtc","wtf","xbox","xerox","xfinity","xihuan","xin","xxx","xyz","yachts","yahoo","yamaxun","yandex","ye","yodobashi","yoga","yokohama","you","youtube","yt","yun","za","zappos","zara","zero","zip","zm","zone","zuerich","zw","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""];var E;!function(e){e.Prefix="{{",e.Suffix="}}",e.PrefixReplacement="{REDDIT_MACRO_START}",e.SuffixReplacement="{REDDIT_MACRO_END}"}(E||(E={}));const A=e=>e.replaceAll(E.Prefix,E.PrefixReplacement).replaceAll(E.Suffix,E.SuffixReplacement),C=e=>e.replaceAll(E.PrefixReplacement,E.Prefix).replaceAll(E.SuffixReplacement,E.Suffix),j=e=>{const t=C(e.raw);return{...e,lastIndex:e.index+t.length,raw:t,text:C(e.text),url:C(e.url)}},B=(new p).tlds(w).set({fuzzyIP:!0}),Z=(new p).tlds(w).set({fuzzyIP:!0,fuzzyLink:!0});var R;return{a:(R=new p,((e,t)=>(t.forEach((t=>e.add(t,null))),e))(R,v)).set({fuzzyLink:!1,fuzzyEmail:!1}).add(z.mention.prefix,z.mention.config).add(z.subreddit.prefix,z.subreddit.config).add(z.subredditFull.prefix,z.subreddit.config).add(z.profile.prefix,z.profile.config).add(z.profileFull.prefix,z.profile.config),b:e=>{const t=Z.match(A(e));return t&&1===t.length?t[0].text.search(/http/i)>0?null:j(t[0]):null},t:e=>{const t=A(e),i=B.match(t);if(i&&1===i.length&&0===i[0].index){const e=i[0];if(e.lastIndex===t.length)return j(e)}return null}}}));

SML.di("./CYrPuvCiTj.js",import.meta.url,"CYrPuvCiTj");
SML.dm("DU3nojCjEU",["CYrPuvCiTj"],(async e=>{let t=class extends e.s{constructor(){super(...arguments),this.overlayId="",this._registered=!1}static get styles(){return[e.t,e.V(":host {\n  position: relative;\n  z-index: 100;\n}\n")]}async connectedCallback(){super.connectedCallback(),this._registered||(this._registered=!0,await this.updateComplete,this.registerWithOverlayManager())}disconnectedCallback(){super.disconnectedCallback(),this._registered=!1,this.unregisterFromOverlayManager()}registerWithOverlayManager(){this.dispatchEvent(e.d("register-overlay-display",{display:this}))}unregisterFromOverlayManager(){this.dispatchEvent(e.d("unregister-overlay-display",{display:this}))}displayOverlay(e,t){this.overlayId=e,this.overlayProperties=t}renderTemplate(){if(!this.overlayId)return"";const t=this.querySelector(`template[slot=${this.overlayId}]`);return t instanceof HTMLTemplateElement?e.X(t):""}dismissOverlay(){this.overlayId=""}render(){return this.renderTemplate()||""}};e._([e.n({type:String,attribute:"overlay-id"})],t.prototype,"overlayId",void 0),e._([e.n({type:Object})],t.prototype,"overlayProperties",void 0),t=e._([e.e("shreddit-overlay-display")],t)}));
SML.di("./JaGlTj3I-9.js",import.meta.url,"JaGlTj3I-9");SML.di("./DCbB57ubLb.js",import.meta.url,"DCbB57ubLb");SML.di("./wzdls1o9Kk.js",import.meta.url,"wzdls1o9Kk");SML.di("./CYrPuvCiTj.js",import.meta.url,"CYrPuvCiTj");SML.di("./lEw4CeTWZd.js",import.meta.url,"lEw4CeTWZd");SML.di("./Cv3__sHJQf.js",import.meta.url,"Cv3__sHJQf");SML.di("./Q1SsBT7kMe.js",import.meta.url,"Q1SsBT7kMe");SML.di("./jzmnNb68mH.js",import.meta.url,"jzmnNb68mH");SML.di("./Cszz6xIhIJ.js",import.meta.url,"Cszz6xIhIJ");SML.di("./COfLy9zygd.js",import.meta.url,"COfLy9zygd");SML.di("./hgVDyxZ2rL.js",import.meta.url,"hgVDyxZ2rL");SML.di("./DS9WepT8W8.js",import.meta.url,"DS9WepT8W8");SML.di("./BaesuPO9Of.js",import.meta.url,"BaesuPO9Of");SML.di("./Bq3qdqopCU.js",import.meta.url,"Bq3qdqopCU");SML.di("./DyzvzwR0Ee.js",import.meta.url,"DyzvzwR0Ee");SML.di("./pihWhdUG1Q.js",import.meta.url,"pihWhdUG1Q");SML.di("./CZtlI9NlXS.js",import.meta.url,"CZtlI9NlXS");SML.di("./DuqlmJMEve.js",import.meta.url,"DuqlmJMEve");
SML.dm("DVVJsZH047",["JaGlTj3I-9","DCbB57ubLb","wzdls1o9Kk","CYrPuvCiTj","lEw4CeTWZd","Cv3__sHJQf","Q1SsBT7kMe","COfLy9zygd","BaesuPO9Of","Bq3qdqopCU","DyzvzwR0Ee","pihWhdUG1Q","jzmnNb68mH","Cszz6xIhIJ","hgVDyxZ2rL","DS9WepT8W8","CZtlI9NlXS","DuqlmJMEve"],(async(e,t,i,a,n,r,o,s,l,d,u,c)=>{const m="history-merge";var p;function h(e){if(e instanceof HTMLImageElement){return{node:N({src:e.getAttribute("src")??"",mediaId:e.dataset.mediaId??"",mimetype:e.dataset.mimetype??""})}}return null}!function(e){e.Small="small",e.Large="large"}(p||(p={}));class g extends t.j{static getType(){return"emote"}static getTheme(e=!1){return ["emote","align-text-bottom","[font-size:var(--emote-size)]","[color:transparent]","[caret-color:var(--color-tone-1)]","leading-[--emote-line-height]","before:absolute",...(e ? ["before:bg-[size:--emote-size]","before:w-[--emote-size]","before:h-[--emote-size]"] : ["before:origin-top-left","before:scale-[--emote-scale]"]),"selection:text-transparent"].join(" ");}static mediaIdToCssClass(e){return`rte-${e.replace(g.mediaIdReplaceRE,"-")}`}static isEmoji(e){return!!e.match(g.emojiMediaIdRE)}static addEmoteUrl(e,t){this._styles||(this._styles=new CSSStyleSheet),this._emoteUrls.set(e,t);const i=g.isEmoji(e),a=Array.from(this._emoteUrls.entries()).map((([e,t])=>i?`.${this.mediaIdToCssClass(e)}::before { background-image: url(${t}); content: ""; }`:`.${this.mediaIdToCssClass(e)}::before { content: url(${t}); }`)).join("\n");this._styles.replaceSync(a),document.adoptedStyleSheets=[...document.adoptedStyleSheets,this._styles]}constructor({src:e,mediaId:t,mimetype:i},a){super("",a),this.__src=e,this.__mediaId=t,this.__mimetype=i}get src(){return this.__src}get mediaId(){return this.__mediaId}get mimetype(){return this.__mimetype}createDOM(){const e=super.createDOM({theme:{}});return e.classList.add(...g.getTheme(g.isEmoji(this.mediaId)).split(" ")),e.classList.add(g.mediaIdToCssClass(this.__mediaId)),g.addEmoteUrl(this.__mediaId,this.__src),e}updateDOM(){return!1}static importDOM(){return{img:e=>e instanceof HTMLImageElement&&e.dataset.mediaId?.startsWith(i.cK)?{conversion:h,priority:1}:null}}static importJSON(e){return N({src:e.src,mediaId:e.mediaId,mimetype:e.mimetype})}exportDOM(){const e=document.createElement("img");return e.setAttribute("src",this.__src),e.setAttribute("data-media-id",this.__mediaId),e.setAttribute("data-mimetype",this.__mimetype),{element:e}}exportJSON(){return{...super.exportJSON(),type:"emote",src:this.__src,mediaId:this.__mediaId,mimetype:this.__mimetype,version:1}}static clone(e){const{__src:t,__mediaId:i,__mimetype:a,__key:n}=e;return new g({src:t,mediaId:i,mimetype:a},n)}}function N({src:e,mediaId:i,mimetype:a}){const n=new g({src:e,mediaId:i,mimetype:a}).setMode("token").toggleUnmergeable();return t.aQ(n)}g._emoteUrls=new Map,g.mediaIdReplaceRE=/[|:]/g,g.emojiMediaIdRE=/^:[\w-]+:$/;const I={},k={},f={},b=new WeakMap;function v(e,t){const i=t.split(".");let a=function(e){return b.get(e)}(e);if(!a)throw new Error("No config found for the given Editor instance.");for(const e of i){if(!a||!(e in a))return;a=a[e]}return a}var T="top",R="bottom",E="right",L="left",y="auto",O=[T,R,E,L],S="start",P="end",_="viewport",x="popper",D=O.reduce((function(e,t){return e.concat([t+"-"+S,t+"-"+P])}),[]),U=[].concat(O,[y]).reduce((function(e,t){return e.concat([t,t+"-"+S,t+"-"+P])}),[]),A=["beforeRead","read","afterRead","beforeMain","main","afterMain","beforeWrite","write","afterWrite"];function C(e){return e?(e.nodeName||"").toLowerCase():null}function z(e){if(null==e)return window;if("[object Window]"!==e.toString()){var t=e.ownerDocument;return t&&t.defaultView||window}return e}function H(e){return e instanceof z(e).Element||e instanceof Element}function j(e){return e instanceof z(e).HTMLElement||e instanceof HTMLElement}function w(e){return"undefined"!=typeof ShadowRoot&&(e instanceof z(e).ShadowRoot||e instanceof ShadowRoot)}var $={name:"applyStyles",enabled:!0,phase:"write",fn:function(e){var t=e.state;Object.keys(t.elements).forEach((function(e){var i=t.styles[e]||{},a=t.attributes[e]||{},n=t.elements[e];j(n)&&C(n)&&(Object.assign(n.style,i),Object.keys(a).forEach((function(e){var t=a[e];!1===t?n.removeAttribute(e):n.setAttribute(e,!0===t?"":t)})))}))},effect:function(e){var t=e.state,i={popper:{position:t.options.strategy,left:"0",top:"0",margin:"0"},arrow:{position:"absolute"},reference:{}};return Object.assign(t.elements.popper.style,i.popper),t.styles=i,t.elements.arrow&&Object.assign(t.elements.arrow.style,i.arrow),function(){Object.keys(t.elements).forEach((function(e){var a=t.elements[e],n=t.attributes[e]||{},r=Object.keys(t.styles.hasOwnProperty(e)?t.styles[e]:i[e]).reduce((function(e,t){return e[t]="",e}),{});j(a)&&C(a)&&(Object.assign(a.style,r),Object.keys(n).forEach((function(e){a.removeAttribute(e)})))}))}},requires:["computeStyles"]};function M(e){return e.split("-")[0]}var F=Math.max,G=Math.min,K=Math.round;function B(){var e=navigator.userAgentData;return null!=e&&e.brands&&Array.isArray(e.brands)?e.brands.map((function(e){return e.brand+"/"+e.version})).join(" "):navigator.userAgent}function V(){return !/^((?!chrome|android).)*safari/i.test(B());}function Z(e,t,i){void 0===t&&(t=!1),void 0===i&&(i=!1);var a=e.getBoundingClientRect(),n=1,r=1;t&&j(e)&&(n=e.offsetWidth>0&&K(a.width)/e.offsetWidth||1,r=e.offsetHeight>0&&K(a.height)/e.offsetHeight||1);var o=(H(e)?z(e):window).visualViewport,s=!V()&&i,l=(a.left+(s&&o?o.offsetLeft:0))/n,d=(a.top+(s&&o?o.offsetTop:0))/r,u=a.width/n,c=a.height/r;return{width:u,height:c,top:d,right:l+u,bottom:d+c,left:l,x:l,y:d}}function Y(e){var t=Z(e),i=e.offsetWidth,a=e.offsetHeight;return Math.abs(t.width-i)<=1&&(i=t.width),Math.abs(t.height-a)<=1&&(a=t.height),{x:e.offsetLeft,y:e.offsetTop,width:i,height:a}}function W(e,t){var i=t.getRootNode&&t.getRootNode();if(e.contains(t))return!0;if(i&&w(i)){var a=t;do{if(a&&e.isSameNode(a))return!0;a=a.parentNode||a.host}while(a)}return!1}function J(e){return z(e).getComputedStyle(e)}function X(e){return["table","td","th"].indexOf(C(e))>=0}function q(e){return((H(e)?e.ownerDocument:e.document)||window.document).documentElement}function Q(e){return"html"===C(e)?e:e.assignedSlot||e.parentNode||(w(e)?e.host:null)||q(e)}function ee(e){return j(e)&&"fixed"!==J(e).position?e.offsetParent:null}function te(e){for(var t=z(e),i=ee(e);i&&X(i)&&"static"===J(i).position;)i=ee(i);return i&&("html"===C(i)||"body"===C(i)&&"static"===J(i).position)?t:i||function(e){var t=/firefox/i.test(B());if(/Trident/i.test(B())&&j(e)&&"fixed"===J(e).position)return null;var i=Q(e);for(w(i)&&(i=i.host);j(i)&&["html","body"].indexOf(C(i))<0;){var a=J(i);if("none"!==a.transform||"none"!==a.perspective||"paint"===a.contain||-1!==["transform","perspective"].indexOf(a.willChange)||t&&"filter"===a.willChange||t&&a.filter&&"none"!==a.filter)return i;i=i.parentNode}return null}(e)||t;}function ie(e){return["top","bottom"].indexOf(e)>=0?"x":"y"}function ae(e,t,i){return F(e,G(t,i))}function ne(e){return Object.assign({},{top:0,right:0,bottom:0,left:0},e)}function re(e,t){return t.reduce((function(t,i){return t[i]=e,t}),{})}var oe={name:"arrow",enabled:!0,phase:"main",fn:function(e){var t,i=e.state,a=e.name,n=e.options,r=i.elements.arrow,o=i.modifiersData.popperOffsets,s=M(i.placement),l=ie(s),d=[L,E].indexOf(s)>=0?"height":"width";if(r&&o){var u=function(e,t){return ne("number"!=typeof(e="function"==typeof e?e(Object.assign({},t.rects,{placement:t.placement})):e)?e:re(e,O))}(n.padding,i),c=Y(r),m="y"===l?T:L,p="y"===l?R:E,h=i.rects.reference[d]+i.rects.reference[l]-o[l]-i.rects.popper[d],g=o[l]-i.rects.reference[l],N=te(r),I=N?"y"===l?N.clientHeight||0:N.clientWidth||0:0,k=h/2-g/2,f=u[m],b=I-c[d]-u[p],v=I/2-c[d]/2+k,y=ae(f,v,b),S=l;i.modifiersData[a]=((t={})[S]=y,t.centerOffset=y-v,t)}},effect:function(e){var t=e.state,i=e.options.element,a=void 0===i?"[data-popper-arrow]":i;null!=a&&("string"!=typeof a||(a=t.elements.popper.querySelector(a)))&&W(t.elements.popper,a)&&(t.elements.arrow=a)},requires:["popperOffsets"],requiresIfExists:["preventOverflow"]};function se(e){return e.split("-")[1]}var le={top:"auto",right:"auto",bottom:"auto",left:"auto"};function de(e){var t,i=e.popper,a=e.popperRect,n=e.placement,r=e.variation,o=e.offsets,s=e.position,l=e.gpuAcceleration,d=e.adaptive,u=e.roundOffsets,c=e.isFixed,m=o.x,p=void 0===m?0:m,h=o.y,g=void 0===h?0:h,N="function"==typeof u?u({x:p,y:g}):{x:p,y:g};p=N.x,g=N.y;var I=o.hasOwnProperty("x"),k=o.hasOwnProperty("y"),f=L,b=T,v=window;if(d){var y=te(i),O="clientHeight",S="clientWidth";if(y===z(i)&&"static"!==J(y=q(i)).position&&"absolute"===s&&(O="scrollHeight",S="scrollWidth"),n===T||(n===L||n===E)&&r===P)b=R,g-=(c&&y===v&&v.visualViewport?v.visualViewport.height:y[O])-a.height,g*=l?1:-1;if(n===L||(n===T||n===R)&&r===P)f=E,p-=(c&&y===v&&v.visualViewport?v.visualViewport.width:y[S])-a.width,p*=l?1:-1}var _,x=Object.assign({position:s},d&&le),D=!0===u?function(e,t){var i=e.x,a=e.y,n=t.devicePixelRatio||1;return{x:K(i*n)/n||0,y:K(a*n)/n||0}}({x:p,y:g},z(i)):{x:p,y:g};return p=D.x,g=D.y,l?Object.assign({},x,((_={})[b]=k?"0":"",_[f]=I?"0":"",_.transform=(v.devicePixelRatio||1)<=1?"translate("+p+"px, "+g+"px)":"translate3d("+p+"px, "+g+"px, 0)",_)):Object.assign({},x,((t={})[b]=k?g+"px":"",t[f]=I?p+"px":"",t.transform="",t))}var ue={passive:!0};var ce={left:"right",right:"left",bottom:"top",top:"bottom"};function me(e){return e.replace(/left|right|bottom|top/g,(function(e){return ce[e]}));}var pe={start:"end",end:"start"};function he(e){return e.replace(/start|end/g,(function(e){return pe[e]}));}function ge(e){var t=z(e);return{scrollLeft:t.pageXOffset,scrollTop:t.pageYOffset}}function Ne(e){return Z(q(e)).left+ge(e).scrollLeft}function Ie(e){var t=J(e),i=t.overflow,a=t.overflowX,n=t.overflowY;return /auto|scroll|overlay|hidden/.test(i+n+a);}function ke(e){return["html","body","#document"].indexOf(C(e))>=0?e.ownerDocument.body:j(e)&&Ie(e)?e:ke(Q(e))}function fe(e,t){var i;void 0===t&&(t=[]);var a=ke(e),n=a===(null==(i=e.ownerDocument)?void 0:i.body),r=z(a),o=n?[r].concat(r.visualViewport||[],Ie(a)?a:[]):a,s=t.concat(o);return n?s:s.concat(fe(Q(o)))}function be(e){return Object.assign({},e,{left:e.x,top:e.y,right:e.x+e.width,bottom:e.y+e.height})}function ve(e,t,i){return t===_?be(function(e,t){var i=z(e),a=q(e),n=i.visualViewport,r=a.clientWidth,o=a.clientHeight,s=0,l=0;if(n){r=n.width,o=n.height;var d=V();(d||!d&&"fixed"===t)&&(s=n.offsetLeft,l=n.offsetTop)}return{width:r,height:o,x:s+Ne(e),y:l}}(e,i)):H(t)?function(e,t){var i=Z(e,!1,"fixed"===t);return i.top=i.top+e.clientTop,i.left=i.left+e.clientLeft,i.bottom=i.top+e.clientHeight,i.right=i.left+e.clientWidth,i.width=e.clientWidth,i.height=e.clientHeight,i.x=i.left,i.y=i.top,i}(t,i):be(function(e){var t,i=q(e),a=ge(e),n=null==(t=e.ownerDocument)?void 0:t.body,r=F(i.scrollWidth,i.clientWidth,n?n.scrollWidth:0,n?n.clientWidth:0),o=F(i.scrollHeight,i.clientHeight,n?n.scrollHeight:0,n?n.clientHeight:0),s=-a.scrollLeft+Ne(e),l=-a.scrollTop;return"rtl"===J(n||i).direction&&(s+=F(i.clientWidth,n?n.clientWidth:0)-r),{width:r,height:o,x:s,y:l}}(q(e)))}function Te(e,t,i,a){var n="clippingParents"===t?function(e){var t=fe(Q(e)),i=["absolute","fixed"].indexOf(J(e).position)>=0&&j(e)?te(e):e;return H(i)?t.filter((function(e){return H(e)&&W(e,i)&&"body"!==C(e)})):[]}(e):[].concat(t),r=[].concat(n,[i]),o=r[0],s=r.reduce((function(t,i){var n=ve(e,i,a);return t.top=F(n.top,t.top),t.right=G(n.right,t.right),t.bottom=G(n.bottom,t.bottom),t.left=F(n.left,t.left),t}),ve(e,o,a));return s.width=s.right-s.left,s.height=s.bottom-s.top,s.x=s.left,s.y=s.top,s}function Re(e){var t,i=e.reference,a=e.element,n=e.placement,r=n?M(n):null,o=n?se(n):null,s=i.x+i.width/2-a.width/2,l=i.y+i.height/2-a.height/2;switch(r){case T:t={x:s,y:i.y-a.height};break;case R:t={x:s,y:i.y+i.height};break;case E:t={x:i.x+i.width,y:l};break;case L:t={x:i.x-a.width,y:l};break;default:t={x:i.x,y:i.y}}var d=r?ie(r):null;if(null!=d){var u="y"===d?"height":"width";switch(o){case S:t[d]=t[d]-(i[u]/2-a[u]/2);break;case P:t[d]=t[d]+(i[u]/2-a[u]/2)}}return t}function Ee(e,t){void 0===t&&(t={});var i=t,a=i.placement,n=void 0===a?e.placement:a,r=i.strategy,o=void 0===r?e.strategy:r,s=i.boundary,l=void 0===s?"clippingParents":s,d=i.rootBoundary,u=void 0===d?_:d,c=i.elementContext,m=void 0===c?x:c,p=i.altBoundary,h=void 0!==p&&p,g=i.padding,N=void 0===g?0:g,I=ne("number"!=typeof N?N:re(N,O)),k=m===x?"reference":x,f=e.rects.popper,b=e.elements[h?k:m],v=Te(H(b)?b:b.contextElement||q(e.elements.popper),l,u,o),L=Z(e.elements.reference),y=Re({reference:L,element:f,strategy:"absolute",placement:n}),S=be(Object.assign({},f,y)),P=m===x?S:L,D={top:v.top-P.top+I.top,bottom:P.bottom-v.bottom+I.bottom,left:v.left-P.left+I.left,right:P.right-v.right+I.right},U=e.modifiersData.offset;if(m===x&&U){var A=U[n];Object.keys(D).forEach((function(e){var t=[E,R].indexOf(e)>=0?1:-1,i=[T,R].indexOf(e)>=0?"y":"x";D[e]+=A[i]*t}))}return D}function Le(e,t){void 0===t&&(t={});var i=t,a=i.placement,n=i.boundary,r=i.rootBoundary,o=i.padding,s=i.flipVariations,l=i.allowedAutoPlacements,d=void 0===l?U:l,u=se(a),c=u?s?D:D.filter((function(e){return se(e)===u})):O,m=c.filter((function(e){return d.indexOf(e)>=0}));0===m.length&&(m=c);var p=m.reduce((function(t,i){return t[i]=Ee(e,{placement:i,boundary:n,rootBoundary:r,padding:o})[M(i)],t}),{});return Object.keys(p).sort((function(e,t){return p[e]-p[t]}))}var ye={name:"flip",enabled:!0,phase:"main",fn:function(e){var t=e.state,i=e.options,a=e.name;if(!t.modifiersData[a]._skip){for(var n=i.mainAxis,r=void 0===n||n,o=i.altAxis,s=void 0===o||o,l=i.fallbackPlacements,d=i.padding,u=i.boundary,c=i.rootBoundary,m=i.altBoundary,p=i.flipVariations,h=void 0===p||p,g=i.allowedAutoPlacements,N=t.options.placement,I=M(N),k=l||(I===N||!h?[me(N)]:function(e){if(M(e)===y)return[];var t=me(e);return[he(e),t,he(t)]}(N)),f=[N].concat(k).reduce((function(e,i){return e.concat(M(i)===y?Le(t,{placement:i,boundary:u,rootBoundary:c,padding:d,flipVariations:h,allowedAutoPlacements:g}):i)}),[]),b=t.rects.reference,v=t.rects.popper,O=new Map,P=!0,_=f[0],x=0;x<f.length;x++){var D=f[x],U=M(D),A=se(D)===S,C=[T,R].indexOf(U)>=0,z=C?"width":"height",H=Ee(t,{placement:D,boundary:u,rootBoundary:c,altBoundary:m,padding:d}),j=C?A?E:L:A?R:T;b[z]>v[z]&&(j=me(j));var w=me(j),$=[];if(r&&$.push(H[U]<=0),s&&$.push(H[j]<=0,H[w]<=0),$.every((function(e){return e}))){_=D,P=!1;break}O.set(D,$)}if(P)for(var F=function(e){var t=f.find((function(t){var i=O.get(t);if(i)return i.slice(0,e).every((function(e){return e}))}));if(t)return _=t,"break"},G=h?3:1;G>0;G--){if("break"===F(G))break}t.placement!==_&&(t.modifiersData[a]._skip=!0,t.placement=_,t.reset=!0)}},requiresIfExists:["offset"],data:{_skip:!1}};function Oe(e,t,i){return void 0===i&&(i={x:0,y:0}),{top:e.top-t.height-i.y,right:e.right-t.width+i.x,bottom:e.bottom-t.height+i.y,left:e.left-t.width-i.x}}function Se(e){return[T,E,R,L].some((function(t){return e[t]>=0}))}var Pe={name:"offset",enabled:!0,phase:"main",requires:["popperOffsets"],fn:function(e){var t=e.state,i=e.options,a=e.name,n=i.offset,r=void 0===n?[0,0]:n,o=U.reduce((function(e,i){return e[i]=function(e,t,i){var a=M(e),n=[L,T].indexOf(a)>=0?-1:1,r="function"==typeof i?i(Object.assign({},t,{placement:e})):i,o=r[0],s=r[1];return o=o||0,s=(s||0)*n,[L,E].indexOf(a)>=0?{x:s,y:o}:{x:o,y:s}}(i,t.rects,r),e}),{}),s=o[t.placement],l=s.x,d=s.y;null!=t.modifiersData.popperOffsets&&(t.modifiersData.popperOffsets.x+=l,t.modifiersData.popperOffsets.y+=d),t.modifiersData[a]=o}};var _e={name:"preventOverflow",enabled:!0,phase:"main",fn:function(e){var t=e.state,i=e.options,a=e.name,n=i.mainAxis,r=void 0===n||n,o=i.altAxis,s=void 0!==o&&o,l=i.boundary,d=i.rootBoundary,u=i.altBoundary,c=i.padding,m=i.tether,p=void 0===m||m,h=i.tetherOffset,g=void 0===h?0:h,N=Ee(t,{boundary:l,rootBoundary:d,padding:c,altBoundary:u}),I=M(t.placement),k=se(t.placement),f=!k,b=ie(I),v="x"===b?"y":"x",y=t.modifiersData.popperOffsets,O=t.rects.reference,P=t.rects.popper,_="function"==typeof g?g(Object.assign({},t.rects,{placement:t.placement})):g,x="number"==typeof _?{mainAxis:_,altAxis:_}:Object.assign({mainAxis:0,altAxis:0},_),D=t.modifiersData.offset?t.modifiersData.offset[t.placement]:null,U={x:0,y:0};if(y){if(r){var A,C="y"===b?T:L,z="y"===b?R:E,H="y"===b?"height":"width",j=y[b],w=j+N[C],$=j-N[z],K=p?-P[H]/2:0,B=k===S?O[H]:P[H],V=k===S?-P[H]:-O[H],Z=t.elements.arrow,W=p&&Z?Y(Z):{width:0,height:0},J=t.modifiersData["arrow#persistent"]?t.modifiersData["arrow#persistent"].padding:{top:0,right:0,bottom:0,left:0},X=J[C],q=J[z],Q=ae(0,O[H],W[H]),ee=f?O[H]/2-K-Q-X-x.mainAxis:B-Q-X-x.mainAxis,ne=f?-O[H]/2+K+Q+q+x.mainAxis:V+Q+q+x.mainAxis,re=t.elements.arrow&&te(t.elements.arrow),oe=re?"y"===b?re.clientTop||0:re.clientLeft||0:0,le=null!=(A=null==D?void 0:D[b])?A:0,de=j+ne-le,ue=ae(p?G(w,j+ee-le-oe):w,j,p?F($,de):$);y[b]=ue,U[b]=ue-j}if(s){var ce,me="x"===b?T:L,pe="x"===b?R:E,he=y[v],ge="y"===v?"height":"width",Ne=he+N[me],Ie=he-N[pe],ke=-1!==[T,L].indexOf(I),fe=null!=(ce=null==D?void 0:D[v])?ce:0,be=ke?Ne:he-O[ge]-P[ge]-fe+x.altAxis,ve=ke?he+O[ge]+P[ge]-fe-x.altAxis:Ie,Te=p&&ke?function(e,t,i){var a=ae(e,t,i);return a>i?i:a}(be,he,ve):ae(p?be:Ne,he,p?ve:Ie);y[v]=Te,U[v]=Te-he}t.modifiersData[a]=U}},requiresIfExists:["offset"]};function xe(e,t,i){void 0===i&&(i=!1);var a,n,r=j(t),o=j(t)&&function(e){var t=e.getBoundingClientRect(),i=K(t.width)/e.offsetWidth||1,a=K(t.height)/e.offsetHeight||1;return 1!==i||1!==a}(t),s=q(t),l=Z(e,o,i),d={scrollLeft:0,scrollTop:0},u={x:0,y:0};return(r||!r&&!i)&&(("body"!==C(t)||Ie(s))&&(d=(a=t)!==z(a)&&j(a)?{scrollLeft:(n=a).scrollLeft,scrollTop:n.scrollTop}:ge(a)),j(t)?((u=Z(t,!0)).x+=t.clientLeft,u.y+=t.clientTop):s&&(u.x=Ne(s))),{x:l.left+d.scrollLeft-u.x,y:l.top+d.scrollTop-u.y,width:l.width,height:l.height}}function De(e){var t=new Map,i=new Set,a=[];function n(e){i.add(e.name),[].concat(e.requires||[],e.requiresIfExists||[]).forEach((function(e){if(!i.has(e)){var a=t.get(e);a&&n(a)}})),a.push(e)}return e.forEach((function(e){t.set(e.name,e)})),e.forEach((function(e){i.has(e.name)||n(e)})),a}var Ue={placement:"bottom",modifiers:[],strategy:"absolute"};function Ae(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];return!t.some((function(e){return!(e&&"function"==typeof e.getBoundingClientRect)}))}function Ce(e){void 0===e&&(e={});var t=e,i=t.defaultModifiers,a=void 0===i?[]:i,n=t.defaultOptions,r=void 0===n?Ue:n;return function(e,t,i){void 0===i&&(i=r);var n,o,s={placement:"bottom",orderedModifiers:[],options:Object.assign({},Ue,r),modifiersData:{},elements:{reference:e,popper:t},attributes:{},styles:{}},l=[],d=!1,u={state:s,setOptions:function(i){var n="function"==typeof i?i(s.options):i;c(),s.options=Object.assign({},r,s.options,n),s.scrollParents={reference:H(e)?fe(e):e.contextElement?fe(e.contextElement):[],popper:fe(t)};var o,d,m=function(e){var t=De(e);return A.reduce((function(e,i){return e.concat(t.filter((function(e){return e.phase===i})))}),[])}((o=[].concat(a,s.options.modifiers),d=o.reduce((function(e,t){var i=e[t.name];return e[t.name]=i?Object.assign({},i,t,{options:Object.assign({},i.options,t.options),data:Object.assign({},i.data,t.data)}):t,e}),{}),Object.keys(d).map((function(e){return d[e]}))));return s.orderedModifiers=m.filter((function(e){return e.enabled})),s.orderedModifiers.forEach((function(e){var t=e.name,i=e.options,a=void 0===i?{}:i,n=e.effect;if("function"==typeof n){var r=n({state:s,name:t,instance:u,options:a}),o=function(){};l.push(r||o)}})),u.update()},forceUpdate:function(){if(!d){var e=s.elements,t=e.reference,i=e.popper;if(Ae(t,i)){s.rects={reference:xe(t,te(i),"fixed"===s.options.strategy),popper:Y(i)},s.reset=!1,s.placement=s.options.placement,s.orderedModifiers.forEach((function(e){return s.modifiersData[e.name]=Object.assign({},e.data)}));for(var a=0;a<s.orderedModifiers.length;a++)if(!0!==s.reset){var n=s.orderedModifiers[a],r=n.fn,o=n.options,l=void 0===o?{}:o,c=n.name;"function"==typeof r&&(s=r({state:s,options:l,name:c,instance:u})||s)}else s.reset=!1,a=-1}}},update:(n=function(){return new Promise((function(e){u.forceUpdate(),e(s)}))},function(){return o||(o=new Promise((function(e){Promise.resolve().then((function(){o=void 0,e(n())}))}))),o}),destroy:function(){c(),d=!0}};if(!Ae(e,t))return u;function c(){l.forEach((function(e){return e()})),l=[]}return u.setOptions(i).then((function(e){!d&&i.onFirstUpdate&&i.onFirstUpdate(e)})),u}}var ze=Ce({defaultModifiers:[{name:"eventListeners",enabled:!0,phase:"write",fn:function(){},effect:function(e){var t=e.state,i=e.instance,a=e.options,n=a.scroll,r=void 0===n||n,o=a.resize,s=void 0===o||o,l=z(t.elements.popper),d=[].concat(t.scrollParents.reference,t.scrollParents.popper);return r&&d.forEach((function(e){e.addEventListener("scroll",i.update,ue)})),s&&l.addEventListener("resize",i.update,ue),function(){r&&d.forEach((function(e){e.removeEventListener("scroll",i.update,ue)})),s&&l.removeEventListener("resize",i.update,ue)}},data:{}},{name:"popperOffsets",enabled:!0,phase:"read",fn:function(e){var t=e.state,i=e.name;t.modifiersData[i]=Re({reference:t.rects.reference,element:t.rects.popper,strategy:"absolute",placement:t.placement})},data:{}},{name:"computeStyles",enabled:!0,phase:"beforeWrite",fn:function(e){var t=e.state,i=e.options,a=i.gpuAcceleration,n=void 0===a||a,r=i.adaptive,o=void 0===r||r,s=i.roundOffsets,l=void 0===s||s,d={placement:M(t.placement),variation:se(t.placement),popper:t.elements.popper,popperRect:t.rects.popper,gpuAcceleration:n,isFixed:"fixed"===t.options.strategy};null!=t.modifiersData.popperOffsets&&(t.styles.popper=Object.assign({},t.styles.popper,de(Object.assign({},d,{offsets:t.modifiersData.popperOffsets,position:t.options.strategy,adaptive:o,roundOffsets:l})))),null!=t.modifiersData.arrow&&(t.styles.arrow=Object.assign({},t.styles.arrow,de(Object.assign({},d,{offsets:t.modifiersData.arrow,position:"absolute",adaptive:!1,roundOffsets:l})))),t.attributes.popper=Object.assign({},t.attributes.popper,{"data-popper-placement":t.placement})},data:{}},$,Pe,ye,_e,oe,{name:"hide",enabled:!0,phase:"main",requiresIfExists:["preventOverflow"],fn:function(e){var t=e.state,i=e.name,a=t.rects.reference,n=t.rects.popper,r=t.modifiersData.preventOverflow,o=Ee(t,{elementContext:"reference"}),s=Ee(t,{altBoundary:!0}),l=Oe(o,a),d=Oe(s,n,r),u=Se(l),c=Se(d);t.modifiersData[i]={referenceClippingOffsets:l,popperEscapeOffsets:d,isReferenceHidden:u,hasPopperEscaped:c},t.attributes.popper=Object.assign({},t.attributes.popper,{"data-popper-reference-hidden":u,"data-popper-escaped":c})}}]});function He(e,t){return e.getNodes().some((e=>t(e)||e.getParents().some(t)))}function je(e,t,i){const a=t.getType?.(),{validChildren:n}=v(e.getEditor(),`nodes.${a}`)??{};return!!n&&(n.includes(i.getType())||n.includes("*"))}function we(e,i){const a=t.E(),n=e[0];let r=n;const o=(e,i)=>{if(t.aX(e)){const t=e.getPreviousSibling();t?t.insertAfter(i):e.getParent()?.insertBefore(i)}else e?.insertBefore(i)};return e.forEach((e=>{if(e.is(n)){if(t.u(a)){const n=a.focus.getNode();if(a.isCollapsed()&&t.K(n)&&t.g(n)&&0===n.getChildrenSize())n.replace(e);else if(t.w(n)){const t=n.getParent();0!==a.focus.offset&&n.getTextContent()?(a.focus.offset===n.getTextContent().length&&t?.getNextSibling()||!je(i,t,e))&&t?.insertAfter(e):o(t,e)}else if(t.x(n)){const t=n.getFirstChild();o(t,e)}else o(n,e)}e.isAttached()||t.at(e)}else r.insertAfter(e);r=e})),t.g(r)?r.selectEnd():(r.getNextSibling()||r.insertAfter(t.I()),r.selectNext()),r}const $e=e=>{var t;return e.attributes??(e.attributes={}),(t=e.attributes).type??(t.type="button"),a.u(e)};let Me=i.c1({emoji:()=>"Emoji",emojis:()=>"Emojis",gif:()=>"GIF",reload:()=>"Reload",noResults:()=>"No results",searchGiphy:()=>"Search GIPHY",clearInput:()=>"Clear input",poweredByGiphy:()=>"Powered by GIPHY",missingMediaMessage:()=>"Unable to display image. If this issue persists, try removing and reuploading.",richTextEditorImageAlt:()=>"rich text editor image",addImageButton:()=>"Image",addImage:()=>"Add Image",closeImageModal:()=>"Close image modal",postLink:()=>"Post Link",richTextEditorImageDialog:()=>"Rich Text Editor Insert Image Dialog",invalidPostUrl:()=>"Invalid post URL",unableToFetchImageFromPost:()=>"Unable to fetch image",invalidNodePlacementWithinTableErrorMessageVideo:()=>"Unable to insert video inside a table",invalidNodePlacementGenericErrorMessageVideo:()=>"Unable to insert video here",uploadErrorMessageVideo:()=>"Video failed to upload",mediaNotAllowedErrorMessageVideo:()=>"Videos are not allowed",overMediaLimitErrorMessageVideo:e=>a.bZ({one:`Unable to add more than ${e} video`,other:`Unable to add more than ${e} videos`,count:e}),invalidNodePlacementWithinTableErrorMessage:()=>"Unable to insert image inside a table",invalidNodePlacementGenericErrorMessage:()=>"Unable to insert image here",uploadErrorMessage:()=>"Image failed to upload",mediaNotAllowedErrorMessage:()=>"Images are not allowed",overAttachmentLimitErrorMessage:e=>a.bZ({one:`Unable to add more than ${e} attachment`,other:`Unable to add more than ${e} attachments`,count:e}),overMediaLimitErrorMessageImage:e=>a.bZ({one:`Unable to add more than ${e} image`,other:`Unable to add more than ${e} images`,count:e}),unableToReadImageError:()=>"Unable to read the provided image.",invalidUrl:()=>"Invalid URL",editLink:()=>"Edit Link",addLink:()=>"Add Link",closeLinkModal:()=>"Close link modal",closeTableActionsMenu:()=>"Close table actions menu",text:()=>"Text",link:()=>"Link",cancel:()=>"Cancel",save:()=>"Save",addLinkButton:()=>"Link",linkOptions:()=>"Link Options",removeLink:()=>"Remove Link",editLinkWithUrl:e=>`Edit link: ${e}`,removeLinkWithUrl:e=>`Remove link: ${e}`,bulletList:()=>"Bullet List",numberList:()=>"Number List",captionPlaceholder:()=>"Optional: add a short caption for your image or video",addCaptionPlaceholder:()=>"Add a caption",fileSelectorDragAndDrop:()=>"drag and drop,",fileSelectorAddAnImage:()=>"add an image",fileSelectorOr:()=>", or",fileSelectorAddAVideo:()=>"add a video",unableToUpload:()=>"Unable to upload",remove:()=>"Remove",retry:()=>"Retry",bold:()=>"Bold",italic:()=>"Italic",strikethrough:()=>"Strikethrough",superscript:()=>"Superscript",tableActionsMenu:()=>"Table actions menu",removeHeaderRowStyle:()=>"Remove header row style",makeHeaderRow:()=>"Make header row",insertRowAbove:()=>"Insert row above",insertRowBelow:()=>"Insert row below",deleteRow:()=>"Delete row",insertColumnBefore:()=>"Insert column before",insertColumnAfter:()=>"Insert column after",deleteColumn:()=>"Delete column",alignLeft:()=>"Align left",alignCenter:()=>"Align center",alignRight:()=>"Align right",deleteTable:()=>"Delete table",table:()=>"Table",video:()=>"Video",unableToReadVideoError:()=>"Unable to read the provided video.",unableToDisplayVideoError:()=>"Unable to display video. If this issue persists, try removing and reuploading.",richTextEditorVideoAlt:()=>"rich text editor video",thereAreSomeErrors:()=>"There are some errors",hideFormattingOptions:()=>"Hide formatting options",showFormattingOptions:()=>"Show formatting options",textFormattingToolbar:()=>"text formatting toolbar",richTextEditorLinkActionsDialog:()=>"Rich Text Editor Link Actions Dialog",richTextEditorLinkDialog:()=>"Rich Text Editor Link Add/Edit Dialog",headingLevelNormalText:()=>"Normal text",headingLevel:e=>`Heading ${e}`,commentPreviewFailedToLoad:()=>"Failed to load preview",commentPreviewCommentDeleted:()=>"Comment deleted",richTextEditorEmbedDialog:()=>"Rich Text Editor Insert Embed Dialog",embed:()=>"Embed",insertComment:()=>"Insert Comment",closeEmbedModal:()=>"Close embed modal",commentLink:()=>"Comment Link",invalidCommentUrl:()=>"Invalid comment URL"}),Fe=class extends a.s{constructor(e){super(),this.shown=!1,this.editor=e}static get styles(){return[a.t]}connectedCallback(){super.connectedCallback(),this.classList.add("z-[1001]")}isShown(){return this.shown}show(e){this.shown=!0,this.link=e}hide(){this.shown=!1}onRemove(e){if(e.preventDefault(),this.editor){const e={currentSelection:this.link?.currentSelection};this.editor.dispatchCommand(f,e)}this.hide()}onEdit(e){e.preventDefault(),this.editor?.dispatchCommand(I,this.link),this.hide()}setEditor(e){this.editor=e}render(){return a.x`<article role="dialog" class="rte-tooltip bg-neutral-background w-fit p-sm flex flex-none flex-nowrap flex-row justify-start items-center box-border rounded-4 shadow-md z-10 absolute start-0 top-0 ${this.shown?"":"hidden"}" aria-labelledby="rte-tooltip-title"> <p class="sr-only" id="rte-tooltip-title">${Me.linkOptions()}</p> <a href="${this.link?.url}" style="max-width:302px" target="_blank" class="truncate inline-block me-sm"> ${this.link?.url} </a> <div class="me-sm"> ${$e({attributes:{onclick:this.onEdit},shape:"pill",appearance:"plain",size:a.v.Small,leadingIcon:l.e({size:a.I.Small}),screenReaderContent:Me.editLinkWithUrl(this.link?.url??"")})} </div> ${$e({attributes:{onclick:this.onRemove,"data-testid":"remove-link-button"},shape:"pill",appearance:"plain",size:a.v.Small,leadingIcon:o.d({size:a.I.Small}),screenReaderContent:Me.removeLinkWithUrl(this.link?.url??"")})} </article>`}};a._([a.j()],Fe.prototype,"shown",void 0),a._([a.j()],Fe.prototype,"link",void 0),Fe=a._([a.e("rte-link-tooltip")],Fe);const Ge=new Map,Ke=new Map;function Be(e){const{popper:t,tooltip:i}=Ge.get(e)??{};t?.destroy(),i?.remove(),Ke.get(e)?.forEach((e=>e()))}function Ve({forceToHide:e,editor:i,node:a}){const{tooltip:n,popper:r}=Ge.get(a.getKey())??{};n&&i?.getEditorState().read((()=>{const i=t.E(),o=function(e,i){if(!e)return!1;if(!t.u(i))return!1;if(i.anchor.key!==i.focus.key)return!1;return He(i,(t=>t.getKey()===e.getKey()))}(a,i);!e&&o?(n.show({text:a.getTextContent(),url:a.getURL(),nodeKey:a.getKey(),currentSelection:t.u(i)?i:void 0}),r?.update()):n.hide()}))}function Ze(e,t,i){if(t&&!Ge.has(i.getKey())){const a=new Fe(t),n=ze(e,a);Ge.set(i.getKey(),{popper:n,tooltip:a}),Ye(t,i,a)}else if(Ge.has(i.getKey())){const a=Ge.get(i.getKey());a.popper=ze(e,a.tooltip),Ye(t,i,a.tooltip)}return e}function Ye(e,i,a){const n=[];n.push(e.registerUpdateListener((()=>Ve({editor:e,node:i})))),n.push(e.registerCommand(t.aY,(()=>!!a.isShown()&&(Ve({editor:e,forceToHide:!0,node:i}),!0)),t.ar));const r=e.getRootElement()?.parentElement,o=()=>{setTimeout((()=>{Ve({editor:e,node:i,forceToHide:!0})}),100)};r?.addEventListener("blur",o),n.push((()=>r?.removeEventListener("blur",o))),r?.addEventListener("change",o),n.push((()=>r?.removeEventListener("change",o))),Ke.set(i.getKey(),n);const s=e.getRootElement()?.assignedSlot?.getRootNode();s.append(a)}class We extends t.A{static getType(){return"reddit-autolink"}static clone(e){return new We(e.getURL(),{rel:e.getRel(),target:e.getTarget(),title:e.getTitle(),isUnlinked:e.getIsUnlinked()},e.getKey())}static importJSON(e){return t.A.importJSON(e)}static importDOM(){return t.A.importDOM()}exportJSON(){return{...super.exportJSON(),type:"reddit-autolink",version:1}}createDOM(e,t){const i=super.createDOM(e);if(t&&!this.getIsUnlinked()){"true"===v(t,"plugins.composer.isMobile")?i.addEventListener("click",(e=>{e.preventDefault(),t.read((()=>{t.dispatchCommand(k,{url:this.getURL(),text:this.getTextContent(),nodeKey:this.getKey()})}))})):Ze(i,t,this)}return i}remove(){Be(this.getKey()),super.remove()}}function Je(e="",i){return t.aQ(new We(e,i))}const Xe="image-error";class qe extends t.aP{constructor({src:e,width:t,height:i,mediaId:a,mimetype:n,uploadStatus:r,blob:o,uploadMethod:s,bearerToken:l,caption:d,uploadedUrl:u},c){super(c),this.__src=e,this.__width=t,this.__height=i,this.__mediaId=a,this.__mimetype=n,this.__uploadStatus=r,this.__blob=o,this.__uploadedUrl=u,this.__uploadMethod=s,this.__bearerToken=l,this.__caption=d}upload(e){e.getRootElement()?.dispatchEvent(a.d(n.c,{resolveReadyState:new Promise(((t,i)=>{this.doUpload(e).then(t).catch(i)}))},!0))}async uploadPoster(e){}set blob(e){this.__blob=e}set height(e){this.__height=e}set mediaId(e){this.__mediaId=e}set mimetype(e){this.__mimetype=e}set src(e){this.__src=e}set uploadStatus(e){this.__uploadStatus=e}set uploadTime(e){this.__uploadTime=e}set width(e){this.__width=e}set caption(e){this.__caption=e}set uploadedUrl(e){this.__uploadedUrl=e}get height(){return this.__height}get mediaId(){return this.__mediaId}get bearerToken(){return this.__bearerToken}get blob(){return this.__blob}get mimetype(){return this.__mimetype}get src(){return this.__src}get uploadStatus(){return this.__uploadStatus}get width(){return this.__width}get caption(){return this.__caption}get uploadedUrl(){return this.__uploadedUrl}get uploadMethod(){return this.__uploadMethod}isInline(){return!1}updateDOM(){return!1}}class Qe extends a.s{constructor(){super(...arguments),this.key="",this.selected=!1,this.unregisterCallbacks=[],this.handleClick=e=>{e.stopPropagation(),e.shiftKey?this.setSelected(!this.selected):(this.clearSelection(),this.setSelected(!0))}}get readonly(){return this.editor&&!this.editor.isEditable()}clearSelection(){this.editor?.update((()=>{const e=t.E();t.aZ(e)&&e.clear()}))}setSelected(e){this.editor?.update((()=>{let i=t.E();t.aZ(i)||(i=t.a_(),t.l(i)),t.aZ(i)&&(e?i.add(this.key):i.delete(this.key))}))}executeOnNode(e){this.editor?.getEditorState().read((()=>{const i=t.S(this.key);i&&this.isMatchingNodeType(i)&&this.editor?.update((()=>{e(i)}))}))}deleteNode(){this.executeOnNode((e=>{const t=e.getParent(),i=e?.getIndexWithinParent();this.editor?.update((()=>{e.getPreviousSibling()?e.selectPrevious():e.getNextSibling()?e.selectNext():t?.select(i,i),e.remove()})),this.dispatchEvent(a.d(n.e,this.key,!0)),this.dispatchEvent(a.d(this.removeEvent,e.metadata,!0))}))}onDeleteNode(e){return e.stopPropagation(),this.editor?.getEditorState().read((()=>{this.selected&&t.aZ(t.E())&&this.deleteNode()})),!1}connectedCallback(){super.connectedCallback(),this.readonly||this.selectableElement.then((e=>{e.addEventListener("click",this.handleClick),this.unregisterCallbacks.push((()=>{e.removeEventListener("click",this.handleClick)}))})),this.editor&&!this.readonly&&this.unregisterCallbacks.push(t.t(this.editor.registerUpdateListener((({editorState:e})=>{e.read((()=>{this.selected=!!t.S(this.key)?.isSelected()}))})),this.editor.registerCommand(t.a$,this.onDeleteNode.bind(this),t.s),this.editor.registerCommand(t.ae,this.onDeleteNode.bind(this),t.s)))}disconnectedCallback(){super.disconnectedCallback(),this.unregisterCallbacks.forEach((e=>e()))}updated(e){e.get("selected")&&this.editor?.dispatchCommand(t.Y,void 0),super.updated(e)}renderDeleteButton(){return a.x`${$e({size:a.v.Small,shape:"pill",appearance:"media",attributes:{className:"absolute top-xs right-xs z-1",onclick:this.onDeleteNode},leadingIcon:o.d({size:a.I.Small})})}`}}a._([a.n({type:String})],Qe.prototype,"key",void 0),a._([a.n({type:Object})],Qe.prototype,"editor",void 0),a._([a.j()],Qe.prototype,"selected",void 0);class et extends Qe{constructor(){super(...arguments),this.allowCaption=!1,this.caption=""}get captionPlaceholder(){return Me.addCaptionPlaceholder()}onCaptionInput(e){const t=e.target;t.value=t.value.replace(/\n/g,""),t.style.height="",t.style.height=t.scrollHeight+"px"}onCaptionChange(e){const i=e.target;this.executeOnNode((e=>{const a=t.S(e.getKey());if(a){const e=a.getWritable();"caption"in e&&(e.caption=i.value)}}))}onKeyUp(e){"Enter"===e.key&&(e.preventDefault(),this.executeOnNode((e=>{e.getNextSibling()||e.insertAfter(t.I()),e.selectNext()})))}renderCaptionInput(){const e="font-sans text-12 border-none text-center resize-none w-full box-border outline-none";return this.readonly?this.caption?a.x`<figcaption class="mt-xs ${e}">${this.caption}</figcaption>`:"":a.x`<div class="flex flex-col items-center mt-xs"> <input type="text" class="absolute -left-[99999px]"> <textarea type="text" rows="1" class="${e} rounded-2" placeholder="${this.captionPlaceholder}" ?readonly="${this.readonly}" @input="${this.onCaptionInput}" @change="${this.onCaptionChange}" @click="${e=>{e.stopImmediatePropagation();const t=e.target;t.previousElementSibling&&(t.previousElementSibling.focus(),setTimeout((()=>{t.focus()})))}}" @focus="${e=>{e.stopImmediatePropagation(),this.setSelected(!1)}}" @keyup="${this.onKeyUp}">
${this.caption}</textarea> </div>`}}et.styles=[a.t],a._([a.n({type:Boolean,attribute:"allow-caption"})],et.prototype,"allowCaption",void 0),a._([a.n({type:String})],et.prototype,"caption",void 0);class tt extends et{constructor(){super(...arguments),this.key="",this.src="",this.mediaId="",this.width=0,this.height=0,this.hasMediaLoadError=!1}getMediaSrc(){return this.src&&!this.hasMediaLoadError?this.src:this.getSrcPlaceholder()}onMediaLoadError(){this.hasMediaLoadError=!0}updated(e){const t=e.get("uploadStatus");void 0!==t&&("failed"===this.uploadStatus?this.dispatchEvent(a.d(n.d,this.key,!0)):"failed"===t&&this.dispatchEvent(a.d(n.e,this.key,!0))),super.updated(e)}getAdditionalContainerClassNames(){return""}renderLoading(){return a.x`<div class="absolute top-xs end-xs w-md h-md flex items-center justify-center p-xs bg-secondary-background rounded-full"> <faceplate-progress value="20" class="animate-spin"></faceplate-progress> </div>`}renderMissingMediaMessage(){return a.x`<div class="h-0 basis-100"></div> <div class="flex items-center text-danger-content gap-xs py-xs"> ${r.i({size:a.I.Small})} <div> <div>${this.missingMediaMessage}</div> </div> </div>`}renderFailed(){return a.x`<div class="h-0 basis-100"></div> <div class="flex grow flex-wrap"> <div class="flex grow items-center text-danger-content gap-xs"> ${r.i({size:a.I.Small})} <p class="text-12 leading-4 m-0">${Me.unableToUpload()}</p> </div> <div class="flex gap-s"> ${$e({appearance:"plain",size:a.v.Small,children:Me.remove(),attributes:{onclick:()=>{this.deleteNode()}}})} ${$e({appearance:"plain",size:a.v.Small,children:Me.retry(),attributes:{onclick:()=>{this.executeOnNode((e=>{e.upload(this.editor)}))}}})} </div> </div>`}render(){const e="contain-paint box-border";return this.readonly?a.x` <figure class="flex flex-col m-0 ${e} ${this.getAdditionalContainerClassNames()}"> ${this.renderMedia(this.getMediaSrc(),this.onMediaLoadError)} ${this.allowCaption?this.renderCaptionInput():""} </figure> `:a.x` <div class="flex flex-col relative ${this.getAdditionalContainerClassNames()}"> ${"inprogress"===this.uploadStatus||"validating"===this.uploadStatus?this.renderLoading():this.selected?this.renderDeleteButton():""} <div class="${e} rounded-2 h-full w-full ${this.selected?"shadow-[0_0_0_4px_var(--color-primary-background)]":"hover:shadow-[0_0_0_2px_var(--color-primary-background)]"}"> ${this.renderMedia(this.getMediaSrc(),this.onMediaLoadError)} </div> ${this.allowCaption?this.renderCaptionInput():""} </div> ${"failed"===this.uploadStatus?this.renderFailed():""} ${!this.src||this.hasMediaLoadError?this.renderMissingMediaMessage():""}`}}tt.styles=[a.i`:host{--loader-size:1rem;display:flex;flex-wrap:wrap;position:relative}.contain-paint{contain:paint}`,a.t],a._([a.n({type:String})],tt.prototype,"key",void 0),a._([a.n({type:String})],tt.prototype,"src",void 0),a._([a.n({type:String,attribute:"media-id"})],tt.prototype,"mediaId",void 0),a._([a.n({type:Number})],tt.prototype,"width",void 0),a._([a.n({type:Number})],tt.prototype,"height",void 0),a._([a.n({type:String,attribute:"upload-status"})],tt.prototype,"uploadStatus",void 0),a._([a.n({type:Object})],tt.prototype,"editor",void 0),a._([a.j()],tt.prototype,"hasMediaLoadError",void 0);const it=()=>`${window?.CLIENT_CONFIG?.STATIC_BASE_URL}assets/posts-and-comments/broken-image.svg`;let at=class extends tt{constructor(){super(...arguments),this.alt="",this.selectableElement=this.image,this.missingMediaMessage=Me.missingMediaMessage(),this.removeEvent="image-remove",this.getSrcPlaceholder=it,this.isMatchingNodeType=ct,this.renderMedia=(e,t)=>{const i=[this.height?`max-height: max(20px, ${this.height}px)`:"",this.width?`max-width: max(20px, min(100%, ${this.width}px))`:""],n=this.caption||this.alt||Me.richTextEditorImageAlt(),r="inprogress"===this.uploadStatus||"validating"===this.uploadStatus||"validated"===this.uploadStatus,o={"opacity-50":r||"failed"===this.uploadStatus,"min-w-[20px]":!r,"min-h-[20px]":!r,"min-w-[100px]":r,"min-h-[100px]":r,"bg-secondary-background":r};return a.x` <div> <img src="${e}" data-media-id="${this.mediaId}" class="rounded-2 box-border max-w-full max-h-[600px] block ${a.Q(o)}" style="${a.aa(i.length?i.join(";"):void 0)}" alt="${n}" @error="${t}"> </div> `}}};async function nt(e,t){let i={};try{i=await s.u(e,t)}catch{}if(i.error)throw new Error(i.error);return i}async function rt(e,t,i){try{if(!t.blob)throw new Error(t.missingSourceErrorMessage);e.update((()=>{const e=t.getWritable();e.uploadStatus="inprogress",e.uploadedUrl=void 0}),{tag:m});const n=Date.now(),r=[],o={...t.metadata};r.push(nt(t.blob,{bearerToken:t.bearerToken,trackEvent:t=>a.k(e.getRootElement(),t),eventSource:v(e,"plugins.composer.eventSource")}).then((i=>{const a=Date.now()-n,r=i?.mediaId??"";e.update((()=>{let e=t.getWritable();e=t.getWritable(),e.uploadTime=a,e.uploadedUrl=i?.url,e.mediaId=r}),{tag:m}),o.mediaId=r,o.mediaUploadDuration=a}))),r.push(i?.(e)),await Promise.all(r),e.update((()=>{let e=t.getWritable();e=t.getWritable(),e.uploadStatus=void 0}),{tag:m}),e.getRootElement()?.dispatchEvent(a.d(t.uploadEventKey,o,!0))}catch{e.update((()=>{t.getWritable().uploadStatus="failed"}),{tag:m});const i=t.errorEventKey;throw (e.getRootElement()?.dispatchEvent(a.d(i,{reason:"ERROR"})), new Error(t.uploadErrorMessage))}}a._([a.n({type:String})],at.prototype,"alt",void 0),a._([a.ej("img")],at.prototype,"image",void 0),at=a._([a.e("rte-image")],at);const ot=/^data:([^;]+);base64,(.+)$/;function st(e){return ot.test(e)}function lt(e){if(e instanceof HTMLImageElement){const{src:t,width:i,height:a,alt:n}=e,r=e.dataset.mediaId,o=e.dataset.mimetype??"",s=e.dataset.uploadStatus,l=e.dataset.caption,d=st(t);if(!r&&!d)return null;return{node:ut({width:i,height:a,src:t,alt:n,mediaId:r??"",uploadStatus:s,uploadMethod:d?"clipboard":void 0,mimetype:o,caption:l})}}return null}class dt extends qe{get alt(){return this.__alt}static getType(){return"image"}constructor({alt:e,...t},i){super(t,i),this.missingSourceErrorMessage="Image has no provided source",this.uploadErrorMessage="Image failed to upload",this.errorEventKey=Xe,this.uploadEventKey="image-upload",this.__alt=e??"rich text editor image"}get isGiphy(){return this.__mediaId.startsWith(i.cL)||/giphy\.com/.test(this.__src);}get metadata(){return{mediaWidth:this.__width,mediaHeight:this.__height,mediaId:this.__mediaId,mediaMimetype:this.__mimetype,mediaSize:this.__blob?.size,mediaUrl:this.__src,mediaSource:this.__uploadMethod,mediaUploadDuration:this.__uploadTime,mediaFileName:this.__blob instanceof File?this.__blob.name:void 0,mediaCaption:this.__caption,mediaType:"image"}}doUpload(e){return rt(e,this)}createDOM(e){const t=document.createElement("span");return t.setAttribute("class",e.theme.image||""),t}decorate(e){return a.x`<div> <rte-image src="${this.__src}" media-id="${this.__mediaId}" key="${this.__key}" width="${this.__width}" height="${this.__height}" upload-status="${a.aa(this.__uploadStatus)}" .editor="${e}" alt="${this.__alt}" ?allow-caption="${v(e,"plugins.media.allowCaptions")}" caption="${a.aa(this.__caption)}"></rte-image> </div> `}updateDOM(){return!1}static importDOM(){return{img:()=>({conversion:lt,priority:0})}}static importJSON(e){return ut({src:e.src,alt:e.alt,height:e.height,width:e.width,mediaId:e.mediaId,mimetype:e.mimetype,uploadStatus:e.uploadStatus,caption:e.caption})}exportDOM(){const e=document.createElement("img");return e.setAttribute("src",this.__src),e.setAttribute("alt",this.__alt),e.setAttribute("width",`${this.__width}`),e.setAttribute("height",`${this.__height}`),e.setAttribute("data-media-id",this.__mediaId),e.setAttribute("data-mimetype",this.__mimetype),this.__uploadStatus&&e.setAttribute("data-upload-status",`${this.__uploadStatus}`),this.__caption&&e.setAttribute("data-caption",this.__caption),{element:e}}exportJSON(){return{type:"image",src:this.__src,width:this.__width,height:this.__height,alt:this.__alt,mediaId:this.__mediaId,mimetype:this.__mimetype,uploadStatus:this.__uploadStatus,caption:this.__caption,version:1}}static clone(e){const{__src:t,__alt:i,__width:a,__height:n,__mediaId:r,__uploadStatus:o,__blob:s,__uploadMethod:l,__key:d,__mimetype:u,__caption:c,__uploadedUrl:m}=e;return new dt({src:t,alt:i,width:a,height:n,mediaId:r,mimetype:u,uploadStatus:o,blob:s,uploadMethod:l,caption:c,uploadedUrl:m},d)}}function ut(e){return new dt(e)}function ct(e){return e instanceof dt}class mt extends t.o{static getType(){return"reddit-link"}static clone(e){return new mt(e.getURL(),{rel:e.getRel(),target:e.getTarget(),title:e.getTitle()},e.getKey())}static importJSON(e){return t.o.importJSON(e)}static importDOM(){return t.o.importDOM()}exportJSON(){return{...super.exportJSON(),type:"reddit-link",version:1}}createDOM(e,t){const i=super.createDOM(e);if(t){"true"===v(t,"plugins.composer.isMobile")?i.addEventListener("click",(e=>{e.preventDefault(),t.read((()=>{t.dispatchCommand(k,{url:this.getURL(),text:this.getTextContent(),nodeKey:this.getKey()})}))})):Ze(i,t,this)}return i}remove(){Be(this.getKey()),super.remove()}}function pt(e="",i){return t.aQ(new mt(e,i))}const ht="video-error";let gt=class extends tt{constructor(){super(...arguments),this.type="",this.playerUi="desktop",this.selectableElement=this.shredditPlayer,this.missingMediaMessage=Me.unableToDisplayVideoError(),this.removeEvent="video-remove",this.getSrcPlaceholder=()=>this.src,this.isMatchingNodeType=ft,this.getAdditionalContainerClassNames=()=>"w-100",this.renderMedia=(e,t)=>{const i=`\n      --aspect-ratio: ${this.width&&this.height?Math.max(this.width/this.height,1):1};\n      --max-height: 450px;\n    `,n=this.caption||Me.richTextEditorVideoAlt();return a.x` <shreddit-aspect-ratio style="${i}"> <shreddit-player autoplay-pref ?is-mobile="${"mobile"===this.playerUi}" src="${e}" data-media-id="${this.mediaId}" class="rounded-2 h-full w-full max-w-full max-h-[600px] min-w-[20px] min-h-[20px] box-border object-cover block ${"inprogress"===this.uploadStatus||"failed"===this.uploadStatus||"validating"===this.uploadStatus?"opacity-50":""}" ?hide-controls="${"failed"===this.uploadStatus}" @error="${t}" poster="${this.poster}" poster-alt="${n}"> <source src="${e}" type="${this.type}"> </shreddit-player> </shreddit-aspect-ratio> `}}};function Nt(e){if(e instanceof HTMLVideoElement){const{width:t,height:i}=e,a=e.dataset.mediaId,n=e.querySelector("source"),r=n?.getAttribute("src")??"",o=n?.getAttribute("type")??"",s=n?.getAttribute("posterUploadedUrl")??"",l=n?.getAttribute("uploadedUrl")??"",d=e.dataset.uploadStatus,u=e.dataset.playerUi??"desktop",c=e.dataset.caption,m=e.poster;if(!a)return null;return{node:kt({width:t,height:i,src:r,mediaId:a,uploadStatus:d,mimetype:o,playerUi:u,caption:c,poster:m,posterUploadedUrl:s,uploadedUrl:l})}}return null}a._([a.n({type:String})],gt.prototype,"type",void 0),a._([a.n({type:String})],gt.prototype,"playerUi",void 0),a._([a.n({type:String})],gt.prototype,"poster",void 0),a._([a.ej(a.eY)],gt.prototype,"shredditPlayer",void 0),gt=a._([a.e("rte-video")],gt);class It extends qe{constructor({playerUi:e,getPosterBlob:t,poster:i,posterUploadedUrl:n,...r},o){super(r,o),this.missingSourceErrorMessage="Video has no provided source",this.uploadErrorMessage="Video failed to upload",this.errorEventKey=ht,this.uploadEventKey="video-upload",this.uploadPoster=async e=>{const t=await(this.__getPosterBlob?.());if(!t)throw new Error("Could not get poster file");const i=this.getPosterFile(t),n=await nt(i,{bearerToken:this.__bearerToken,trackEvent:t=>a.k(e.getRootElement(),t),eventSource:v(e,"plugins.composer.eventSource")});if(n?.error)throw new Error(`Could not get poster lease: ${n.error}`);return{blob:t,url:n.url}},this.__playerUi=e??"desktop",this.__getPosterBlob=t,this.__poster=i,this.__posterUploadedUrl=n}static clone(e){const{__src:t,__width:i,__height:a,__mediaId:n,__uploadStatus:r,__blob:o,__uploadMethod:s,__key:l,__mimetype:d,__playerUi:u,__caption:c,__poster:m,__uploadedUrl:p,__posterUploadedUrl:h,__getPosterBlob:g}=e;return new It({src:t,width:i,height:a,mediaId:n,mimetype:d,uploadStatus:r,blob:o,playerUi:u,uploadMethod:s,caption:c,poster:m,uploadedUrl:p,posterUploadedUrl:h,getPosterBlob:g},l)}static getType(){return"video"}getPosterFile(e){return new File([e],"video-poster"+(this.mediaId?`-${this.mediaId}`:""),{type:e.type})}static importDOM(){return{video:()=>({conversion:Nt,priority:0})}}static importJSON(e){return kt({src:e.src,height:e.height,width:e.width,mediaId:e.mediaId,mimetype:e.mimetype,playerUi:e.playerUi,uploadStatus:e.uploadStatus,caption:e.caption,poster:e.poster,posterUploadedUrl:e.posterUploadedUrl})}get playerUi(){return this.__playerUi}get poster(){return this.__poster}set poster(e){this.__poster=e}set getPosterBlob(e){this.__getPosterBlob=e}set posterUploadedUrl(e){this.__posterUploadedUrl=e}get posterUploadedUrl(){return this.__posterUploadedUrl}doUpload(e){return rt(e,this,(async e=>{const{blob:i,url:a}=(await this.uploadPoster(e))??{};i&&a&&e.update((()=>{const e=this.getWritable();e.poster=URL.createObjectURL(i),e.posterUploadedUrl=a}),{tag:t.b0})}));}createDOM(e){const t=document.createElement("span");return t.setAttribute("class",e.theme.video||""),t}decorate(e){return a.x` <div> <rte-video src="${this.__src}" media-id="${this.__mediaId}" key="${this.__key}" width="${this.__width}" height="${this.__height}" playerUi="${this.__playerUi}" upload-status="${a.aa(this.__uploadStatus)}" ?allow-caption="${v(e,"plugins.media.allowCaptions")}" caption="${a.aa(this.__caption)}" poster="${a.aa(this.__poster)}" .editor="${e}"></rte-video> </div> `}exportDOM(){const e=document.createElement("video"),t=document.createElement("source");return e.setAttribute("width",`${this.__width}`),e.setAttribute("height",`${this.__height}`),e.setAttribute("data-media-id",this.__mediaId),e.setAttribute("data-player-ui",this.__playerUi),this.__caption&&e.setAttribute("data-caption",this.__caption),this.__poster&&e.setAttribute("poster",this.__poster),t.setAttribute("src",this.__src),t.setAttribute("type",this.__mimetype),e.appendChild(t),{element:e}}exportJSON(){return{type:"video",src:this.__src,width:this.__width,height:this.__height,mediaId:this.__mediaId,mimetype:this.__mimetype,playerUi:this.__playerUi,uploadStatus:this.__uploadStatus,caption:this.__caption,poster:this.__poster,posterUploadedUrl:this.__posterUploadedUrl,version:1}}get metadata(){return{mediaWidth:this.__width,mediaHeight:this.__height,mediaId:this.__mediaId,mediaMimetype:this.__mimetype,mediaSize:this.__blob?.size,mediaUrl:this.__src,mediaSource:this.__uploadMethod,mediaUploadDuration:this.__uploadTime,mediaFileName:this.__blob instanceof File?this.__blob.name:void 0,mediaCaption:this.__caption,mediaType:"video"}}}function kt({src:e,width:t,height:i,mediaId:a,mimetype:n,uploadStatus:r,blob:o,playerUi:s,uploadMethod:l,bearerToken:d,caption:u,poster:c,getPosterBlob:m}){return new It({src:e,width:t,height:i,mediaId:a,mimetype:n,uploadStatus:r,blob:o,playerUi:s,uploadMethod:l,bearerToken:d,caption:u,poster:c,getPosterBlob:m})}function ft(e){return e instanceof It}const bt=[dt.getType(),It.getType()];class vt extends Error{constructor(e,t){super(e),this.reason=t}}const Tt={};let Rt=class extends et{constructor(){super(...arguments),this.key="",this.helperText="",this.selectableElement=this.mediaPlaceholder,this.removeEvent="media-placeholder-remove",this.isMatchingNodeType=yt}get captionPlaceholder(){return Me.captionPlaceholder()}focusOnMediaPlaceholderNode(){this.editor?.dispatchCommand(n.R,{}),this.editor?.update((()=>{const e=t.a_();e.add(this.key),t.l(e)}))}get metadata(){return{mediaPlaceholderCaption:this.caption,mediaPlaceholderHelperText:this.helperText}}onImageInputClick(){this.dispatchEvent(a.d("media-placeholder-upload-image-click",this.metadata,!0)),this.focusOnMediaPlaceholderNode(),this.editor?.dispatchCommand(Tt,{type:"image"})}onVideoInputClick(){this.dispatchEvent(a.d("media-placeholder-upload-video-click",this.metadata,!0)),this.focusOnMediaPlaceholderNode(),this.editor?.dispatchCommand(Tt,{type:"video"})}render(){return a.x` <div class="flex flex-col h-full w-full"> <div class="overflow-hidden rounded-4 text-center ${this.readonly?"":this.selected?"shadow-[0_0_0_4px_var(--color-primary-background)]":"hover:shadow-[0_0_0_2px_var(--color-primary-background)]"}" data-is-media-placeholder=""> <div class="border border-coolgray-350 border-dashed pb-2xl pt-2xl rounded-4"> <div class="flex flex-col h-4xl justify-center"> <h4 class="font-semibold m-0 mb-2xs">${this.helperText}</h4> <span class="text-secondary-weak">${Me.fileSelectorDragAndDrop()} <button class="bg-transparent border-none cursor-pointer p-0 text-global-alienblue text-inherit" @click="${this.onImageInputClick}"> ${Me.fileSelectorAddAnImage()}</button>${Me.fileSelectorOr()} <button class="bg-transparent border-none cursor-pointer p-0 text-global-alienblue text-inherit" @click="${this.onVideoInputClick}"> ${Me.fileSelectorAddAVideo()} </button> </span> ${this.selected?this.renderDeleteButton():""} </div> </div> </div> ${this.allowCaption?this.renderCaptionInput():""} </div> `}};function Et(e){if(e instanceof HTMLSpanElement&&"isMediaPlaceholder"in e.dataset){return{node:Ot({caption:e.getAttribute("caption")??void 0,helperText:e.getAttribute("helper-text")??void 0})}}return null}Rt.styles=[a.i`:host{--loader-size:1rem;display:flex;flex-wrap:wrap;position:relative}`,a.t],a._([a.n({type:String})],Rt.prototype,"key",void 0),a._([a.n({type:String,attribute:"helper-text"})],Rt.prototype,"helperText",void 0),a._([a.n({type:Object})],Rt.prototype,"editor",void 0),a._([a.ej("div[data-is-media-placeholder]")],Rt.prototype,"mediaPlaceholder",void 0),Rt=a._([a.e("rte-media-placeholder")],Rt);class Lt extends t.aP{static getType(){return"mediaplaceholder"}constructor({caption:e,helperText:t},i){super(i),this.__caption=e,this.__helperText=t}get caption(){return this.__caption}get helperText(){return this.__helperText}get metadata(){return{mediaPlaceholderCaption:this.__caption,mediaPlaceholderHelperText:this.__helperText}}set caption(e){this.__caption=e}set helperText(e){this.__helperText=e}createDOM(e){const t=document.createElement("span");return t.setAttribute("class",e.theme?.mediaplaceholder||""),t}updateDOM(){return!1}static importDOM(){return{span:e=>e instanceof HTMLSpanElement&&"isMediaPlaceholder"in e.dataset?{conversion:Et,priority:1}:null}}exportDOM(){const e=document.createElement("span");return e.setAttribute("data-is-media-placeholder",""),e.setAttribute("caption",this.__caption??""),e.setAttribute("helper-text",this.__helperText??""),{element:e}}static importJSON(e){return Ot({caption:e.caption,helperText:e.helperText})}decorate(e){return a.x` <rte-media-placeholder ?allow-caption="${v(e,"plugins.media.allowCaptions")}" caption="${a.aa(this.__caption)}" helper-text="${a.aa(this.__helperText)}" key="${this.__key}" .editor="${e}"></rte-media-placeholder> `}exportJSON(){return{type:"mediaplaceholder",caption:this.__caption,helperText:this.__helperText,version:1}}static clone(e){return new Lt({caption:e.caption,helperText:e.helperText},e.getKey())}isInline(){return!1}}const yt=e=>e instanceof Lt;function Ot({caption:e,helperText:t}){return new Lt({caption:e,helperText:t})}class St extends t.b1{constructor(){super(...arguments),this._canBeEmpty=!0}static getType(){return"spoiler"}isInline(){return!0}createDOM(e){const t=document.createElement("span");return t.setAttribute("class",e.theme?.spoiler||""),t}updateDOM(){return!1}static importDOM(){return{span:e=>e instanceof HTMLSpanElement&&"isSpoiler"in e.dataset?{conversion:()=>({node:Pt()}),priority:1}:null}}exportDOM(){const e=document.createElement("span");return e.setAttribute("data-is-spoiler",""),{element:e}}static importJSON(e){const t=Pt();return t.setFormat(e.format),t.setIndent(e.indent),t.setDirection(e.direction),t}exportJSON(){return{type:St.getType(),children:[],direction:this.getDirection(),format:this.getFormatType(),indent:this.getIndent(),version:1}}insertNewAfter(e,i=!0){const a=this.getParentOrThrow().insertNewAfter(e,i);if(t.g(a)){const e=Pt();return e._canBeEmpty=!1,a.append(e),e}return null}canBeEmpty(){return!1===this._canBeEmpty?(this._canBeEmpty=!0,!1):this._canBeEmpty}static clone(e){return new St(e.getKey())}}function Pt(){return new St}function _t(e){if(e.startsWith("/")){const[,t,i]=e.split("/");return[t.toLowerCase(),i]}const[t,i]=e.split("/");return[t.toLowerCase(),i]}function xt(e){let t=e;0===e.search(/^@[A-Za-z0-9]/)&&(t=e.replace("@","u/"));const[i,a]=_t(t);return[t,i,a]}function Dt(e){return{node:At(e.innerText)}}class Ut extends t.j{static getType(){return"reddit-mention"}static clone(e){return new Ut(e.__text,e.__key)}static importJSON(e){const t=At(e.text);return t.setFormat(e.format),t.setDetail(e.detail),t.setMode(e.mode),t.setStyle(e.style),t}constructor(e,t){const[i,a,n]=xt(e);super(i,t),this.__mentionType=a,this.__mentionName=n}moveCursorToTextEnd(){const e=t.E();if(t.u(e)){const t=this.getWritable(),i=t.getTextContentSize();e.setTextNodeRange(t,i,t,i)}}exportJSON(){return{...super.exportJSON(),mentionType:this.getMentionType(),mentionName:this.getMentionName(),type:"reddit-mention",version:1}}getMentionType(){return this.getLatest().__mentionType}getMentionName(){return this.getLatest().__mentionName}setTextContent(e){if(this.__text===e)return this;const[t,i,a]=xt(e),n=super.setTextContent(t);return n.__mentionName=a,n.__mentionType=i,n}createDOM(e){const t=document.createElement("a");return t.textContent=this.__text,t.className="u"===this.getMentionType()?"user-mention":"subreddit-mention",t}updateDOM(e,t){return t.innerText=this.__text,!1}static importDOM(){return{a:e=>e instanceof HTMLAnchorElement&&"isMention"in e.dataset?{conversion:Dt,priority:2}:null}}exportDOM(){const e=document.createElement("a");return e.setAttribute("data-is-mention",""),e.innerText=this.__text,{element:e}}canInsertTextBefore(){return!1}isTextEntity(){return!0}}function At(e){const i=new Ut(e);return i.setDetail(2),e.startsWith("@")&&i.moveCursorToTextEnd(),t.aQ(i)}let Ct=class extends a.s{constructor(e,t,i){super(),this.unsubscribeFn=[],this.options=[],this.selectedIndex=-1,this.updateOptions=a.ae((async e=>{this.searchOperationAbortController?.abort("Redundant request"),this.searchOperationAbortController=new AbortController;try{this.options=await this.filter(e,{signal:this.searchOperationAbortController.signal}),this.selectedIndex=0}catch(e){if("AbortError"===e.name)throw e}}),128),this.handlePointerDown=e=>{e.preventDefault()},this.handleClick=e=>{const t=e.currentTarget;this.selectedIndex=parseInt(t.dataset.index??"-1"),this.applyCurrentSelection()},this.handlePointerEnter=e=>{const t=e.currentTarget;this.selectedIndex=parseInt(t.dataset.index??"-1")},this.editor=e,this.filter=i,this.mentionNode=t}connectedCallback(){super.connectedCallback();const e=this.editor.registerCommand(t.a,(e=>(e.preventDefault(),e.stopImmediatePropagation(),this.incrementSelectedIndex(),!0)),t.ar);this.unsubscribeFn.push(e);const i=this.editor.registerCommand(t.b2,(e=>(e.preventDefault(),e.stopImmediatePropagation(),this.decrementSelectedIndex(),!0)),t.ar);this.unsubscribeFn.push(i);const a=e=>!!this.options.at(this.selectedIndex)&&(e?.preventDefault(),e?.stopImmediatePropagation(),this.applyCurrentSelection(),!0),n=this.editor.registerCommand(t.M,a,t.ar);this.unsubscribeFn.push(n);const r=this.editor.registerCommand(t.D,a,t.ar);this.unsubscribeFn.push(r);const o=this.editor.registerCommand(t.aY,(e=>(e?.preventDefault(),e?.stopImmediatePropagation(),this.resetOptions(),!0)),t.ar);this.unsubscribeFn.push(o)}disconnectedCallback(){this.unsubscribeFn.forEach((e=>e())),super.disconnectedCallback()}scrollToSelectedItem(){const e=this.shadowRoot.querySelector(`[data-index="${this.selectedIndex}"]`);e?.scrollIntoView({block:"end",behavior:"auto"})}static get styles(){return[a.t]}incrementSelectedIndex(){this.selectedIndex=(this.selectedIndex+1)%this.options.length,this.scrollToSelectedItem()}decrementSelectedIndex(){this.selectedIndex=(this.selectedIndex-1+this.options.length)%this.options.length,this.scrollToSelectedItem()}resetOptions(){this.selectedIndex=-1,this.options=[]}applyCurrentSelection(){const e=this.options.at(this.selectedIndex);e&&this.editor.update((()=>{this.mentionNode.setTextContent(e.text);const i=t.Z(" ");this.mentionNode.insertAfter(i);const a=t.T();a.anchor.type="text",a.focus.type="text",a.anchor.key=i.getKey(),a.focus.key=i.getKey(),a.anchor.offset=1,a.focus.offset=1,t.l(a)}))}async setQuery(e){this.updateOptions(e)}renderListOption(e,t){const i=t===this.selectedIndex;return a.x` <li tabindex="-1" class="cursor-pointer m-0 px-md py-sm text-14 leading-5 truncate ${i?"bg-neutral-background-selected text-secondary-onBackground":"text-secondary"}" role="option" aria-selected="${i.toString()}" data-index="${t}" @pointerenter="${this.handlePointerEnter}" @pointerdown="${this.handlePointerDown}" @click="${this.handleClick}"> <span>${e.text}</span> </li> `}renderListOptions(){return a.x` <ul class="list-none m-0 p-0"> ${a.bO(this.options,(e=>e.id),((e,t)=>this.renderListOption(e,t)))} </ul> `}render(){return 0===this.options.length?a.x``:a.x` <div aria-label="${"Mentions autocomplete list"}" role="listbox" class="overflow-y-auto w-[200px] max-h-[336px] py-xs rounded-2 bg-neutral-background shadow-md"> ${this.renderListOptions()} </div> `;}};a._([a.j()],Ct.prototype,"options",void 0),a._([a.j()],Ct.prototype,"selectedIndex",void 0),Ct=a._([a.e("rte-mention-list")],Ct),t.a1.prototype.isInline=()=>!0;const zt=[t.a0,t.C,t.aB,t.a3,t.$,t.a2,t.y,t.ak,t.aj,mt,{replace:t.o,with:e=>new mt(e.getURL(),{rel:e.getRel(),target:e.getTarget(),title:e.getTitle()}),withKlass:mt},We,{replace:t.A,with:e=>new We(e.getURL(),{rel:e.getRel(),target:e.getTarget(),title:e.getTitle()}),withKlass:We},St,dt,It,g,Lt];let Ht=class extends a.s{beforeCreateEditor(e){return"function"==typeof this.beforeCreateEditorCallback?this.beforeCreateEditorCallback?.(e):e}createEditor(e){this._rte=e,this._editor=e.getEditor(),"function"==typeof this.createEditorCallback&&this.createEditorCallback?.(e)}};Ht=a._([a.e("rte-plugin")],Ht);const jt={};function wt(e){return"Comment"===e?.typename}var $t;!function(e){e.Initial="initial",e.Loading="loading",e.Loaded="loaded",e.Error="error"}($t||($t={}));let Mt=class extends Qe{constructor(){super(...arguments),this.id="",this.state=$t.Initial,this.commentInfo=null,this.selectableElement=Promise.resolve(this),this.removeEvent="remove-rte-comment-preview",this.isMatchingNodeType=Kt,this.pubsub=new a.z(this),this.handleFetchSuccess=e=>{e.id===this.id&&(this.commentInfo={typename:e.typename,richtext:"Comment"===e.typename?e.richtext:"",permalink:"Comment"===e.typename?e.permalink:"",score:"Comment"===e.typename?e.score:void 0,subredditPrefixedName:"Comment"===e.typename?e.subredditPrefixedName:void 0},this.state=$t.Loaded)},this.handleFetchError=e=>{e.id===this.id&&(this.state=$t.Error,this.commentInfo=null)},this.onEditNode=e=>{if(e.stopPropagation(),!wt(this.commentInfo)||!this.commentInfo.permalink)return!1;const t=`${CLIENT_CONFIG.ORIGIN}${this.commentInfo.permalink}`;return this.editor?.dispatchCommand(jt,{url:t,nodeKey:this.key}),!1}}connectedCallback(){super.connectedCallback(),this.pubsub.subscribe(a.T.RTECommentPreviewFetchSuccess,this.handleFetchSuccess),this.pubsub.subscribe(a.T.RTECommentPreviewFetchError,this.handleFetchError),this.state===$t.Initial&&this.requestData()}updated(e){super.updated(e),e.has("id")&&void 0!==e.get("id")&&this.requestData()}get isLoading(){return this.state===$t.Loading||this.state===$t.Initial}requestData(){this.commentInfo=null,this.state=$t.Loading,this.pubsub.publish(a.T.RTECommentPreviewFetch,{id:this.id})}renderSuccessState(e){return wt(e)?this.renderAvailableCommentContent(e):this.renderDeletedCommentContent()}renderDeletedCommentContent(){return a.x` <div class="h-[60px] bg-neutral-background-container flex justify-between items-center px-md py-2xs"> <p class="text-neutral-content-weak">${Me.commentPreviewCommentDeleted()}</p> </div> `}renderAvailableCommentContent(e){const t=e.subredditPrefixedName;return a.x` <div class="bg-neutral-background-container px-md py-xs"> <div class="text-14 text-neutral-content"> ${d.c({richtext:JSON.parse(e.richtext)})} </div> <div class="flex justify-between items-center w-full mt-xs"> <div class="flex items-center gap-2xs"> ${t?a.x` <a href="${CLIENT_CONFIG.ORIGIN}/${t}" target="_blank" rel="noopener noreferrer" class="text-12 text-neutral-content-strong no-underline hover:underline">${t}</a> `:a.A} </div> <span class="inline-flex items-center gap-2xs text-12 mb-2xs"> ${c.u({size:a.I.Small})} <faceplate-number number="${e.score??0}" pretty></faceplate-number> </span> </div> </div> `}renderLoadingState(){return a.x` <faceplate-shimmer class="block h-[60px] w-full"></faceplate-shimmer> `}renderErrorState(){return a.x` <div class="h-[60px] bg-neutral-background-container flex items-center px-md"> <p class="inline-flex items-center text-neutral-content-weak"> ${u.e({attributes:{className:"me-xs"}})} <span>${Me.commentPreviewFailedToLoad()}</span> </p> ${a.u({appearance:"plain",size:a.v.Small,children:Me.retry(),attributes:{onclick:()=>this.requestData(),className:"ms-sm"}})} </div> `}renderPreview(){return this.state===$t.Error?this.renderErrorState():this.isLoading||!this.commentInfo?this.renderLoadingState():this.renderSuccessState(this.commentInfo)}renderEditButton(){return a.x`${a.u({size:a.v.Small,shape:"pill",appearance:"media",attributes:{className:"absolute top-xs end-[46px] z-1",onclick:this.onEditNode,"data-testid":"rte-comment-preview-edit-button"},leadingIcon:l.e({size:a.I.Small})})}`}render(){return a.x` <div class="relative rounded-4 overflow-hidden ${this.readonly?"":this.selected?"shadow-[0_0_0_4px_var(--color-primary-background)]":"hover:shadow-[0_0_0_2px_var(--color-primary-background)]"}"> ${this.renderPreview()} ${this.selected?a.x`${this.renderEditButton()} ${this.renderDeleteButton()} `:""} </div> `}};Mt.styles=[a.t],a._([a.n({type:String,attribute:"comment-id"})],Mt.prototype,"id",void 0),a._([a.j()],Mt.prototype,"state",void 0),a._([a.j()],Mt.prototype,"commentInfo",void 0),Mt=a._([a.e("rte-comment-preview")],Mt);const Ft="reddit-comment";class Gt extends t.aP{static getType(){return Ft}static clone(e){return new Gt({id:e.id},e.getKey())}constructor({id:e},t){super(t),this.__id=e}get id(){return this.__id}get metadata(){return{commentId:this.__id}}setComment(e){this.getWritable().__id=e}createDOM(e){const t=document.createElement("div");return t.setAttribute("class",e.theme?.[this.getType()]||""),t}updateDOM(){return!1}exportDOM(){const e=document.createElement("div");return e.setAttribute("data-is-reddit-comment",""),e.setAttribute("data-comment-id",this.__id),{element:e}}static importDOM(){return{div:e=>{const t=e instanceof HTMLDivElement&&"isRedditComment"in e.dataset,{commentId:i}=e.dataset;return t&&i?{conversion:()=>({node:Bt({id:i})}),priority:1}:null}}}exportJSON(){return{...super.exportJSON(),type:Ft,id:this.id}}static importJSON(e){return Bt({id:e.id})}decorate(e){return a.x` <rte-comment-preview comment-id="${this.__id}" key="${this.__key}" .editor="${e}"></rte-comment-preview> `}isInline(){return!1}}function Kt(e){return e instanceof Gt}function Bt(e){return new Gt(e)}const Vt=/^\/cmnt\/t1_([a-zA-Z0-9]+)\/?$/;const Zt=/^:.+:$/;var Yt;!function(e){e[e.bold=1]="bold",e[e.italic=2]="italic",e[e.strikethrough=4]="strikethrough",e[e.underline=8]="underline",e[e.monospace=16]="monospace",e[e.subscript=32]="subscript",e[e.superscript=64]="superscript"}(Yt||(Yt={}));const Wt={h1:1,h2:2,h3:3,h4:4,h5:5,h6:6};function Jt(i){if(!ei(i))return[];switch(i.type){case t.y.getType():return function(t){let i=t.children;const a=i[0].children.map((t=>{const i=t.children[0],a=function(t){switch(t){case"right":return e.k.RIGHT;case"center":return e.k.CENTER;case"left":return e.k.LEFT;default:return}}(i?.format??null),n={};return n.c=ti(t)?ai(t.children[0]):[],a&&(n.a=a),n})).filter((e=>null!=e));return i=i.slice(1),[a,i.map((e=>e.children.map((e=>({c:ti(e)?ai(e.children[0]):[]})))))]}(i);case t.$.getType():return function(t){const i=t.children.map((e=>Qt(e,t))).filter(Boolean);return ni(i).filter(((t,i,a)=>t.e!==e.L||(i===a.length-1||a[i+1].e===e.L))).map((t=>t.e===e.L?{e:e.R,t:""}:{e:e.R,t:t.t}))}(i);default:return ai(i)}}const Xt=[We.getType(),mt.getType()];function qt(i,a){const n=i.text;return"\0"===n?null:[t.a0.getType(),t.$.getType()].some((e=>a?.type===e))?{e:e.R,t:n}:{e:e.j,t:n,f:n.trim().length>0?ii(i):void 0}}function Qt(i,a){if("linebreak"===i.type)return{e:"br"};const n=Jt(i);switch(i.type){case dt.getType():case g.getType():{if(i.mediaId.match(Zt)){const t=i;return{e:e.b,a:t.mediaId,u:t.src}}const t=i;return{e:"image/gif"===t.mimetype?e.A:e.I,id:t.mediaId,c:t.caption}}case It.getType():{const t=i;return{e:e.V,id:t.mediaId,c:t.caption}}case t.F.getType():return ri(n);case t.$.getType():return{e:e.c,c:n};case t.a2.getType():return i.text;case t.a3.getType():{const t=ri(n);return{e:e.B,c:[t]}}case St.getType():return{e:e.S,c:n};case t.C.getType():{const t="number"===i.listType;return{e:e.f,o:t,c:n}}case t.aB.getType():{const t=[e.j,e.S,e.i,e.g,e.h],i=[];let a;for(const r of n)t.includes(r.e)?(a??(a={e:e.P,c:[]})).c.push(r):(a&&(i.push({...a}),a=void 0),i.push(r));a&&i.push(a);return{e:e.e,c:i}}case t.a0.getType():return{e:e.d,l:Wt[i.tag],c:n};case mt.getType():{const t=ni(n).find((t=>t.e===e.j));return{e:e.i,t:t?t.t:"",u:i.url,f:t?t.f:void 0}}case Gt.getType():{const t=i.id,a=function(e){return`/cmnt/${e}`}(t);return ri([{e:e.i,t,u:a,f:void 0}])}case We.getType():{const t=ni(n).find((t=>t.e===e.j)),a=t?t.t:"",r=t?t.f:void 0,o=i;return o.isUnlinked?{e:e.j,t:a,f:r}:{e:e.i,t:a,u:o.url,f:r}}case Ut.getType():{const e=i,[t,n]=_t(e.text);return!n||a&&function(e){return Xt.includes(e.type)}(a)?qt(i,a):{e:`${t}/`,t:n,l:!1}}case t.y.getType():{const[t,i]=n;return{e:e.T,h:t,c:i}}case t.j.getType():case t.b3.getType():return qt(i,a);case Lt.getType():return null;default:return window.Sentry?.captureMessage?.(`Lexical to RTJSON: unimplemented node type: ${i.type}`),null}}const ei=e=>!!e?.children;function ti(e){const i=e?.children??[];return 0!==i.length&&(1!==i.length||i[0].type!==t.F.getType()||0!==(i[0]?.children?.length??0)&&i[0]?.children[0]?.type!==t.a1.getType())}function ii(e,t=!1){const i=e,a=d.b(i.text);return[[oi(t?16|i.format:i.format),a[(n=i.text,n.length-n.trimStart().length)],a[i.text.trim().length]]];var n}function ai(e){return ni(e.children.map((t=>Qt(t,e))).filter(Boolean))}function ni(t){const i=[];let a=null;for(const n of t)n.e===e.j?a?si(a,n):(i.push(n),a=n):(a=null,i.push(n));return i.forEach((t=>{if(t.e===e.j&&t.f){const e=t.f.filter((e=>e[0]>0));t.f=e.length>0?e:void 0}})),i}function ri(t){return{e:e.P,c:t?.length?t:[{e:e.j,t:""}]}}function oi(t){let i=0;for(const a in Yt){if(!t)break;if(isNaN(Number(a)))continue;const n=Number(a);if(n===Yt.underline)continue;if(n&t){const t=Yt[a];i|=e.F[t]}t&=~n}return i}function si(e,t){const i=d.b(e.t)[e.t.length];e.t+=t.t;const[a,n,r]=t.f?.[0]??[0,0,0];return r>0&&(e.f??(e.f=[])).push([a,n+i,r]),e}function li(a,n){switch(a.e){case e.P:{const e=di(a,n);if(1===e.length){const i=e[0];if("image"===i.getType())return i;if(t.ah(i)&&(r=i.getURL(),Vt.test(r))){const e=function(e){const t=e.match(Vt);return t?.[1]?`t1_${t[1]}`:""}(i.getURL());return Bt({id:e})}}const i=t.I();return i.append(...e),i}case e.j:return ui(a);case e.R:return t.Z(a.t);case e.i:{const e=a.u===a.t?Je(a.u):pt(a.u),t=ui(a),i=Array.isArray(t)?t:[t];return e.append(...i),e}case e.S:{const e=Pt();return e.append(...di(a,n)),e}case e.c:{const e=t.a8();return e.append(...function(e){const i=e.c.reduce(((i,a,n)=>(a.t?.length>0&&i.push(t.Z(a.t)),(0===a.t?.length||n<e.c.length-1)&&i.push(t.b6()),i)),[]);0===e.c[e.c.length-1].t.length&&i.splice(i.length-1,1);return i}(a)),e}case e.L:return t.b6();case e.g:case e.h:return At(`${a.e}${a.t}`);case e.B:{const i=t.a7();return a.c[0]?.e===e.P?i.append(...di(a.c[0],n)):i.append(...di(a,n)),i}case e.f:{const e=t.b5(a.o?"number":"bullet");return e.append(...di(a,n)),e.getChildren().forEach(((e,t)=>{e.setValue(t+1)})),e}case e.e:{const e=t.b4();return e.append(...di(a,n)),e}case e.d:{const e=t.aa(`h${a.l}`);return e.append(...di(a,n)),e}case e.I:case e.A:{const t=n[a.id],r=a.e===e.A?"image/gif":t?.mimetype??"";return a.id.startsWith(i.cK)?N({mediaId:a.id,src:t?.src??"",mimetype:r}):ut({mediaId:a.id,src:t?.src??"",width:t?.width??0,height:t?.height??0,mimetype:r,caption:a?.c})}case e.V:{const e=n[a.id];return kt({mediaId:a.id,src:e?.src??"",width:e?.width??0,height:e?.height??0,mimetype:e?.mimetype??"",caption:a?.c,poster:e?.poster})}case e.T:return function(e,i){const a=t.b7(),n=e.h.map(ci),r=e.h.filter((e=>e.c)).map(((e,a)=>{const r=t.b8(t.al.ROW),o=di(e,i),s=t.I();return s.append(...o),s.setFormat(n[a]),r.append(s),r})),o=e.c.map((e=>{const a=t.b9(),r=e.map(((e,a)=>{const r=t.b8(t.al.NO_STATUS),o=di(e,i),s=t.I();return s.append(...o),s.setFormat(n[a]),r.append(s),r}));return a.append(...r),a}));if(r.length>0){const e=t.b9();e.append(...r),o.splice(0,0,e)}return a.append(...o),a}(a,n);case e.b:return N({mediaId:a.a,src:a?.u,mimetype:"image/png"});case"mediaplaceholder":return Ot({caption:a.c,helperText:a.h});default:return window.Sentry?.captureMessage?.(`Lexical to RTJSON: unimplemented node type in rtjson->lexical conversion: ${a.e}`),[]}var r}function di(e,t){return e.c?.map((e=>li(e,t))).flat()??[]}function ui(i){const a=i.f;if(!a)return t.Z(i.t);const n=i.t,r=d.d(n),o=function(e,t){const i=[];let a=0,n=0;for(;a<t;)if(e[n]){const[t,r,o]=e[n];r>a?(i.push([0,a,r-a]),a=r):r===a&&(i.push([t,r,o]),a=r+o,n++)}else i.push([0,a,t-a]),a=t;return i}(a,r.length);return o.flatMap((i=>{const[a,o,s]=i,l=r[o],d=r[o+s],u=n.substring(l,d),c=t.Z(u);return c.setFormat(function(t){let i=0;for(const a in e.F){if(!t)break;if(isNaN(Number(a)))continue;const n=Number(a);if(n&t){const t=e.F[a];i|=Yt[t]}t&=~n}return i}(a)),c}))}function ci(t){switch(t.a){case e.n:return"right";case e.m:return"center";case e.l:return"left";default:return""}}return {$:N,A:bt,B:"\0",C:st,D:function(e){const t=e.match(ot);if(!t)throw new Error("Invalid data URI format. Expected format: data:<contentType>;base64,<data>");const i=t[1],a=t[2],n=atob(a),r=new Uint8Array(n.length);for(let e=0;e<n.length;e++)r[e]=n.charCodeAt(e);return new Blob([r],{type:i})},E:g,F:ut,G:Xe,H:m,I:dt,J:It,K:kt,L:ht,M:Lt,N:"open-video-tooltip",O:"open-image-tooltip",P:function(e,i){const a=e.getChildren(),n=a.findIndex((e=>t.p(e)));if(n>-1){if(a[n].remove(),n===a.length-1){const i=t.I();return e.insertAfter(i),void i.select()}if(0===n){const i=t.I();return void e.insertBefore(i)}if(n>0){const t=i();for(let e=n+1;e<a.length;e++)t.append(a[e]);e.insertAfter(t),t.selectStart()}}},Q:Pt,R:function(e,i){const a=t.b();a.clear();for(const t of e.document){const e=li(t,i);a.append(...(Array.isArray(e) ? e : [e]))}},S:zt,T:function(e,i,a){const n=i.splitText(e.anchor.offset);n[1]||t.ag(e.focus)?n[0].insertAfter(a):i.insertBefore(a)},U:{},V:vt,W:{},X:I,Y:{},get Z(){return Fe},_:function(e,i){return i.getEditor()?.registerNodeTransform(e,(a=>{try{a.getTextContent()&&!je(i,a.getParentOrThrow(),e)&&(a.insertBefore(new t.j(a.getTextContent())),a.remove(!0))}catch(e){}}))},a:e=>e instanceof St,a0:k,a1:pt,a2:function(e,t){return b.set(e,t)},a3:function(e){const t={document:[]};for(const i of e.root.children){const e=Qt(i);e&&t.document.push(e)}return t},a4:ft,a5:class{constructor(){this.nodeSetMap=new Map}count(){let e=0;for(const[,t]of this.nodeSetMap)e+=t.size;return e}add(e,t){return this.nodeSetMap.has(e)||this.nodeSetMap.set(e,new Set),this.nodeSetMap.get(e).add(t),!0}delete(e,t){return!!this.nodeSetMap.has(e)&&this.nodeSetMap.get(e).delete(t)}countOf(e){return this.nodeSetMap.get(e)?.size??0}},a6:function e(t=document){const i=t.activeElement;return i?i.shadowRoot?e(i.shadowRoot):i:null},b:Ut,c:He,d:function(e){return e instanceof Ut},get e(){return ze},get f(){return Ct},g:At,h:We,i:je,j:f,k:function(e){return e instanceof We},l:function(e){return e instanceof mt},m:Je,get n(){return Ht},o:v,p:$e,q:function(e,...t){return t.some((t=>e.getType()===t.getType()))},r:Be,s:mt,t:St,u:function(e,i,{isValidPlacement:a=()=>!0,handleFiles:n=()=>{},shouldMergeSameNodeType:r=!1}={}){return function(o){const[s,l]=t.aR(o);if(s)return n(o,l),!1;if(r){const e=t.E();if(t.u(e)){const a=e.focus.getNode();if(t.g(a)&&a.getType()===i.getType()||!t.g(a)&&a.getTopLevelElement()?.getType()===i.getType())return!1}}let d=null;if(o instanceof DragEvent?d=o.dataTransfer:o instanceof ClipboardEvent&&(d=o.clipboardData),d){const n=d.getData("application/x-lexical-editor");if(n)try{const r=JSON.parse(n);if(Array.isArray(r.nodes)){if(r.nodes.filter((e=>e.type===i.getType())).length){const i=t.aS(r.nodes);return a(i)&&we(i,e),!0}}return!1}catch(e){window.Sentry?.captureMessage?.(`Error importing Lexical string via paste or drop: ${e?.message}`)}const r=d.getData("text/html");if(r)try{const n=(new DOMParser).parseFromString(r,"text/html"),o=t.aT(e.getEditor(),n);if(o.some((e=>e.getType()===i.getType()))){if(a(o)){const i=o.filter((e=>t.aU(e)||t.aV(e)));we(i,e)}return!0}}catch(e){window.Sentry?.captureMessage?.(`Error importing HTML string via paste or drop: ${e?.message}`)}}return!1}},v:function(e,i,a){return e.registerNodeTransform(t.j,(e=>{try{!i()&&e.hasFormat(a)&&e.toggleFormat(a)}catch(e){}}))},w:function(e,i,a={}){const{collapseBlock:n=!1,fixUpNode:r,nodeHandlers:o}=a,{validChildren:s}=v(i.getEditor(),`nodes.${e.getType()}`);if(s.includes("*"))return()=>{};const l=new Set(s),d=i.getEditor(),u=[d.registerNodeTransform(e,(e=>{!function(e,i,a=[],n){for(const r of a){const o=r.getParentOrThrow();if(n?.[r.getType()])return void n?.[r.getType()]({parent:o,child:r});if(!e.has(r.getType())||i&&a.length>1&&t.g(r)&&!r.isInline()){if(t.p(r))return void r.replace(t.Z(" "));if(t.g(r)){const e=!r.isInline()&&!t.g(r.getFirstChild()),i=r===a[a.length-1];try{const a=r.getLastChild();t.aW(r),e&&!i&&a?.insertAfter(t.Z(" "))}catch(e){}finally{r.getChildren().length>0&&o.append(...r.getChildren())}}r.remove()}}}(l,n,e.getChildren(),o)}))];return r&&u.push(d.registerNodeTransform(e,(e=>{e.isDirty()||r(e)}))),t.t(...u)},x:we,get y(){return Me},z:Tt};}));
SML.di("./CYrPuvCiTj.js",import.meta.url,"CYrPuvCiTj");SML.di("./wzdls1o9Kk.js",import.meta.url,"wzdls1o9Kk");SML.di("./BNhmBC31Qc.js",import.meta.url,"BNhmBC31Qc");SML.di("./BkN3vL5jOX.js",import.meta.url,"BkN3vL5jOX");SML.di("./CZtlI9NlXS.js",import.meta.url,"CZtlI9NlXS");SML.di("./BA-YMBSJ68.js",import.meta.url,"BA-YMBSJ68");SML.di("./CbYjzDlHSg.js",import.meta.url,"CbYjzDlHSg");SML.di("./CeSKxcW4bq.js",import.meta.url,"CeSKxcW4bq");SML.di("./gvWVn4JBWB.js",import.meta.url,"gvWVn4JBWB");SML.di("./BIGAbYW0aG.js",import.meta.url,"BIGAbYW0aG");SML.di("./D2VJiRUxKq.js",import.meta.url,"D2VJiRUxKq");SML.di("./DLdgTt_kCu.js",import.meta.url,"DLdgTt_kCu");SML.di("./hgVDyxZ2rL.js",import.meta.url,"hgVDyxZ2rL");SML.di("./CVFZT5qG1t.js",import.meta.url,"CVFZT5qG1t");SML.di("./Bb-T49I7YR.js",import.meta.url,"Bb-T49I7YR");SML.di("./C8CrqKCiqJ.js",import.meta.url,"C8CrqKCiqJ");SML.di("./COfLy9zygd.js",import.meta.url,"COfLy9zygd");SML.di("./gMEDXxO5ap.js",import.meta.url,"gMEDXxO5ap");SML.di("./BDMOQ0-Tf9.js",import.meta.url,"BDMOQ0-Tf9");SML.di("./vhsAG6S_0w.js",import.meta.url,"vhsAG6S_0w");SML.di("./3jd2bjBQv5.js",import.meta.url,"3jd2bjBQv5");SML.di("./DdQ8ToexAC.js",import.meta.url,"DdQ8ToexAC");SML.di("./CsnZoaUuMa.js",import.meta.url,"CsnZoaUuMa");
SML.dm("DWiY65FgXJ",["CYrPuvCiTj","wzdls1o9Kk","BNhmBC31Qc","BkN3vL5jOX","CbYjzDlHSg","CeSKxcW4bq","gvWVn4JBWB","D2VJiRUxKq","DLdgTt_kCu","CZtlI9NlXS","BA-YMBSJ68","BIGAbYW0aG","hgVDyxZ2rL","CVFZT5qG1t","Bb-T49I7YR","C8CrqKCiqJ","COfLy9zygd","gMEDXxO5ap","BDMOQ0-Tf9","vhsAG6S_0w","3jd2bjBQv5","DdQ8ToexAC","CsnZoaUuMa"],(async(e,t,o,i,r,n,s,a,l)=>{function d(e,o){const{html:i}=e,r=function(e){const t={bg:"",border:""};if(e.isSctReplacementEnabled&&e.isCurrentPermalink)return{bg:"bg-neutral-background-highlighted-strong",border:"border-0 border-s border-solid border-neutral-background-gilded"};if(e.isPdpSeekerM1LO)return t;if(e.isHighlighted)return{bg:"bg-orangered-500 bg-opacity-[0.07]",border:"border-0 border-s border-solid border-global-orangered"};if(h(e))return{bg:"bg-yellow-200 bg-opacity-[0.07]",border:"border-0 border-s border-solid border-global-gold"};return t}(e),n=`Thread for ${e.author}'s comment`,s=e.ariaLabel||n;return i` <details role="article" ?open="${!e.collapsed}" @toggle="${e.handleToggle}" aria-label="${s}" tabindex="0"> <summary class="${t.j("grid grid-cols-[24px_minmax(0,1fr)]",!e.isPdpSeekerM1LO&&"xs:grid-cols-[32px_minmax(0,1fr)]",m(e)?"mt-[1px]":"")}" @click="${e.handleSummaryClick}" aria-label="${`Metadata for ${e.author}'s comment`}"> ${e.collapsed?e.uncollapseButton:i`<div class="relative"> ${m(e)?i` <div class="absolute top-[2px] start-[16px] end-0 h-full ${r.bg} pointer-events-none"></div>`:""} ${i`<slot name="commentAvatar"></slot>`} </div>`} <div class="flex relative ${m(e)?`${r.bg} rounded-tr-[0.5rem] mt-[2px] mb-[-2px]`:""}"> ${i`<slot name="commentMeta" @click="${e.handleCommentMetaSlotClick}" id="comment-meta"></slot>`} </div> </summary> <div class="${t.j("grid grid-cols-[24px_1fr] relative",!e.isPdpSeekerM1LO&&"xs:grid-cols-[32px_1fr]")}"> ${function(e){if(!e.hasMoreLink&&!e.hasRenderedComments)return"";const t=e.isPdpSeekerM1LO?"xs:w-lg":"xs:w-xl";return e.html` <div class="absolute top-0 start-0 bottom-0 w-lg ${t} flex justify-center items-center z-0 cursor-pointer group mb-sm" @mouseenter="${e.onThreadLineMouseEnter}" @mouseleave="${e.onThreadLineMouseLeave}" @click="${e.handleToggle}" aria-hidden="true"> <div data-testid="main-thread-line" class="w-[1px] h-full group-hover:bg-tone-2 ${e.isThreadLineHovered?"bg-tone-2":"bg-tone-4"}"></div> </div> `}(e)} <div class="contents"> <div class="${m(e)?"relative pointer-events-none":""}"> ${m(e)?i`<div class="absolute h-full w-[11.5px] xs:w-[15.5px] end-0 ${r.bg} ${r.border}"></div>`:""} </div> <div class="min-w-0 ${m(e)?r.bg:""}"> ${i`<slot @click="${e.handleContentSlotClick}"></slot>`} ${i`<slot name="comment-edit"></slot>`} ${function(e){if(e.isCommentDeleted||e.isInEditMode)return"";return e.html` <div class="relative"> ${e.html`<slot name="comment"></slot>`} </div> `}(e)} </div> </div> <div class="contents"> ${function(e){return"at-fold"!==e.currentTreePosition&&e.hasRenderedComments}(e)?e.collapseButton:i`<div></div>`} <div class="min-w-0 ${m(e)?`rounded-ee-[0.5rem] relative pe-sm pb-2xs mb-[1px] ${r.bg}`:""}"> ${m(e)?i` <div class="absolute top-0 start-[-12.5px] w-[11.5px] xs:start-[-16.5px] xs:w-[15.5px] h-full pointer-events-none ${r.bg} ${r.border} ${e.isSctReplacementEnabled&&e.isCurrentPermalink?"rounded-bl-[0.5rem]":""}"></div> `:""} ${i`<slot name="actionRow"></slot>`} ${i`<slot name="awardsRow"></slot>`} </div> </div> <div class="contents"> <div></div> <div class="min-w-0">${i`<slot name="next-reply"></slot>`}</div> </div> <div id="comment-children" class="contents ${e.isThreadLineHovered?"[&>.threadline>*]:border-tone-2":"[&>.threadline>*]:border-tone-4"}"> ${function(e){const{html:t,currentTreePosition:o,hasMoreLink:i,hasRenderedComments:r}=e;if(!i&&!r)return t``;if("at-fold"!==o)return t``;return t` ${c(e,{isLastRenderedNode:!0,isComment:!1})} ${t`<slot name="more-comments-permalink"></slot>`} `}(e)} ${o} </div> </div> <ac-call trigger="init" delay="10000" target="closest(shreddit-comment)" method="maybeScheduleReloadPolling"></ac-call> </details> `;}function h(e){return e.awardCount>0}function m(e){return e.isSctReplacementEnabled?e.isCurrentPermalink:!e.isPdpSeekerM1LO&&(e.isHighlighted||h(e))}function c(e,{isLastRenderedNode:t,isComment:o}){const i="box-border h-md border-0 border-tone-4 border-solid border-b-[1px] "+(t?"cursor-pointer":""),r=`${i} w-[calc(50%+0.5px)] border-s-[1px] rounded-es-[12px]`,n=`${i} w-xs absolute end-[-8px]`;return e.html` <div class="threadline flex justify-end align-start relative${t?" bg-neutral-background":" pointer-events-none"}" aria-hidden="true"> <div @mouseenter="${t?e.onThreadLineMouseEnter:void 0}" @mouseleave="${t?e.onThreadLineMouseLeave:void 0}" @click="${t?e.handleToggle:void 0}" class="${r}" data-testid="branch-line"></div> ${o?"":e.html`<div @mouseenter="${t?e.onThreadLineMouseEnter:void 0}" @mouseleave="${t?e.onThreadLineMouseLeave:void 0}" @click="${t?e.handleToggle:void 0}" class="${n}"></div>`} </div> `}var u;!function(e){e.TEXT="text",e.IMAGE="image",e.GIPHY="giphy"}(u||(u={})),SML.di("./DUE88YSoTu.js",import.meta.url,"DUE88YSoTu"),SML.di("./DP23czhiS0.js",import.meta.url,"DP23czhiS0"),SML.di("./Cc55pJeYp9.js",import.meta.url,"Cc55pJeYp9");const p=["post_detail/click/collapse_comment","post_detail/click/expand_comment","post_detail/click/reply_comment","post_detail/click/upvote_comment","post_detail/click/downvote_comment","post_detail/click/comment_image","comment/click/load_more_comments","comment/consume/comment","comment/consume/collapsed_comment","comment/view/comment","comment/view/collapsed_comment","comment/click/report","comment/click/ignore_reports","comment/click/restore_reports"],g=["FACEPLATE-IMG",...e.bx,"IMG"],T='div[slot="comment"]',b="none",v="text-neutral-content-strong bg-neutral-background overflow-visible";let E=class extends e.s{get _rplHovercards(){return this.querySelectorAll('[slot="commentAvatar"] rpl-hovercard > div:not([slot="content"]), [slot="commentMeta"] rpl-hovercard > div:not([slot="content"])')}getProps(){return{ariaLabel:this.ariaLabel,author:this.author,awardCount:this.awardCount,collapsed:this.collapsed,currentTreePosition:this.currentTreePosition,collapseButton:this.renderCollapseButton(),handleCommentMetaSlotClick:this.handleCommentMetaSlotClick,handleContentSlotClick:this.handleContentSlotClick,handleSummaryClick:this.handleSummaryClick,handleToggle:this.handleToggle,hasMoreLink:this.hasMoreLink,hasRenderedComments:this.hasRenderedComments,html:e.x,isCommentDeleted:this.isCommentDeleted,isHighlighted:this.isHighlighted,isInEditMode:this.isInEditMode,isPdpSeekerM1LO:this.isPdpSeekerM1LO,isThreadLineHovered:this.isThreadLineHovered,onThreadLineMouseEnter:this.onThreadLineMouseEnter,onThreadLineMouseLeave:this.onThreadLineMouseLeave,thingId:this.thingId,uncollapseButton:this.renderUncollapseButton(),withHotkeys:this.withHotkeys,isSctReplacementEnabled:this.isSctReplacementEnabled,isCurrentPermalink:this.isCurrentPermalink}}static get styles(){return[e.t,e.V(":host {\n  display: block;\n}\n:host([is-chosen-mq-comment]) slot[name='comment']::slotted(*) {\n  background-color: var(--color-neutral-background-selected);\n  padding-block: 8px;\n  margin-bottom: 4px;\n}\ndetails {\n  position: relative;\n}\ndetails > summary {\n  list-style: none;\n  padding-bottom: 2px;\n}\ndetails > summary:focus {\n  outline: none;\n}\ndetails > summary::-webkit-details-marker {\n  display: none;\n}\n.summary-flex {\n  display: flex;\n  margin-right: 0;\n  flex-direction: row;\n  align-items: center;\n}\nsummary > *,\n.summary-flex > * {\n  white-space: nowrap;\n}\nsummary > *,\n.summary-flex > * {\n  white-space: nowrap;\n}\n.contents {\n  padding-left: 1.75rem;\n  line-height: 1.0625rem;\n}\n:host([updateAnimation~='light']) {\n  animation: realtimeFade 3s;\n  animation-timing-function: ease-out;\n}\n:host([updateAnimation~='dark']) {\n  animation: realtimeFadeNight 3s;\n  animation-timing-function: ease-out;\n}\n@keyframes realtimeFade {\n  from {\n    background-color: #fff2bd;\n    border: 1px solid #dbaf00;\n  }\n  to {\n    background-color: #f0f5f9;\n    border: 1px solid transparent;\n  }\n}\n@keyframes realtimeFadeNight {\n  from {\n    background-color: #665505;\n    border: 1px solid #382d03;\n  }\n  to {\n    background-color: #030303;\n    border: 1px solid #343536;\n  }\n}\n")]}constructor(){super(),this.thingId="",this.avatar="",this.author="",this.parentId="",this.postId="",this.score="",this.awardCount=0,this.isAuthorDeleted=!1,this.isCommentDeleted=!1,this.isInEditMode=!1,this.depth=0,this.permalink="",this.parentPermalink="",this.isUserOP=!1,this.isHighlighted=!1,this.reloadUrl="",this.isCurrentPermalink=!1,this.contentType=u.TEXT,this.isTranslatable=!1,this.isTranslationFetched=!1,this.isCommentTranslated=!1,this.previousActionsFeature=!1,this.isSctReplacementEnabled=!1,this.collapsed=!1,this.isChosenMqComment=!1,this.updateAnimation=void 0,this.ariaLabel=null,this.isPdpSeekerM1=!1,this.isPdpSeekerM1LO=!1,this.withHotkeys=!1,this.recordTTCI=!1,this.replyPermalink="",this.updateState=void 0,this.observer=null,this.targetElement=null,this.consumeTimeoutId=void 0,this._outboundLinkTrackingController=new n.O(this,(()=>({pageType:e.N(),postId:this.postId,commentId:this.thingId}))),this.pubsub=new e.z(this),this._events=new e.E(this),this._awardController=new r.A(this,{getThingId:()=>this.thingId,onAward:()=>this.awardCount++}),this.currentTreePosition=null,this.handleHovercardTriggerClick=e=>{e.metaKey||e.preventDefault()},this.onHotkeysFocus=e=>{this.shadowRoot?.querySelector("details")?.focus(e)},this.handleObserverIntersection=o=>{o.forEach((o=>{if(o.isIntersecting){if(this.isTranslatable&&this.isTranslationV2Enabled){const t=document.querySelector(`shreddit-post[id*="${this.postId}"]`);l.o.comment(this,{id:this.thingId,parent_id:this.parentId,post_id:this.postId,score:parseInt(this.score,10)||void 0,type:"comment",created_timestamp:e.cK(this.created),content_type:this.contentType,translation_state:this.isCommentTranslated,translation_language:t?.translationLanguage})}const o={comment_id:this.thingId,comment_parent_id:this.parentId,comment_depth:this.depth};this.entityFilterId&&(o.entity_filter_id=this.entityFilterId),this.dispatchEvent(e.d("comments-viewed-event",{detail:o})),this.consumeTimeoutId=setTimeout((()=>{this.dispatchEvent(e.d("comments-consumed-event",{detail:o}))}),t.ar)}else clearTimeout(this.consumeTimeoutId)}))},this.handleCommentEvents=t=>{if(!(e=>p.includes(e.SAN))(t))return;const o=t.detail;o.comment?.id||(o.comment={...o.comment,id:this.thingId,parent_id:this.parentId,post_id:this.postId,score:parseInt(this.score,10)||void 0,type:"comment",created_timestamp:e.cK(this.created),content_type:this.contentType===u.TEXT?void 0:this.contentType},"comment/click/report"===e.bc(o)&&(o.thingId=this.thingId,o.permalink=this.permalink))},this.handleSummaryClick=e=>{e.fromCommentMeta&&"A"!==e.target.tagName&&!e.target.closest("a")&&e.preventDefault()},this.handleCommentMetaSlotClick=e=>{e.fromCommentMeta="commentMeta"!==e.target.slot},this.handleMoreButtonClick=o=>{this.pubsub.publish(e.T.TriggerCommentBlockingAuth,{source:s.C.Button}),e.k(this,t.bj());const i=o.currentTarget;i?.addEventListener("faceplate-response",(()=>{const e=new MutationObserver((t=>{t.some((e=>Array.from(e.removedNodes).some((e=>e===i))))&&(this.updateChildren(),e.disconnect())}));e.observe(this,{childList:!0})}))},this.handleContentSlotClick=o=>{if(o.target&&this.contentType!==u.TEXT){const i=o.target.tagName;g.includes(i)&&e.k(this,t.bk())}},this.handleReload=e=>{e.stopPropagation(),this.reload()},this.handleCommentCreated=({parentThingId:t,body:o})=>{if(t!==this.thingId)return;if(!o)return;const i=e.bl(o).find((e=>"shreddit-comment"===e.tagName.toLowerCase()));i&&(i.setAttribute("slot","children"),i.setAttribute("depth",(this.depth+1).toString()),i.removeAttribute("class"),this.append(i),this.updateChildren())},this.convertCommentToDeleted=({commentId:e})=>{this.thingId===e&&(this.hideCommentActionRow(),this.hideOpIcon(),this.replaceCommentAuthorWithDeletedText(),this.hideCommentContent())},this.hideOpIcon=()=>{const e=this.querySelector('div[slot="commentMeta"] > span > .comment-op-icon-js');e&&(e.style.display=b)},this.hideCommentActionRow=()=>{const e=this.querySelector("shreddit-comment-action-row");e&&(e.style.display=b)},this.replaceCommentAuthorWithDeletedText=()=>{const e=this.querySelector('div[slot="commentMeta"] .author-name-meta');e&&e.replaceWith(this.getDeletedAuthorHTML())},this.hideCommentContent=()=>{const e=this.querySelector(T);e&&(e.style.display=b)},this.hasRenderedComments=!1,this.hasMoreLink=!1,this._children=null,this.unsubscribeFaceplateRequestListeners=[],this.isThreadLineHovered=!1,this.onThreadLineMouseEnter=()=>{this.isThreadLineHovered=!0,this.requestUpdate()},this.onThreadLineMouseLeave=()=>{this.isThreadLineHovered=!1,this.requestUpdate()},this.addEventListener("faceplate-track",this.handleCommentEvents),this.addEventListener("reload-shreddit-comment",this.handleReload),this._events.define("click",(e=>{const t=e.composedPath().find((e=>e.hasAttribute?.("data-more-comments-partial-id")));t&&t.querySelectorAll("icon-load").forEach((e=>e.classList.add("animate-spin")))}))}get hasAwardedTreatment(){return this.awardCount>0}get isCommentHighlighted(){return this.isSctReplacementEnabled?this.isCurrentPermalink:this.isHighlighted||this.hasAwardedTreatment}getReplyPermalink(){const e=new URL(location.origin+this.permalink);return e.searchParams.set("reply",this.thingId),e.searchParams.set(n.b.ForceLegacySCT,"1"),e.href.substring(e.origin.length)}setVisibility(e=Number.POSITIVE_INFINITY,t){const o=this.querySelector("shreddit-comment[is-chosen-mq-comment]")||this.closest("shreddit-comment[is-chosen-mq-comment]"),i=e-(this.depth+1);this.replyPermalink=0===i?this.getReplyPermalink():"";const r=!!o&&"number"==typeof t&&this.depth>=e&&this.depth<=t,n=this.currentTreePosition;this.currentTreePosition=o&&"number"==typeof t?!r&&this.depth<t?"hidden-above-fold":this.depth<e-1?"above-fold":this.depth===e-1?"at-fold":"below-fold":i>0?"above-fold":0===i?"at-fold":"below-fold",null!==n&&n===this.currentTreePosition||(this.style.display="below-fold"===this.currentTreePosition?"none":"",this.ariaHidden="below-fold"===this.currentTreePosition?"true":"false",this.updateChildren())}async setInitialVisibility(){customElements.get("shreddit-comment-tree")||(await window.customElements.whenDefined("shreddit-comment-tree"));const e=this.closest("shreddit-comment-tree");let t=e?.visibilityDetails;null===t&&e?.depthUpdated&&(t=await e.depthUpdated),this.setVisibility(t?.maxVisibleDepth,t?.minVisibleDepth)}connectedCallback(){super.connectedCallback(),this.initObserver(),this.setInitialVisibility(),this.isUserOP&&this.pubsub.subscribe(e.T.CommentDeleted,this.convertCommentToDeleted),this.pubsub.subscribe(e.T.CommentCreated,this.handleCommentCreated),this.addEventListener(t.bl,this.resetToReadMode),this.addEventListener(t.bm,this.resetToReadMode),this.addEventListener("comment-animation-trigger",this.handleTriggerAnimation),this._rplHovercards?.forEach((e=>{e.addEventListener("click",this.handleHovercardTriggerClick)})),this.recordTTCI&&e.fC()&&requestAnimationFrame((()=>{const t=e.fD(performance.now());t&&e.k(this,t)}))}async scrollToFocusedComment(){this.updateComplete.then((async()=>{await requestAnimationFrame((()=>{a.a((()=>{window.dispatchEvent(e.d(a.E))}));const t=document.querySelector("nav")?.offsetHeight??0,o=document.getElementById("pdp-seeker-mweb-return-to-results")?.offsetHeight??0,i=document.querySelector("shreddit-comments-page-tools, comment-body-header"),r=this.querySelector('[slot="actionRow"]');if(!r||!i)return;const n=r.getBoundingClientRect().bottom,s=i.getBoundingClientRect().top;Math.abs(n-s)<window.innerHeight-(t+o)?a.s("instant"):r.scrollIntoView({behavior:"instant",block:"center"})}))}))}firstUpdated(){this.querySelector(T)?.addEventListener("click",this.handleContentSlotClick),this.isChosenMqComment&&this.updateComplete.then((()=>{setTimeout((()=>{const e=document.getElementById("mod-queue-pdp-panel");if(!e)return;const t=this.getBoundingClientRect().top-48-window.innerHeight/2,o=document.getElementsByTagName("shreddit-comment-tree")[0]||this;e?.scrollTop>o?.getBoundingClientRect().top||e.scrollTo({top:t,behavior:"auto"})}),200)})),this.isSctReplacementEnabled&&this.isCurrentPermalink&&this.updateComplete.then((()=>this.scrollToFocusedComment()))}disconnectedCallback(){super.disconnectedCallback(),this.disconnectObserver(),this.clearConsumeTimeout(),this.removeEventListener(t.bl,this.resetToReadMode),this.removeEventListener(t.bm,this.resetToReadMode),this.removeEventListener("comment-animation-trigger",this.handleTriggerAnimation),this._rplHovercards?.forEach((e=>{e.removeEventListener("click",this.handleHovercardTriggerClick)}))}get shredditComposer(){return this.querySelector("shreddit-composer")}get shareButton(){return this.querySelector("[slot=actionRow]")?.querySelector("shreddit-comment-share-button")}get overlowMenuItemProps(){return this.querySelector("shreddit-overflow-menu")?.getMenuItemProps()}get commentActionRow(){return this.querySelector("shreddit-comment-action-row")}handleTriggerAnimation(e){this.updateState=e.detail,this.triggerRealtimeUpdateAnimation()}triggerRealtimeUpdateAnimation(){const t=e.ab();this.updateAnimation=t?"dark":"light",this.updateState=void 0,setTimeout((()=>{this.updateAnimation=void 0}),3e3)}clearConsumeTimeout(){this.consumeTimeoutId&&(clearTimeout(this.consumeTimeoutId),this.consumeTimeoutId=void 0)}maybeScheduleReloadPolling(){this.reloadPollingIntervalMs&&this.reloadPollingDurationMs&&this.reloadPollingDurationMs>0&&this.reload()}async reload({richTextMedia:o,includeTranslation:i}={}){if(!this.reloadUrl||!this.parentNode)return!1;const r=new URL(location.origin+this.reloadUrl);o&&r.searchParams.set("richTextMedia",o),i&&r.searchParams.set("includeTranslation","true"),this.reloadPollingDurationMs&&this.reloadPollingIntervalMs&&r.searchParams.set(t.bn,(this.reloadPollingDurationMs-(this.reloadPollingIntervalMs+100)).toString()),this.slot&&r.searchParams.set("slot",this.slot);const n=this.parentNode,s=document.createElement("faceplate-partial");s.setAttribute("loading",e.C.Programmatic),s.setAttribute("src",r.href.substring(r.origin.length)),s.setAttribute("slot","children");const a=this.slot;s.slot=a,n.insertBefore(s,this),this.slot="";const l=this.querySelector('[slot="actionRow"]'),d="SHREDDIT-COMMENT-ACTION-ROW"===l?.tagName?l:l?.querySelector("shreddit-comment-action-row"),h=d?.isCommentComposerActive??!1;s.appendChild(this);const m=this.querySelectorAll(":scope > [slot^=children]");e.fE(s),await s.load();const c=n.querySelector(`shreddit-comment[thingid=${this.thingId}]`);if(!0===h&&null!=l){const e=c?.querySelector('[slot="actionRow"]');e?.replaceWith(l)}if(m.length>0){for(const e of m)c?.appendChild(e);c&&(c.slot=a,c.updateChildren())}return!0}initObserver(){this.targetElement=this.querySelector('div[slot="comment"]'),this.targetElement&&(this.observer=new IntersectionObserver(this.handleObserverIntersection,{root:null,threshold:.5}),this.observer.observe(this.targetElement))}addTranslationToggledObserver(e){this.targetElement=this.querySelector(e),this.targetElement&&this.observer&&this.observer.observe(this.targetElement)}disconnectObserver(){this.observer&&(this.clearConsumeTimeout(),this.observer.disconnect())}handleToggle(e){!e.target.open!==this.collapsed&&this.handleCollapse()}handleCollapse(){this.collapsed=!this.collapsed,e.k(this,this.collapsed?t.bo():t.bp())}resetToReadMode(){this.removeAttribute("edit-mode"),this.querySelector("shreddit-comment-action-row")?.classList.remove("hidden");let o=`${t.bq}?commentId=${this.thingId}`;this.isCommentTranslated&&(o=e.c9(o,"isTranslated","true"));const i=e.fA("faceplate-partial",{id:`comment-${this.thingId}-edit-partial`,src:o,loading:e.C.Programmatic}),r=e.fA("faceplate-shimmer",{class:"h-[100px] w-full hidden",shape:"pill"});i.appendChild(r),this.querySelector(`[slot="comment-${this.thingId}-edit"]`)?.replaceWith(i)}renderCollapseButton(){const r=t.j("flex justify-center self-start py-[2px] bg-neutral-background relative",this.isPdpSeekerM1?"mt-[2px]":"mt-[6px]");return e.x` <div class="${r}"> ${e.u({appearance:"plain",attributes:{onclick:this.handleCollapse,className:t.j(v,this.isCommentHighlighted?"!w-md h-md relative z-1":"w-md h-md"),"aria-expanded":this.collapsed?"false":"true","aria-label":"Toggle Comment Thread","aria-controls":"comment-children"},leadingIcon:this.collapsed?o.a({size:e.I.Small}):i.s({size:e.I.Small}),size:e.v.Small})} </div> `}renderUncollapseButton(){return e.x` <div class="flex justify-center"> ${e.u({appearance:"plain",attributes:{onclick:this.handleCollapse,className:t.j(v,"w-lg xs:w-xl h-xl xs:h-[40px]")},leadingIcon:o.a({size:e.I.Small}),size:e.v.Small})} </div> `}getDeletedAuthorHTML(){const e=document.createElement("div");e.classList.add("flex","flex-row","items-center","overflow-hidden");const o=document.createElement("faceplate-tracker");o.setAttribute("source","post_detail"),o.setAttribute("action","click"),o.setAttribute("noun","comment_deleted_author"),o.classList.add("contents");const i=document.createElement("span");return i.classList.add("truncate","font-bold","hover:no-underline"),i.classList.add("text-neutral-content-strong","text-12"),i.innerText=t.D(),o.appendChild(i),e.appendChild(o),e}renderCommentBody(){return this.isCommentDeleted||this.isInEditMode?"":e.x` <div class="relative"> <slot name="comment"></slot> </div> `}renderChildren(e,{forceUpdate:t}={}){if(this._children&&!t)return"above-fold"===this.currentTreePosition||"hidden-above-fold"===this.currentTreePosition?this._children:[];const o=Array.from(this.querySelectorAll(':scope > [slot^="children"]'));if(this.hasRenderedComments=o.some((e=>"shreddit-comment"===e.tagName.toLowerCase())),this.hasMoreLink=o.some((e=>"shreddit-comment"!==e.tagName.toLowerCase())),"above-fold"!==this.currentTreePosition&&"hidden-above-fold"!==this.currentTreePosition)return[];this.unsubscribeFaceplateRequestListeners.forEach((e=>e())),this.unsubscribeFaceplateRequestListeners=[];const i=[];this._children=[];for(let e=0;e<o.length;e++){const t=o[e],r="shreddit-comment"===t.tagName.toLowerCase(),n="faceplate-partial"===t.tagName.toLowerCase();i.push(r);const s=`children-${this.thingId}-${e}`;t.slot=s,n&&(t.addEventListener("faceplate-request",this.handleMoreButtonClick),this.unsubscribeFaceplateRequestListeners.push((()=>{t.removeEventListener("faceplate-request",this.handleMoreButtonClick)})))}return this._children=function(e,t){const{html:o,currentTreePosition:i}=e;if("above-fold"!==i&&"hidden-above-fold"!==i)return[];const r=[];for(let i=0;i<t.length;i++){const n=i===t.length-1,s=t[i],a=`children-${e.thingId}-${i}`;r.push(c(e,{isLastRenderedNode:n,isComment:s})),r.push(o`<slot name="${a}"></slot>`)}return r}(e,i),this._children}updateChildren(){this.renderChildren(this.getProps(),{forceUpdate:!0}),this.requestUpdate()}render(){const e=this.renderChildren(this.getProps());return"hidden-above-fold"===this.currentTreePosition?e:d(this.getProps(),e)}};return e._([e.n({type:String})],E.prototype,"thingId",void 0),e._([e.n({type:String})],E.prototype,"avatar",void 0),e._([e.n({type:String})],E.prototype,"author",void 0),e._([e.n({type:String})],E.prototype,"created",void 0),e._([e.n({type:String})],E.prototype,"parentId",void 0),e._([e.n({type:String})],E.prototype,"postId",void 0),e._([e.n({type:String})],E.prototype,"score",void 0),e._([e.n({type:Number,attribute:"award-count",reflect:!0})],E.prototype,"awardCount",void 0),e._([e.n({type:Boolean,attribute:"is-author-deleted"})],E.prototype,"isAuthorDeleted",void 0),e._([e.n({type:Boolean,attribute:"is-comment-deleted"})],E.prototype,"isCommentDeleted",void 0),e._([e.n({type:Boolean,attribute:"edit-mode"})],E.prototype,"isInEditMode",void 0),e._([e.n({type:Number})],E.prototype,"depth",void 0),e._([e.n({type:String})],E.prototype,"permalink",void 0),e._([e.n({type:String,attribute:"parent-permalink"})],E.prototype,"parentPermalink",void 0),e._([e.n({type:Boolean,attribute:"is-user-op"})],E.prototype,"isUserOP",void 0),e._([e.n({type:Boolean,attribute:"is-highlighted"})],E.prototype,"isHighlighted",void 0),e._([e.n({type:String,attribute:"reload-url"})],E.prototype,"reloadUrl",void 0),e._([e.n({type:Boolean,attribute:"is-current-permalink"})],E.prototype,"isCurrentPermalink",void 0),e._([e.n({type:String,attribute:"content-type"})],E.prototype,"contentType",void 0),e._([e.n({type:Boolean,attribute:"is-translatable"})],E.prototype,"isTranslatable",void 0),e._([e.n({type:Boolean,attribute:"is-translation-fetched"})],E.prototype,"isTranslationFetched",void 0),e._([e.n({type:Boolean,attribute:"is-comment-translated",reflect:!0})],E.prototype,"isCommentTranslated",void 0),e._([e.n({type:Boolean,attribute:"is-translation-v2-enabled"})],E.prototype,"isTranslationV2Enabled",void 0),e._([e.n({type:String,attribute:"moderation-verdict"})],E.prototype,"moderationVerdict",void 0),e._([e.n({type:Boolean,attribute:"previous-actions-feature"})],E.prototype,"previousActionsFeature",void 0),e._([e.n({type:Boolean,attribute:"sct-replacement-enabled"})],E.prototype,"isSctReplacementEnabled",void 0),e._([e.n({type:Number,attribute:"reload-polling-interval-ms"})],E.prototype,"reloadPollingIntervalMs",void 0),e._([e.n({type:Number,attribute:"reload-polling-duration-ms"})],E.prototype,"reloadPollingDurationMs",void 0),e._([e.n({type:Boolean,reflect:!0})],E.prototype,"collapsed",void 0),e._([e.n({type:Boolean,attribute:"is-chosen-mq-comment"})],E.prototype,"isChosenMqComment",void 0),e._([e.n({type:String,reflect:!0})],E.prototype,"updateAnimation",void 0),e._([e.n({type:String})],E.prototype,"ariaLabel",void 0),e._([e.n({type:String,attribute:"entity-filter-id",reflect:!0})],E.prototype,"entityFilterId",void 0),e._([e.n({type:Boolean,attribute:"is-pdp-seeker-m1"})],E.prototype,"isPdpSeekerM1",void 0),e._([e.n({type:Boolean,attribute:"is-pdp-seeker-m1-lo"})],E.prototype,"isPdpSeekerM1LO",void 0),e._([e.n({type:Boolean,attribute:"with-hotkeys"})],E.prototype,"withHotkeys",void 0),e._([e.n({type:Boolean,attribute:"record-ttci"})],E.prototype,"recordTTCI",void 0),e._([e.n({type:String,attribute:"reply-permalink",reflect:!0})],E.prototype,"replyPermalink",void 0),e._([e.j()],E.prototype,"updateState",void 0),E=e._([e.e("shreddit-comment")],E),{get C(){return u}}}));
SML.di("./CYrPuvCiTj.js",import.meta.url,"CYrPuvCiTj");SML.di("./wzdls1o9Kk.js",import.meta.url,"wzdls1o9Kk");
SML.dm("DXjVR1zY8s",["CYrPuvCiTj","wzdls1o9Kk"],(async(e,t)=>{const o=e.s;let s=class extends o{constructor(){super(...arguments),this.commentComposer=null,this.addCommentButton=null,this._events=new e.E(this),this.handleCommentPost=this._events.define(t.bQ,(()=>{const e=this.querySelector("#empty-comments-banner");e&&(e.classList.add("hidden"),e.ariaHidden="true")})),this.handleCommentSearchToggle=e=>{this.commentComposer?.classList.toggle("hidden",e.detail.isHidden),this.addCommentButton?.classList.toggle("hidden",e.detail.isHidden)}}firstUpdated(){this.commentComposer=this.querySelector(`${e.cr.commentComposerHost}`),this.addCommentButton=this.querySelector(e.cr.addCommentButton)}render(){return e.x` <faceplate-tracker source="post_detail" action="view" noun="comment_body_header"> <slot @pdp-comment-search-toggle="${this.handleCommentSearchToggle}"> </slot> </faceplate-tracker> `}};return s=e._([e.e("comment-body-header")],s),{get CommentBodyHeader(){return s}}}));
SML.di("./CYrPuvCiTj.js",import.meta.url,"CYrPuvCiTj");
SML.dm("DcAGZFIp9W",["CYrPuvCiTj"],(async e=>{const t=1e4,r=e=>{const t=performance.getEntriesByName(e,"mark");return t.length>0?t.at(-1):null};class s{constructor(){this.promise=new Promise(((e,t)=>{this.resolve=e,this.reject=t}))}}let i=null,n=null;const o=()=>(n||(i=new s,n=new PerformanceObserver((e=>{i.resolve(e),i=new s})),n.observe({entryTypes:["mark"]})),i.promise),a=async(e,t=1e4)=>{const s=r(e);if(s)return s;const i=new Promise(((r,s)=>{setTimeout((()=>{s(new Error(`Timeout waiting for performance mark '${e}' after ${t}ms`))}),t)}));return Promise.race([(async()=>{for(;;){const t=await o();for(const r of t.getEntries())if(r.name===e&&"mark"===r.entryType)return r}})(),i])};const m=async({setTimestamp:r,options:s})=>{const i=s?.timeout??t,n=await a(e.cf,i),o=await a(e.cg,i),m=e.N()===e.ar.PostDetail,c=e.g(),l=document.querySelector("shreddit-composer, shreddit-simple-composer");if(m&&c&&l){const t=await a(e.ch,i);r("composer_complete_ms",t.startTime),r("comment_complete_ms",Math.max(o.startTime,n.startTime,t.startTime))}else r("comment_complete_ms",Math.max(n.startTime,o.startTime));return Promise.resolve()},c=async({setTimestamp:r,setAttribute:s,options:i})=>{const n=i?.timeout??t,o=await a(e.cj,n),m=await a(e.ck,n);return r("post_vote_complete_ms",m.startTime),r("post_content_complete_ms",o.startTime),r("post_complete_ms",Math.max(o.startTime,m.startTime)),s("post_content_media_type",o.detail?.mediaType??e.ci.UNKNOWN),Promise.resolve()},l={elements:[{selector:"shreddit-post",checker:c},{selector:'faceplate-partial[name^="TopComments_"], shreddit-comment-tree',checker:m,options:{onlyInViewport:!1}}],timestamps:e.cl,attributes:e.cm},h={elements:[{selector:"shreddit-post",checker:c},{selector:'faceplate-partial[name^="TopCommentsPermalink_"], shreddit-comment-tree',checker:m,options:{onlyInViewport:!1}}],timestamps:e.cl,attributes:e.cm},u={[e.ar.PostDetail]:l,[e.ar.SingleCommentThread]:h};let p=class extends e.s{constructor(){super(),this.name="",this.timestamps={},this.trackedAttributes={},this.hasBeenTracked=!1,this.elementConfigs=new Map}connectedCallback(){if(super.connectedCallback(),this.hasBeenTracked)return;const t=document.querySelector("shreddit-app");if(!t?.isNavigationControllerRestore&&!e.cn()&&!t?.isBot){if(!this.name)throw new Error("CUJ Tracker: Unable to determine config name");if(!this.noun)throw new Error("CUJ Tracker: noun attribute is required");this.registerElements(),this.startTracking()}}registerElements(){const e=u[this.name];if(!e)throw new Error(`CUJ Tracker: No configuration found for config name "${this.name}"`);e.elements.forEach((e=>{this.addElement(e.selector,e.checker,"options"in e?e.options:void 0)}))}async startTracking(){const e=await this.getElementsToTrack();if(!e.length)return void this.onCUJFail(new Error("No elements to track"));const t=e.map((e=>this.createReadinessPromise(e)));try{await Promise.all(t),this.onCUJReady()}catch(e){this.onCUJFail(e)}}addElement(e,r,s){const i={element:document.querySelector(e),checker:r,timeout:t,onlyInViewport:!0,...s};return this.elementConfigs.set(e,i),this}createReadinessPromise(e){const t=this.elementConfigs.get(e);if(!t)throw new Error(`Element ${e} not registered for CUJ reporting`);const r=new Promise(((r,s)=>{setTimeout((()=>{s(new Error(`Element ${e} readiness timeout after ${t.timeout}ms`))}),t.timeout+300)})),s=t.checker({setTimestamp:(e,t)=>{this.timestamps[e]=t},setAttribute:(e,t)=>{this.trackedAttributes[e]=t},options:{timeout:t.timeout}});return Promise.race([s,r])}convertHighPrecisionTimestampToInt(e){return Math.round(e)}getAdjustedTimestamps(e){const t=e?e.startTime:0;return Object.fromEntries(Object.entries(this.timestamps).filter((([,e])=>void 0!==e)).map((([e,r])=>[e,this.convertHighPrecisionTimestampToInt(r-t)])))}getTimeToComplete(e){return Math.max(...Object.values(e))}onCUJReady(){this.hasBeenTracked=!0;const t=r("InternalNavigationStart"),s=this.getAdjustedTimestamps(t),i=this.getTimeToComplete(s),n=!!t;e.k(this,e.c({source:e.cp,action:e.cq,noun:this.noun},{status:e.co.SUCCESS,time_to_complete_ms:i,pdp_metrics:{web_pdp_metrics:{is_hybrid_nav:n,...s,...this.trackedAttributes}}}))}onCUJFail(t){this.hasBeenTracked=!0,e.k(this,e.c({source:e.cp,action:e.cq,noun:this.noun},{status:e.co.FAIL,failure_reason:t instanceof Error?t.message:String(t)}))}async getElementsToTrack(){return new Promise((e=>{requestAnimationFrame((()=>{const t=Array.from(this.elementConfigs.keys()).filter((e=>{const t=document.querySelector(e);if(!t)return!1;const r=this.elementConfigs.get(e);return!!r&&function(e,t={}){const{checkInViewport:r=!0,requireVisible:s=!1}=t,i=e.getBoundingClientRect(),n=window.innerHeight||document.documentElement.clientHeight,o=window.innerWidth||document.documentElement.clientWidth;let a=!0;if(r){const e=i.bottom>0&&i.right>0&&i.top<n&&i.left<o;a=a&&e}if(s){const t=window.getComputedStyle(e),r=i.width>0&&i.height>0&&"none"!==t.display&&"hidden"!==t.visibility&&"0"!==t.opacity;a=a&&r}return a}(t,{checkInViewport:r.onlyInViewport,requireVisible:r.requireVisible??!1})}));e(t)}))}))}};e._([e.n({type:String,attribute:"name"})],p.prototype,"name",void 0),e._([e.n({type:String,attribute:"noun"})],p.prototype,"noun",void 0),p=e._([e.e("cuj-tracker")],p)}));
SML.di("./CYrPuvCiTj.js",import.meta.url,"CYrPuvCiTj");
SML.di("./CYrPuvCiTj.js",import.meta.url,"CYrPuvCiTj");SML.di("./OlPU10fC99.js",import.meta.url,"OlPU10fC99");SML.di("./DZiuwGhNTP.js",import.meta.url,"DZiuwGhNTP");SML.di("./mllHpUI322.js",import.meta.url,"mllHpUI322");SML.di("./CBp0iHQU2Y.js",import.meta.url,"CBp0iHQU2Y");SML.di("./DY06Z17Odk.js",import.meta.url,"DY06Z17Odk");SML.di("./B3dw1Rvtje.js",import.meta.url,"B3dw1Rvtje");SML.di("./BA-YMBSJ68.js",import.meta.url,"BA-YMBSJ68");SML.di("./DexfRc7sX8.js",import.meta.url,"DexfRc7sX8");SML.di("./CmYKFGzQfS.js",import.meta.url,"CmYKFGzQfS");SML.di("./BcLz9SQAFR.js",import.meta.url,"BcLz9SQAFR");SML.di("./Ba1OdyQt-v.js",import.meta.url,"Ba1OdyQt-v");SML.di("./DTFTCiYeLz.js",import.meta.url,"DTFTCiYeLz");SML.di("./wzdls1o9Kk.js",import.meta.url,"wzdls1o9Kk");SML.di("./CZtlI9NlXS.js",import.meta.url,"CZtlI9NlXS");SML.di("./DuqlmJMEve.js",import.meta.url,"DuqlmJMEve");SML.di("./CEf2DD9Ins.js",import.meta.url,"CEf2DD9Ins");SML.di("./B39chFHLCe.js",import.meta.url,"B39chFHLCe");SML.di("./DGkwklwWNC.js",import.meta.url,"DGkwklwWNC");SML.di("./DgaC1xItoR.js",import.meta.url,"DgaC1xItoR");SML.di("./CaC8XqiTGs.js",import.meta.url,"CaC8XqiTGs");SML.di("./DJJ9sof-xv.js",import.meta.url,"DJJ9sof-xv");SML.di("./B6C_8s9j0g.js",import.meta.url,"B6C_8s9j0g");SML.di("./BpkEtnKDO3.js",import.meta.url,"BpkEtnKDO3");SML.di("./B5-3_kcphz.js",import.meta.url,"B5-3_kcphz");SML.di("./CCzrQmnfhp.js",import.meta.url,"CCzrQmnfhp");SML.di("./By2sopqXTk.js",import.meta.url,"By2sopqXTk");SML.di("./DG0S1MfCCq.js",import.meta.url,"DG0S1MfCCq");SML.di("./rxXg4kAY8P.js",import.meta.url,"rxXg4kAY8P");SML.di("./DkWJZxM_zm.js",import.meta.url,"DkWJZxM_zm");SML.di("./005PrA1Byk.js",import.meta.url,"005PrA1Byk");SML.di("./B9Z38jXwJn.js",import.meta.url,"B9Z38jXwJn");SML.di("./C7tY_fu9Em.js",import.meta.url,"C7tY_fu9Em");SML.di("./BGnZpZ200J.js",import.meta.url,"BGnZpZ200J");SML.di("./Hw1PFKH8z9.js",import.meta.url,"Hw1PFKH8z9");SML.di("./B58tzg41t5.js",import.meta.url,"B58tzg41t5");SML.di("./DcxJbk2B3f.js",import.meta.url,"DcxJbk2B3f");SML.di("./HQokY_KEgH.js",import.meta.url,"HQokY_KEgH");SML.di("./41znR01Ful.js",import.meta.url,"41znR01Ful");SML.di("./D1jB1lRGDu.js",import.meta.url,"D1jB1lRGDu");SML.di("./pihWhdUG1Q.js",import.meta.url,"pihWhdUG1Q");SML.di("./BHY4TeT-gy.js",import.meta.url,"BHY4TeT-gy");SML.di("./CbYjzDlHSg.js",import.meta.url,"CbYjzDlHSg");SML.di("./CVFZT5qG1t.js",import.meta.url,"CVFZT5qG1t");SML.di("./Bv2UEnJP_M.js",import.meta.url,"Bv2UEnJP_M");SML.di("./CmAn0qma3f.js",import.meta.url,"CmAn0qma3f");SML.di("./Cv3__sHJQf.js",import.meta.url,"Cv3__sHJQf");SML.di("./Cb0u53dVtj.js",import.meta.url,"Cb0u53dVtj");SML.di("./CeSKxcW4bq.js",import.meta.url,"CeSKxcW4bq");SML.di("./Bs45UeNO_W.js",import.meta.url,"Bs45UeNO_W");SML.di("./Bb-T49I7YR.js",import.meta.url,"Bb-T49I7YR");SML.di("./G2F6lxYj4X.js",import.meta.url,"G2F6lxYj4X");SML.di("./CEkHpZAUVH.js",import.meta.url,"CEkHpZAUVH");SML.di("./BtqmVQuPYp.js",import.meta.url,"BtqmVQuPYp");SML.di("./C8CrqKCiqJ.js",import.meta.url,"C8CrqKCiqJ");SML.di("./BjEk0JHhrS.js",import.meta.url,"BjEk0JHhrS");SML.di("./DbgtMUjGRq.js",import.meta.url,"DbgtMUjGRq");SML.di("./BKIc7C4NNc.js",import.meta.url,"BKIc7C4NNc");SML.di("./CMNh7Qm-HC.js",import.meta.url,"CMNh7Qm-HC");SML.di("./CA7qO1Exxg.js",import.meta.url,"CA7qO1Exxg");SML.di("./zQvYWz_gjh.js",import.meta.url,"zQvYWz_gjh");SML.di("./CkEEx5T_uL.js",import.meta.url,"CkEEx5T_uL");SML.di("./BoQssu-hw1.js",import.meta.url,"BoQssu-hw1");SML.di("./D2VJiRUxKq.js",import.meta.url,"D2VJiRUxKq");SML.di("./CcWrGyc4YB.js",import.meta.url,"CcWrGyc4YB");SML.di("./ByPeQQGJ36.js",import.meta.url,"ByPeQQGJ36");SML.di("./DLdgTt_kCu.js",import.meta.url,"DLdgTt_kCu");SML.di("./Cszz6xIhIJ.js",import.meta.url,"Cszz6xIhIJ");SML.di("./BO1LrDxm4o.js",import.meta.url,"BO1LrDxm4o");SML.di("./CA_3X1MrHP.js",import.meta.url,"CA_3X1MrHP");SML.di("./B2_754HZA-.js",import.meta.url,"B2_754HZA-");SML.di("./BDCIgAVnes.js",import.meta.url,"BDCIgAVnes");SML.di("./Cv4uyJM28X.js",import.meta.url,"Cv4uyJM28X");SML.di("./D61rLtGDFy.js",import.meta.url,"D61rLtGDFy");SML.di("./CdUaC_ScVb.js",import.meta.url,"CdUaC_ScVb");SML.di("./NKGs0TL7Ol.js",import.meta.url,"NKGs0TL7Ol");SML.di("./D6195OvUrb.js",import.meta.url,"D6195OvUrb");SML.di("./BNh_w6AGE-.js",import.meta.url,"BNh_w6AGE-");SML.di("./fqQLNYfMji.js",import.meta.url,"fqQLNYfMji");SML.di("./DGvV9ljiFl.js",import.meta.url,"DGvV9ljiFl");SML.di("./Xj9Z_fzyKi.js",import.meta.url,"Xj9Z_fzyKi");SML.di("./CYTfL7o2sC.js",import.meta.url,"CYTfL7o2sC");
SML.dm("K1G-5GdzNE",["CYrPuvCiTj","OlPU10fC99","DZiuwGhNTP","mllHpUI322","CBp0iHQU2Y","DY06Z17Odk","B3dw1Rvtje","BA-YMBSJ68","DexfRc7sX8","CmYKFGzQfS","BcLz9SQAFR","Ba1OdyQt-v","DTFTCiYeLz","wzdls1o9Kk","CZtlI9NlXS","DuqlmJMEve","CEf2DD9Ins","B39chFHLCe","DGkwklwWNC","DgaC1xItoR","CaC8XqiTGs","DJJ9sof-xv","B6C_8s9j0g","BpkEtnKDO3","B5-3_kcphz","CCzrQmnfhp","By2sopqXTk","DG0S1MfCCq","rxXg4kAY8P","DkWJZxM_zm","005PrA1Byk","B9Z38jXwJn","C7tY_fu9Em","BGnZpZ200J","Hw1PFKH8z9","B58tzg41t5","DcxJbk2B3f","HQokY_KEgH","41znR01Ful","D1jB1lRGDu","pihWhdUG1Q","BHY4TeT-gy","CbYjzDlHSg","CVFZT5qG1t","Bv2UEnJP_M","CmAn0qma3f","Cv3__sHJQf","Cb0u53dVtj","CeSKxcW4bq","Bs45UeNO_W","Bb-T49I7YR","G2F6lxYj4X","CEkHpZAUVH","BtqmVQuPYp","C8CrqKCiqJ","BjEk0JHhrS","DbgtMUjGRq","BKIc7C4NNc","CMNh7Qm-HC","CA7qO1Exxg","zQvYWz_gjh","CkEEx5T_uL","BoQssu-hw1","D2VJiRUxKq","CcWrGyc4YB","ByPeQQGJ36","DLdgTt_kCu","Cszz6xIhIJ","BO1LrDxm4o","CA_3X1MrHP","B2_754HZA-","BDCIgAVnes","Cv4uyJM28X","D61rLtGDFy","CdUaC_ScVb","NKGs0TL7Ol","D6195OvUrb","BNh_w6AGE-","fqQLNYfMji","DGvV9ljiFl","Xj9Z_fzyKi","CYTfL7o2sC"],(async E=>{E.g()&&SML.di("./DOqL22Z8Mq.js",import.meta.url,"DOqL22Z8Mq")}));
SML.di("./CYrPuvCiTj.js",import.meta.url,"CYrPuvCiTj");SML.di("./3EH0PElp1F.js",import.meta.url,"3EH0PElp1F");
SML.dm("RYEovDwKcl",["CYrPuvCiTj","3EH0PElp1F"],(async(e,t)=>{let a=class extends e.s{constructor(){super(...arguments),this.replaceItselfWithChildren=()=>{this.replaceWith(...this.childNodes)}}render(){return e.x`<div class="mx-md xs:mx-0"> <div class="items-center justify-between flex flex-row py-sm px-md w-100 bg-neutral-background border-neutral-border rounded-2 border-solid border box-border"> <div> ${t.b({size:e.I.Medium,attributes:{className:"align-middle mr-2xs"}})} <span class="text-neutral-content-weak"> ${"Posted by a blocked account"} </span> </div> ${e.u({appearance:"secondary",size:e.v.Small,attributes:{rel:"nofollow",id:"primary-button",onclick:this.replaceItselfWithChildren},children:"View Post"})} </div> </div>`;}};a.styles=[e.t],a=e._([e.e("shreddit-blocked-post-content")],a)}));
SML.di("./CYrPuvCiTj.js",import.meta.url,"CYrPuvCiTj");SML.di("./Bd5EL7RuVw.js",import.meta.url,"Bd5EL7RuVw");SML.di("./D2-YkDs3Od.js",import.meta.url,"D2-YkDs3Od");SML.di("./B74fdX6mon.js",import.meta.url,"B74fdX6mon");SML.di("./BvU2E9FwXI.js",import.meta.url,"BvU2E9FwXI");SML.di("./zWWS8JSAAa.js",import.meta.url,"zWWS8JSAAa");SML.di("./DAeuL7zDX0.js",import.meta.url,"DAeuL7zDX0");SML.di("./BG_G1Cif8U.js",import.meta.url,"BG_G1Cif8U");SML.di("./DdQ8ToexAC.js",import.meta.url,"DdQ8ToexAC");SML.di("./BEOg1WTiXx.js",import.meta.url,"BEOg1WTiXx");SML.di("./DyzvzwR0Ee.js",import.meta.url,"DyzvzwR0Ee");SML.di("./D4Ab94OqLr.js",import.meta.url,"D4Ab94OqLr");SML.di("./Beut7Nrs5X.js",import.meta.url,"Beut7Nrs5X");SML.di("./wzdls1o9Kk.js",import.meta.url,"wzdls1o9Kk");SML.di("./Bb-T49I7YR.js",import.meta.url,"Bb-T49I7YR");SML.di("./DVa-SVjWU5.js",import.meta.url,"DVa-SVjWU5");SML.di("./BRVVLb7Eld.js",import.meta.url,"BRVVLb7Eld");
SML.di("./CYrPuvCiTj.js",import.meta.url,"CYrPuvCiTj");SML.di("./DJaop39KNp.js",import.meta.url,"DJaop39KNp");SML.di("./rxXg4kAY8P.js",import.meta.url,"rxXg4kAY8P");SML.di("./3jd2bjBQv5.js",import.meta.url,"3jd2bjBQv5");SML.di("./DdQ8ToexAC.js",import.meta.url,"DdQ8ToexAC");SML.di("./BYLoYUGwdw.js",import.meta.url,"BYLoYUGwdw");SML.di("./eBJPTvxH2_.js",import.meta.url,"eBJPTvxH2_");SML.di("./hR5fJPqYWT.js",import.meta.url,"hR5fJPqYWT");SML.di("./CoC1qmwLAS.js",import.meta.url,"CoC1qmwLAS");SML.di("./B5hztqUCve.js",import.meta.url,"B5hztqUCve");SML.di("./B2lxgm_IZD.js",import.meta.url,"B2lxgm_IZD");SML.di("./BXJPp76cO9.js",import.meta.url,"BXJPp76cO9");SML.di("./BSVmU8k8Mu.js",import.meta.url,"BSVmU8k8Mu");SML.di("./CuihbHZvpB.js",import.meta.url,"CuihbHZvpB");SML.di("./B58tzg41t5.js",import.meta.url,"B58tzg41t5");SML.di("./BJdHdrH8mb.js",import.meta.url,"BJdHdrH8mb");SML.di("./wzdls1o9Kk.js",import.meta.url,"wzdls1o9Kk");
SML.dm("an-yWnjy9X",["CYrPuvCiTj","DJaop39KNp","rxXg4kAY8P","3jd2bjBQv5","DdQ8ToexAC","BYLoYUGwdw","eBJPTvxH2_","hR5fJPqYWT","CoC1qmwLAS","B5hztqUCve","B2lxgm_IZD","BXJPp76cO9","BSVmU8k8Mu","wzdls1o9Kk","CuihbHZvpB","B58tzg41t5","BJdHdrH8mb"],(async(e,i,t,a,s,n,r,o,d,l,u,N,p,h)=>{var c,m,f;!function(e){e.Everywhere="GLOBAL",e.UnitedStates="US",e.Argentina="AR",e.Australia="AU",e.Bulgaria="BG",e.Canada="CA",e.Chile="CL",e.Colombia="CO",e.Croatia="HR",e.CzechRepublic="CZ",e.Finland="FI",e.France="FR",e.Germany="DE",e.Greece="GR",e.Hungary="HU",e.Iceland="IS",e.India="IN",e.Ireland="IE",e.Italy="IT",e.Japan="JP",e.Malaysia="MY",e.Mexico="MX",e.NewZealand="NZ",e.Philippines="PH",e.Poland="PL",e.Portugal="PT",e.PuertoRico="PR",e.Romania="RO",e.Serbia="RS",e.Singapore="SG",e.Spain="ES",e.Sweden="SE",e.Taiwan="TW",e.Thailand="TH",e.Turkey="TR",e.UnitedKingdom="GB"}(c||(c={})),function(e){e.AllStates="",e.Alaska="AK",e.Alabama="AL",e.Arkansas="AR",e.Arizona="AZ",e.California="CA",e.Colorado="CO",e.Connecticut="CT",e.DistrictOfColumbia="DC",e.Delaware="DE",e.Florida="FL",e.Georgia="GA",e.Hawaii="HI",e.Iowa="IA",e.Idaho="ID",e.Illinois="IL",e.Indiana="IN",e.Kansas="KS",e.Kentucky="KY",e.Louisiana="LA",e.Massachusetts="MA",e.Maryland="MD",e.Maine="ME",e.Michigan="MI",e.Minnesota="MN",e.Missouri="MO",e.Mississippi="MS",e.Montana="MT",e.NorthCarolina="NC",e.NorthDakota="ND",e.Nebraska="NE",e.NewHampshire="NH",e.NewJersey="NJ",e.NewMexico="NM",e.Nevada="NV",e.NewYork="NY",e.Ohio="OH",e.Oklahoma="OK",e.Oregon="OR",e.Pennsylvania="PA",e.RhodeIsland="RI",e.SouthCarolina="SC",e.SouthDakota="SD",e.Tennessee="TN",e.Texas="TX",e.Utah="UT",e.Virginia="VA",e.Vermont="VT",e.Washington="WA",e.Wisconsin="WI",e.WestVirginia="WV",e.Wyoming="WY"}(m||(m={})),function(e){e.Show="show",e.Close="close"}(f||(f={}));const I=({notificationLevel:i,hfnUxUpdatesVariant:t,isUpdatesAllEnabled:a})=>{switch(i){case e.fa.All:return "All new posts";case e.fa.Frequent:return ((e,i)=>{if(i)return "Popular posts";switch(e){case n.b:return "Frequent notifications";case n.H:return "All notifications";default:return "Frequent";}})(t,a);case e.fa.Low:return (e=>{switch(e){case n.b:return "Allow notifications";case n.H:return "Personalized notifications";default:return "Low";}})(t);case e.fa.Off:return ((e,i)=>{const t="Off";return i?t:e===n.b||e===n.H?"None":t;})(t,a);default:return""}},T=(i,t,a)=>{switch(i){case e.fa.All:return t?.filled?n.n(t?.iconProps):n.a(t?.iconProps);case e.fa.Frequent:return a?t?.filled?r.n(t?.iconProps):l.n(t?.iconProps):t?.filled?n.n(t?.iconProps):n.a(t?.iconProps);case e.fa.Low:return t?.filled?r.n(t?.iconProps):l.n(t?.iconProps);case e.fa.Off:return t?.filled?o.n(t?.iconProps):d.n(t?.iconProps);default:return l.n(t?.iconProps)}},b=({notificationLevel:i,hfnUxUpdatesVariant:t,isUpdatesAllEnabled:a})=>{switch(i){case e.fa.All:return "Notifications set to All new posts";case e.fa.Frequent:return ((e,i)=>{if(i)return "Notifications set to Popular posts";switch(e){case n.b:case n.H:return "All notifications are turned on";default:return "Notifications set to frequent";}})(t,a);case e.fa.Low:return (e=>{switch(e){case n.b:return "Notifications are now allowed";case n.H:return "Personalized notifications are on";default:return "Notifications set to low";}})(t);case e.fa.Off:return ((e,i)=>{const t="Notifications turned off";return i?t:e===n.b||e===n.H?"No notifications":t;})(t,a);default:return""}},k=(i,t)=>t?i===e.fa.Low?e.fa.Off:i:i===e.fa.All?e.fa.Frequent:i,v=async i=>{const t=await e.ag({operation:e.af.UpdateSubredditSubscriptions,variables:{input:{inputs:[i]}}});if(!t?.data?.updateSubredditSubscriptions?.ok)throw new Error("Failed to update subreddit subscription")};let R=class extends e.s{constructor(){super(...arguments),this.name="",this.prefixedName="",this.subredditId="",this.isMuted=!1,this.isFavorite=!1,this.subscribed=!1,this.showJoinButton=!1,this.isUserLoggedIn=!1,this.buttonSize=e.v.Small,this.iconSize=e.I.Small,this.isCustomFeedEnabled=!1,this.isDropdownOpen=!1,this.isDisabled=!1,this.pubsub=new e.z(this),this.onFavoriteButtonClick=this.disableButtonDuringExecution((async()=>{try{this.subscribed||(await v({subredditId:this.subredditId,subscribeState:e.cI.Subscribed}),this.handleSubscriptionChange(e.cI.Subscribed));const i=this.isFavorite?e.b2.None:e.b2.Favorited;await(async i=>{const t=await e.ag({operation:e.af.UpdateSubredditFavoriteState,variables:{input:i}});if(!t?.data?.updateSubredditFavoriteState?.ok)throw new Error("Failed to update subreddit favorite state")})({subredditId:this.subredditId,favoriteState:i}),this.handleFavoriteStateChange(i)}catch(i){this.dispatchEvent(e.d("faceplate-alert",{level:e.a0.error,message:"Something went wrong",cause:e.bH(i)}))}})),this.onUnmuteButtonClick=this.disableButtonDuringExecution((async()=>{try{await(async i=>{const t=await e.ag({operation:e.af.DeleteSubredditMuteSettings,variables:{input:i}});if(!t?.data?.deleteSubredditMuteSettings?.ok)throw new Error("Failed to unmute subreddit")})({subredditId:this.subredditId}),this.handleUnmuteChange()}catch(i){this.dispatchEvent(e.d("faceplate-alert",{level:e.a0.error,message:"Something went wrong",cause:e.bH(i)}))}})),this.onJoinButtonClick=this.disableButtonDuringExecution((async i=>{try{i===e.cI.Subscribed&&e.fb(this.name).catch((()=>{})),await v({subredditId:this.subredditId,subscribeState:i}),this.handleSubscriptionChange(i)}catch(i){this.dispatchEvent(e.d("faceplate-alert",{level:e.a0.error,message:"Something went wrong",cause:e.bH(i)}))}})),this.activateFeature=e.w}static get styles(){return[e.t]}firstUpdated(){this.pubsub.subscribe(e.T.SubredditSubscriptionChange,(e=>{this.name===e.name&&(this.subscribed=e.subscribed)})),this.pubsub.subscribe(e.T.SubredditMuteStatusChange,(e=>{this.subredditId===e.subredditId&&(this.isMuted=e.isMuted)})),this.addToCustomFeedButton?.addEventListener("custom-feed-edit-button:dialog-loaded",this.setupAddToCustomFeedButtonListeners)}disconnectedCallback(){super.disconnectedCallback()}disableButton(){this.isDisabled=!0}enableButton(){this.isDisabled=!1}disableButtonDuringExecution(e){return async(...i)=>{this.disableButton(),await e(...i),this.enableButton()}}setupAddToCustomFeedButtonListeners(){const e=document.querySelector("rpl-dialog#custom-feed-add-modal");if(!e)return;const i=()=>{e.portalContainer.querySelector("custom-feed-edit-button")?.addEventListener("custom-feed-edit-button:dialog-loaded",(()=>{e.hide()}))};e.open?i():e.addEventListener("rpl-dialog:after-show",i)}handleFavoriteStateChange(i){this.isFavorite=i===e.b2.Favorited,e.p(e.T.SubredditFavoriteStatusChange,{id:this.subredditId,isFavorite:this.isFavorite});const t=this.isFavorite?`Added ${this.prefixedName} to favorites`:`Removed ${this.prefixedName} from favorites`;this.dispatchEvent(e.d("faceplate-alert",{level:e.a0.info,message:t,namedContent:{action:e.x``}}))}handleUnmuteChange(){this.isMuted=!1,e.p(e.T.SubredditMuteStatusChange,{subredditId:this.subredditId,isMuted:!1}),this.dispatchEvent(e.d("faceplate-alert",{level:e.a0.info,message:`Unmuted ${this.prefixedName}`,namedContent:{action:e.x``}}))}handleSubscriptionChange(i){this.subscribed=i===e.cI.Subscribed,e.p(e.T.SubredditSubscriptionChange,{name:this.name,subscribed:this.subscribed})}async openMuteConfirmationModal(){await this.activateFeature({name:e.fc});const i=document.getElementById(p.S);i?.openModal({subredditId:this.subredditId,prefixedName:this.prefixedName,onMuteRequestStart:this.disableButton.bind(this),onMuteRequestEnd:this.enableButton.bind(this)})}onDropdownOpen(){this.isDropdownOpen=!0}onDropdownClose(){this.isDropdownOpen=!1}renderAddToCustomFeedButton(){return this.isCustomFeedEnabled?e.x` <custom-feed-edit-button class="nd:visible" feature="${e.fd}" dialog-id="custom-feed-add-modal" query-params="${JSON.stringify({subredditId:this.subredditId})}"> ${t.l({label:"Add to custom feed",attributes:{tabindex:"0"}})} </custom-feed-edit-button> `:e.A;}renderFavoriteButton(){const e=this.isFavorite?"Remove from favorites":"Add to favorites";return t.l({label:e,onClick:this.onFavoriteButtonClick})}renderMuteButton(){if(!this.prefixedName)return"";const i=this.isMuted?`Unmute ${this.prefixedName}`:`Mute ${this.prefixedName}`,a=this.isMuted?"unmute":"mute",s=this.isMuted?this.onUnmuteButtonClick:this.openMuteConfirmationModal;return e.x` <faceplate-tracker source="subreddit_muting" action="${a}" noun="subreddit"> ${t.l({label:i,onClick:s})} </faceplate-tracker>`}renderJoinButton(){const i=this.subscribed?"Leave":"Join",a=this.subscribed?"unsubscribe":"subscribe",s=this.subscribed?e.cI.None:e.cI.Subscribed;return e.x`<faceplate-tracker source="community" action="click" noun="${a}"> ${t.l({label:i,onClick:()=>this.onJoinButtonClick(s)})} </faceplate-tracker>`}render(){return e.x`<faceplate-dropdown-menu class="nd:hidden" position="bottom-end" .onopen="${this.onDropdownOpen}" .onclose="${this.onDropdownClose}"> ${e.u({appearance:"bordered",attributes:{"aria-label":"Open overflow menu",disabled:this.isDisabled},size:this.buttonSize,leadingIcon:N.o({size:this.iconSize}),selected:this.isDropdownOpen})} <faceplate-menu slot="menu" class="max-h-[18rem] overflow-auto nd:hidden" hidden> ${this.isUserLoggedIn?e.x` ${[this.renderAddToCustomFeedButton(),this.renderFavoriteButton(),this.renderMuteButton()]} ${this.showJoinButton?this.renderJoinButton():""} `:""} <slot name="devvit-context-actions"></slot> </faceplate-menu> </faceplate-dropdown-menu>`;}};e._([e.n({type:String})],R.prototype,"name",void 0),e._([e.n({type:String,attribute:"prefixed-name"})],R.prototype,"prefixedName",void 0),e._([e.n({type:String,attribute:"subreddit-id"})],R.prototype,"subredditId",void 0),e._([e.n({type:Boolean,attribute:"is-muted"})],R.prototype,"isMuted",void 0),e._([e.n({type:Boolean,attribute:"is-favorite"})],R.prototype,"isFavorite",void 0),e._([e.n({type:Boolean,attribute:"subscribed"})],R.prototype,"subscribed",void 0),e._([e.n({type:Boolean,attribute:"show-join-button"})],R.prototype,"showJoinButton",void 0),e._([e.n({type:Boolean,attribute:"is-user-logged-in"})],R.prototype,"isUserLoggedIn",void 0),e._([e.n({type:String,attribute:"button-size"})],R.prototype,"buttonSize",void 0),e._([e.n({type:String,attribute:"icon-size"})],R.prototype,"iconSize",void 0),e._([e.n({type:Boolean,attribute:"allow-custom-feed"})],R.prototype,"isCustomFeedEnabled",void 0),e._([e.j()],R.prototype,"isDropdownOpen",void 0),e._([e.j()],R.prototype,"isDisabled",void 0),e._([e.Y(`custom-feed-edit-button[feature="${e.fd}"]`)],R.prototype,"addToCustomFeedButton",void 0),R=e._([e.e("shreddit-subreddit-overflow-control")],R);let g=class extends R{render(){if(!this.prefixedName)return e.x``;const i=this.isMuted?a.v({size:this.iconSize}):u.v({size:this.iconSize}),n=this.isMuted?"Unmute":"Mute",r=this.isMuted?"Show everything from this community":"Hide everything from this community",o=e.x` <div> <div>${n}</div> <div class="mt-0.5 text-12 text-secondary-weak">${r}</div> </div> `,d=this.isMuted?s.c({size:this.iconSize}):"",l=this.isMuted,N=this.isMuted?"unmute":"mute",p=this.isMuted?this.onUnmuteButtonClick:this.openMuteConfirmationModal;return e.x` <faceplate-tracker source="subreddit_muting" action="${N}" noun="subreddit"> ${t.l({label:o,leadingIcon:i,trailingSlot:d,selected:l,onClick:p,attributes:{role:"menuitem","aria-label":n}})} </faceplate-tracker> `}};g=e._([e.e("shreddit-notification-mute-control")],g);class E{constructor(i){this.host=i,this.emitNotificationFrequencyControlEvent=(...[i,t])=>e.k(this.host,e.c(i,{...t,action_info:{...t?.action_info,page_type:e.ar.Community}})),this.emitToggleCommunityAlertFromTelemetry=(e,i,t,a)=>{const s=t.toLowerCase();this.emitNotificationFrequencyControlEvent({source:"community",action:"set_frequency",noun:s},{subreddit:{id:e,name:i},action_info:{reason:a?.toLowerCase()}})}}}let S=e.ax;const A=[e.fa.Frequent,e.fa.Low,e.fa.Off],P=[e.fa.All,e.fa.Frequent,e.fa.Off];let L=class extends e.s{constructor(){super(...arguments),this.subredditId="",this.notificationLevel=e.fa.Low,this.buttonSize=e.v.Small,this.iconSize=e.I.Small,this.hfnUxUpdatesVariant="",this.isUpdatesAllEnabled=!1,this.subredditUpdatesAllClientsVariant="",this.shredditSubredditUpdatesAllVariant="",this.subredditUpdatesAllClientsVersion="",this.shredditSubredditUpdatesAllVersion="",this.prefixedName="",this.isMuted=!1,this.isDropdownOpen=!1,this.isDisabled=!1,this.pubsub=new e.z(this),this.telemetryEmitter=new E(this)}static get styles(){return[e.t]}connectedCallback(){super.connectedCallback(),this.pubsub.subscribe(e.T.SubredditMuteStatusChange,(e=>{this.subredditId===e.subredditId&&(this.isMuted=e.isMuted)})),this.notificationLevel=k(this.notificationLevel,this.isUpdatesAllEnabled)}async onItemSelect(i){if(this.notificationLevel!==i){this.telemetryEmitter.emitToggleCommunityAlertFromTelemetry(this.subredditId,this.prefixedName,i,this.notificationLevel),this.isDisabled=!0;try{const t=(i=>{switch(i){case e.fa.Frequent:return{isSubredditUpdatesInterestingPostEnabled:!0,isUpdateFromSubredditEnabled:!0};case e.fa.Low:return{isSubredditUpdatesInterestingPostEnabled:!1,isUpdateFromSubredditEnabled:!0};case e.fa.Off:default:return{isSubredditUpdatesInterestingPostEnabled:!1,isUpdateFromSubredditEnabled:!1}}})(i),a=await this.updateSubredditNotificationLevel(t,i);a?.data?.updateSubredditMuteAndNotificationLevelSettings?.ok?(this.notificationLevel=k(i,this.isUpdatesAllEnabled),this.handleUpdateSuccess(i)):this.handleUpdateError(i)}catch(e){this.handleUpdateError(i)}this.isDisabled=!1}}async updateSubredditNotificationLevel(i,t=e.fa.Off){return e.ag({operation:e.af.UpdateSubredditMuteAndNotificationLevelSettings,variables:{input:{subredditId:this.subredditId,...i,subredditNotificationLevel:t}}})}handleUpdateSuccess(i){this.dispatchEvent(e.d("faceplate-alert",{level:e.a0.success,message:b({notificationLevel:i,hfnUxUpdatesVariant:this.hfnUxUpdatesVariant,isUpdatesAllEnabled:this.isUpdatesAllEnabled}),namedContent:{icon:T(i,{iconProps:{size:e.I.Medium}},this.isUpdatesAllEnabled)??e.x``,action:e.x``}}))}handleUpdateError(t){const a=()=>this.pubsub.publish(e.T.TriggerFeedErrorBanner,{type:f.Close}),s=e.x`<div slot="leadingIcon">${i.w()}</div>`,n=e.x`<span slot="closeButton"> ${h.bd("plainInverted",{"aria-label":"close button",onclick:a})} </span>`,r=e.x` <div slot="actionButtons"> ${h.be([{children:"Retry",attributes:{onclick:()=>{a(),this.onItemSelect(t)}}}],"plainInverted")} </div>`,o={msg:"Error updating notifications",className:"my-lg",appearance:"plainInverted",shape:"rounded",children:e.x` ${s} ${r} ${n} `};this.pubsub.publish(e.T.TriggerFeedErrorBanner,{type:f.Show,data:o})}onDropdownOpen(){this.isDropdownOpen=!0,this.subredditUpdatesAllClientsVariant&&S({experimentName:"subreddit_updates_all_clients",variant:this.subredditUpdatesAllClientsVariant,experimentVersion:this.subredditUpdatesAllClientsVersion}),this.shredditSubredditUpdatesAllVariant&&S({experimentName:"shreddit_subreddit_updates_all",variant:this.shredditSubredditUpdatesAllVariant,experimentVersion:this.shredditSubredditUpdatesAllVersion})}onDropdownClose(){this.isDropdownOpen=!1}render(){const i=this.isUpdatesAllEnabled?P:A,r=this.hfnUxUpdatesVariant===n.b||this.hfnUxUpdatesVariant===n.H,o=r&&this.isMuted?a.v({size:this.iconSize}):T(this.notificationLevel||e.fa.Low,{filled:!0,iconProps:{size:this.iconSize}},this.isUpdatesAllEnabled);return e.x`<faceplate-dropdown-menu class="nd:hidden" position="bottom-end" .onopen="${this.onDropdownOpen.bind(this)}" .onclose="${this.onDropdownClose.bind(this)}"> ${e.u({appearance:"bordered",size:this.buttonSize,attributes:{disabled:this.isDisabled,role:"button","aria-label":"Notification frequency menu"},leadingIcon:o,selected:this.isDropdownOpen})} <faceplate-menu slot="menu" hidden> ${i.map((i=>{let a=!1,n=this.notificationLevel===i,o="";r&&(a=this.isMuted,n&&(n=!a),n&&(o=s.c({size:this.iconSize})));const d=I({notificationLevel:i,hfnUxUpdatesVariant:this.hfnUxUpdatesVariant,isUpdatesAllEnabled:this.isUpdatesAllEnabled});return e.x` ${t.l({label:d,leadingIcon:T(i,{filled:n},this.isUpdatesAllEnabled),trailingSlot:o,selected:n,disabled:a,attributes:{role:"menuitem","aria-label":`Notifications ${d}`},onClick:()=>this.onItemSelect(i)})}`;}))} ${r?e.x` <div class="rpl-divider my-1 h-px bg-neutral-border" role="separator"></div> <shreddit-notification-mute-control prefixed-name="${this.prefixedName}" subreddit-id="${this.subredditId}" ?is-muted="${this.isMuted}" icon-size="${this.iconSize}"></shreddit-notification-mute-control>`:e.x``} </faceplate-menu> </faceplate-dropdown-menu>`;}};return e._([e.n({type:String,attribute:"subreddit-id"})],L.prototype,"subredditId",void 0),e._([e.n({type:String,attribute:"notification-level"})],L.prototype,"notificationLevel",void 0),e._([e.n({type:String,attribute:"button-size"})],L.prototype,"buttonSize",void 0),e._([e.n({type:String,attribute:"icon-size"})],L.prototype,"iconSize",void 0),e._([e.n({type:String,attribute:"hfn-ux-updates-variant"})],L.prototype,"hfnUxUpdatesVariant",void 0),e._([e.n({type:Boolean,attribute:"is-updates-all-enabled"})],L.prototype,"isUpdatesAllEnabled",void 0),e._([e.n({type:String,attribute:"subreddit-updates-all-clients-variant"})],L.prototype,"subredditUpdatesAllClientsVariant",void 0),e._([e.n({type:String,attribute:"shreddit-subreddit-updates-all-variant"})],L.prototype,"shredditSubredditUpdatesAllVariant",void 0),e._([e.n({type:String,attribute:"subreddit-updates-all-clients-version"})],L.prototype,"subredditUpdatesAllClientsVersion",void 0),e._([e.n({type:String,attribute:"shreddit-subreddit-updates-all-version"})],L.prototype,"shredditSubredditUpdatesAllVersion",void 0),e._([e.n({type:String,attribute:"prefixed-name"})],L.prototype,"prefixedName",void 0),e._([e.n({type:Boolean,attribute:"is-muted"})],L.prototype,"isMuted",void 0),e._([e.j()],L.prototype,"isDropdownOpen",void 0),e._([e.j()],L.prototype,"isDisabled",void 0),L=e._([e.e("shreddit-notification-frequency-control")],L),{get F(){return f}}}));
SML.di("./DuqlmJMEve.js",import.meta.url,"DuqlmJMEve");SML.di("./DU3nojCjEU.js",import.meta.url,"DU3nojCjEU");SML.di("./CYrPuvCiTj.js",import.meta.url,"CYrPuvCiTj");
SML.di("./CYrPuvCiTj.js",import.meta.url,"CYrPuvCiTj");SML.di("./wzdls1o9Kk.js",import.meta.url,"wzdls1o9Kk");SML.di("./CPc507yujZ.js",import.meta.url,"CPc507yujZ");SML.di("./DiH4zLRIso.js",import.meta.url,"DiH4zLRIso");SML.di("./DNWCS1rLQE.js",import.meta.url,"DNWCS1rLQE");SML.di("./DFvuM_MTkg.js",import.meta.url,"DFvuM_MTkg");
SML.dm("gvJ_2jf75B",["CYrPuvCiTj","wzdls1o9Kk","CPc507yujZ","DiH4zLRIso","DNWCS1rLQE","DFvuM_MTkg"],(async(e,t,s)=>{let o=class extends e.s{constructor(){super(...arguments),this.isModNotesRailClientSourceLoaded=!1,this.isPDP=!1,this.isModRecruitingPage=!1,this.pubsub=new e.z(this),this.openModNoteRail=async e=>{const t=document.getElementById(s.c);try{const o=this.querySelector(`faceplate-partial[name="${s.d}"]`),i=this.querySelector(`shreddit-async-loader[name="${s.d}"]`);if(!o||!i)return;this.classList.remove("hidden"),o.classList.add("hidden"),t?.classList.remove("hidden");let l=s.e;for(const t in e){const s=e[t];l=l.replace(`/:${t}`,s?`/${s}`:"")}o.src=l;const d=document.querySelector(".right-sidebar");this.isModRecruitingPage&&d&&(d.classList.remove("hidden"),d.classList.add("s:block")),this.isModNotesRailClientSourceLoaded?await o.load():(await Promise.allSettled([i.load(),o.load()]),this.isModNotesRailClientSourceLoaded=!0),t?.classList.add("hidden"),o.classList.remove("hidden")}catch(e){}this.onScrollHandlerThrottled()},this.onScrollHandler=()=>{const e=this.getBoundingClientRect();this.style.height=`calc(100vh - ${e.top}px - ${this.isPDP?"16px":"0"}16px - 1px)`},this.onScrollHandlerThrottled=t.R(this.onScrollHandler,200,!0),this.handleCloseClick=()=>{this.classList.add("hidden"),e.p(e.T.ModNotesRailClose);const t=document.querySelector(".right-sidebar");this.isModRecruitingPage&&t&&(t.classList.add("hidden"),t.classList.remove("s:block"))},this.handleEscape=e=>{"Escape"===e.key&&this.handleCloseClick()}}connectedCallback(){super.connectedCallback(),this.pubsub.subscribe(e.T.ModNotesRailOpen,this.openModNoteRail,!1),this.pubsub.subscribe(e.T.ModNotesRailForceClose,this.handleCloseClick,!1),document.addEventListener("scroll",this.onScrollHandlerThrottled),document.addEventListener("keydown",this.handleEscape)}disconnectedCallback(){super.disconnectedCallback(),document.removeEventListener("scroll",this.onScrollHandlerThrottled),document.removeEventListener("keydown",this.handleEscape)}handleCloseKeyboardEnter(e){"Enter"===e.key&&this.handleCloseClick()}render(){return e.x` <slot></slot> <div class="absolute top-md right-md z-10" @click="${this.handleCloseClick}" @keyup="${this.handleCloseKeyboardEnter}"> ${e.u({leadingIcon:e.al({size:e.I.Small}),size:e.v.Small,attributes:{className:"opacity-80 button-media"}})} </div> `}};o.styles=[e.t,e.i`:host{display:block}`],e._([e.j()],o.prototype,"isModNotesRailClientSourceLoaded",void 0),e._([e.n({type:Boolean,attribute:"is-pdp"})],o.prototype,"isPDP",void 0),e._([e.n({type:Boolean,attribute:"mod-recruiting-page"})],o.prototype,"isModRecruitingPage",void 0),o=e._([e.e("mod-notes-rail-closer")],o)}));
SML.dm("gvWVn4JBWB",[],(async()=>{var t,a,n,i,o;return function(t){t.Control="control_1",t.Variant1="variant1",t.Variant2="variant2",t.Variant3="variant3",t.Variant4="variant4"}(t||(t={})),function(t){t.Control="control_1",t.Variant1="cbau_desktop_variant1",t.Variant2="cbau_desktop_variant2",t.Variant3="cbau_desktop_variant3",t.SlimVariant1="slim_cbau_desktop_variant1",t.SlimVariant2="slim_cbau_desktop_variant2",t.SlimVariant3="slim_cbau_desktop_variant3"}(a||(a={})),function(t){t.Full="full",t.Slim="slim"}(n||(n={})),function(t){t.Button="button",t.Scroll="scroll",t.Close="close"}(i||(i={})),function(t){t.Desktop="comment_block_auth_desktop",t.DesktopWithTimer="comment_block_auth_desktop_timer",t.Mobile="comment_block_auth_mobile"}(o||(o={})),{get C(){return i}}}));

SML.dm("lEw4CeTWZd",[],(async()=>{var e;!function(e){e[e.Pending=0]="Pending",e[e.Ready=1]="Ready"}(e||(e={}));return{N:{},R:{type:"REQUEST_FOCUS_COMMAND"},get a(){return e},b:"rte-ready-state-change",c:"rte-node-ready-state-change-event",d:"rte-node-error-event",e:"rte-node-error-resolve-event"}}));

SML.di("./CYrPuvCiTj.js",import.meta.url,"CYrPuvCiTj");SML.di("./wzdls1o9Kk.js",import.meta.url,"wzdls1o9Kk");
SML.dm("pfiQsiBZuw",["CYrPuvCiTj","wzdls1o9Kk"],(async(e,t)=>{class r{constructor(e,t){this.slotTrail=[],(this.host=e).addController(this),this.slotName=t}hostConnected(){let e=this.host;const t=[e];for(;e=e.getRootNode().host;)t.push(e);const r=t.pop();let a=r.querySelector(`[slot="${this.slotName}"]`);a||(a=document.createElement("div"),a.slot=this.slotName,r.appendChild(a)),this.slotted=a,t.forEach((e=>{const t=document.createElement("slot");t.name=t.slot=this.slotName,this.slotTrail.push(e.appendChild(t))}))}hostDisconnected(){for(;this.slotTrail.length>0;)this.slotTrail.pop()?.remove();this.slotted?.remove(),this.slotted=void 0}}var a;let n;!function(e){e.Render="render",e.Execute="execute"}(a||(a={}));const o=new Uint8Array(16);function i(){if(!n&&(n="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!n))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return n(o)}var c=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i;const s=[];for(let e=0;e<256;++e)s.push((e+256).toString(16).slice(1));function l(e,t=0){return(s[e[t+0]]+s[e[t+1]]+s[e[t+2]]+s[e[t+3]]+"-"+s[e[t+4]]+s[e[t+5]]+"-"+s[e[t+6]]+s[e[t+7]]+"-"+s[e[t+8]]+s[e[t+9]]+"-"+s[e[t+10]]+s[e[t+11]]+s[e[t+12]]+s[e[t+13]]+s[e[t+14]]+s[e[t+15]]).toLowerCase()}function h(e){if(!function(e){return"string"==typeof e&&c.test(e)}(e))throw TypeError("Invalid UUID");let t;const r=new Uint8Array(16);return r[0]=(t=parseInt(e.slice(0,8),16))>>>24,r[1]=t>>>16&255,r[2]=t>>>8&255,r[3]=255&t,r[4]=(t=parseInt(e.slice(9,13),16))>>>8,r[5]=255&t,r[6]=(t=parseInt(e.slice(14,18),16))>>>8,r[7]=255&t,r[8]=(t=parseInt(e.slice(19,23),16))>>>8,r[9]=255&t,r[10]=(t=parseInt(e.slice(24,36),16))/1099511627776&255,r[11]=t/4294967296&255,r[12]=t>>>24&255,r[13]=t>>>16&255,r[14]=t>>>8&255,r[15]=255&t,r}function u(e,t,r){function a(e,a,n,o){var i;if("string"==typeof e&&(e=function(e){e=unescape(encodeURIComponent(e));const t=[];for(let r=0;r<e.length;++r)t.push(e.charCodeAt(r));return t}(e)),"string"==typeof a&&(a=h(a)),16!==(null===(i=a)||void 0===i?void 0:i.length))throw TypeError("Namespace must be array-like (16 iterable integer values, 0-255)");let c=new Uint8Array(16+e.length);if(c.set(a),c.set(e,a.length),c=r(c),c[6]=15&c[6]|t,c[8]=63&c[8]|128,n){o=o||0;for(let e=0;e<16;++e)n[o+e]=c[e];return n}return l(c)}try{a.name=e}catch(e){}return a.DNS="6ba7b810-9dad-11d1-80b4-00c04fd430c8",a.URL="6ba7b811-9dad-11d1-80b4-00c04fd430c8",a}function p(e){return 14+(e+64>>>9<<4)+1}function d(e,t){const r=(65535&e)+(65535&t);return(e>>16)+(t>>16)+(r>>16)<<16|65535&r}function f(e,t,r,a,n,o){return d((i=d(d(t,e),d(a,o)))<<(c=n)|i>>>32-c,r);var i,c}function y(e,t,r,a,n,o,i){return f(t&r|~t&a,e,t,n,o,i)}function g(e,t,r,a,n,o,i){return f(t&a|r&~a,e,t,n,o,i)}function b(e,t,r,a,n,o,i){return f(t^r^a,e,t,n,o,i)}function m(e,t,r,a,n,o,i){return f(r^(t|~a),e,t,n,o,i)}u("v3",48,(function(e){if("string"==typeof e){const t=unescape(encodeURIComponent(e));e=new Uint8Array(t.length);for(let r=0;r<t.length;++r)e[r]=t.charCodeAt(r)}return function(e){const t=[],r=32*e.length,a="0123456789abcdef";for(let n=0;n<r;n+=8){const r=e[n>>5]>>>n%32&255,o=parseInt(a.charAt(r>>>4&15)+a.charAt(15&r),16);t.push(o)}return t}(function(e,t){e[t>>5]|=128<<t%32,e[p(t)-1]=t;let r=1732584193,a=-271733879,n=-1732584194,o=271733878;for(let t=0;t<e.length;t+=16){const i=r,c=a,s=n,l=o;r=y(r,a,n,o,e[t],7,-680876936),o=y(o,r,a,n,e[t+1],12,-389564586),n=y(n,o,r,a,e[t+2],17,606105819),a=y(a,n,o,r,e[t+3],22,-1044525330),r=y(r,a,n,o,e[t+4],7,-176418897),o=y(o,r,a,n,e[t+5],12,1200080426),n=y(n,o,r,a,e[t+6],17,-1473231341),a=y(a,n,o,r,e[t+7],22,-45705983),r=y(r,a,n,o,e[t+8],7,1770035416),o=y(o,r,a,n,e[t+9],12,-1958414417),n=y(n,o,r,a,e[t+10],17,-42063),a=y(a,n,o,r,e[t+11],22,-1990404162),r=y(r,a,n,o,e[t+12],7,1804603682),o=y(o,r,a,n,e[t+13],12,-40341101),n=y(n,o,r,a,e[t+14],17,-1502002290),a=y(a,n,o,r,e[t+15],22,1236535329),r=g(r,a,n,o,e[t+1],5,-165796510),o=g(o,r,a,n,e[t+6],9,-1069501632),n=g(n,o,r,a,e[t+11],14,643717713),a=g(a,n,o,r,e[t],20,-373897302),r=g(r,a,n,o,e[t+5],5,-701558691),o=g(o,r,a,n,e[t+10],9,38016083),n=g(n,o,r,a,e[t+15],14,-660478335),a=g(a,n,o,r,e[t+4],20,-405537848),r=g(r,a,n,o,e[t+9],5,568446438),o=g(o,r,a,n,e[t+14],9,-1019803690),n=g(n,o,r,a,e[t+3],14,-187363961),a=g(a,n,o,r,e[t+8],20,1163531501),r=g(r,a,n,o,e[t+13],5,-1444681467),o=g(o,r,a,n,e[t+2],9,-51403784),n=g(n,o,r,a,e[t+7],14,1735328473),a=g(a,n,o,r,e[t+12],20,-1926607734),r=b(r,a,n,o,e[t+5],4,-378558),o=b(o,r,a,n,e[t+8],11,-2022574463),n=b(n,o,r,a,e[t+11],16,1839030562),a=b(a,n,o,r,e[t+14],23,-35309556),r=b(r,a,n,o,e[t+1],4,-1530992060),o=b(o,r,a,n,e[t+4],11,1272893353),n=b(n,o,r,a,e[t+7],16,-155497632),a=b(a,n,o,r,e[t+10],23,-1094730640),r=b(r,a,n,o,e[t+13],4,681279174),o=b(o,r,a,n,e[t],11,-358537222),n=b(n,o,r,a,e[t+3],16,-722521979),a=b(a,n,o,r,e[t+6],23,76029189),r=b(r,a,n,o,e[t+9],4,-640364487),o=b(o,r,a,n,e[t+12],11,-421815835),n=b(n,o,r,a,e[t+15],16,530742520),a=b(a,n,o,r,e[t+2],23,-995338651),r=m(r,a,n,o,e[t],6,-198630844),o=m(o,r,a,n,e[t+7],10,1126891415),n=m(n,o,r,a,e[t+14],15,-1416354905),a=m(a,n,o,r,e[t+5],21,-57434055),r=m(r,a,n,o,e[t+12],6,1700485571),o=m(o,r,a,n,e[t+3],10,-1894986606),n=m(n,o,r,a,e[t+10],15,-1051523),a=m(a,n,o,r,e[t+1],21,-2054922799),r=m(r,a,n,o,e[t+8],6,1873313359),o=m(o,r,a,n,e[t+15],10,-30611744),n=m(n,o,r,a,e[t+6],15,-1560198380),a=m(a,n,o,r,e[t+13],21,1309151649),r=m(r,a,n,o,e[t+4],6,-145523070),o=m(o,r,a,n,e[t+11],10,-1120210379),n=m(n,o,r,a,e[t+2],15,718787259),a=m(a,n,o,r,e[t+9],21,-343485551),r=d(r,i),a=d(a,c),n=d(n,s),o=d(o,l)}return[r,a,n,o]}(function(e){if(0===e.length)return[];const t=8*e.length,r=new Uint32Array(p(t));for(let a=0;a<t;a+=8)r[a>>5]|=(255&e[a/8])<<a%32;return r}(e),8*e.length))}));var k={randomUUID:"undefined"!=typeof crypto&&crypto.randomUUID&&crypto.randomUUID.bind(crypto)};function v(e,t,r){if(k.randomUUID&&!e)return k.randomUUID();const a=(e=e||{}).random||(e.rng||i)();return a[6]=15&a[6]|64,a[8]=63&a[8]|128,l(a)}function w(e,t,r,a){switch(e){case 0:return t&r^~t&a;case 1:case 3:return t^r^a;case 2:return t&r^t&a^r&a}}function S(e,t){return e<<t|e>>>32-t}u("v5",80,(function(e){const t=[1518500249,1859775393,2400959708,3395469782],r=[1732584193,4023233417,2562383102,271733878,3285377520];if("string"==typeof e){const t=unescape(encodeURIComponent(e));e=[];for(let r=0;r<t.length;++r)e.push(t.charCodeAt(r))}else Array.isArray(e)||(e=Array.prototype.slice.call(e));e.push(128);const a=e.length/4+2,n=Math.ceil(a/16),o=new Array(n);for(let t=0;t<n;++t){const r=new Uint32Array(16);for(let a=0;a<16;++a)r[a]=e[64*t+4*a]<<24|e[64*t+4*a+1]<<16|e[64*t+4*a+2]<<8|e[64*t+4*a+3];o[t]=r}o[n-1][14]=8*(e.length-1)/Math.pow(2,32),o[n-1][14]=Math.floor(o[n-1][14]),o[n-1][15]=8*(e.length-1)&4294967295;for(let e=0;e<n;++e){const a=new Uint32Array(80);for(let t=0;t<16;++t)a[t]=o[e][t];for(let e=16;e<80;++e)a[e]=S(a[e-3]^a[e-8]^a[e-14]^a[e-16],1);let n=r[0],i=r[1],c=r[2],s=r[3],l=r[4];for(let e=0;e<80;++e){const r=Math.floor(e/20),o=S(n,5)+w(r,i,c,s)+l+t[r]+a[e]>>>0;l=s,s=c,c=S(i,30)>>>0,i=n,n=o}r[0]=r[0]+n>>>0,r[1]=r[1]+i>>>0,r[2]=r[2]+c>>>0,r[3]=r[3]+s>>>0,r[4]=r[4]+l>>>0}return[r[0]>>24&255,r[0]>>16&255,r[0]>>8&255,255&r[0],r[1]>>24&255,r[1]>>16&255,r[1]>>8&255,255&r[1],r[2]>>24&255,r[2]>>16&255,r[2]>>8&255,255&r[2],r[3]>>24&255,r[3]>>16&255,r[3]>>8&255,255&r[3],r[4]>>24&255,r[4]>>16&255,r[4]>>8&255,255&r[4]]}));const A="captcha-update",R=Symbol("mixins/with-recaptcha");return {C:A,L:r,get R(){return a},W:function(n){if(e.dm(n,R))return n;class o extends n{constructor(){super(...arguments),this.recaptchaMethod=a.Render,this.renderString="explicit",this.uuid=v(),this.captchaSlotName=`${this.tagName.toLowerCase()}-captcha-element-${this.uuid}`,this.captchaSlotController=new r(this,this.captchaSlotName)}async insertRecaptchaScript(e=this.renderString,r=this.captchaSiteKey,a=this.captchaAction,n=this.recaptchaMethod){r&&(this.recaptchaController||(this.recaptchaController=new t.aT({siteKey:e||r,action:a})),await this.recaptchaController.loadScript(),this.onRecaptchaLoad(r,a,n))}removeRecaptchaScript(){this.recaptchaController?.destroy(),this.recaptchaController=void 0}onRecaptchaLoad(t=this.captchaSiteKey,r=this.captchaAction,n=this.recaptchaMethod){const o=window.grecaptcha;if(!o||n===a.Execute)return;const i=a=>{this.captchaToken=a,this.dispatchEvent(e.d(A,{token:a,siteKey:t,action:r,recaptchaMethod:n}))};o.enterprise.ready((async()=>{this.captchaWidgetId=o.enterprise.render(this.captchaSlotController.slotted,{action:r||"",sitekey:t||"",theme:e.ab()?"dark":"light",callback:i,"expired-callback":i,"error-callback":i})}))}async getRecaptchaToken(e=this.captchaAction,r=this.captchaSiteKey){if(this.recaptchaMethod=a.Execute,this.captchaToken=void 0,!window.grecaptcha?.enterprise?.execute)throw"reCAPTCHA not ready or site key not set.";if(!e||!r)throw new Error("reCAPTCHA action or site key is not provided.");this.recaptchaController||(this.recaptchaController=new t.aT({siteKey:r,action:e}));try{const t=await this.recaptchaController.generateToken(e);return this.captchaToken=t,t}catch(e){throw`Error in reCAPTCHA token retrieval: ${e}`}}resetRecaptcha(e=this.recaptchaMethod){const t=window.grecaptcha;t&&e!==a.Execute&&void 0!==this.captchaWidgetId&&t.enterprise.ready((async()=>{t.enterprise.reset(this.captchaWidgetId),this.captchaToken=void 0}))}async getRecaptchaTokenSafe(e,t){let r=null;try{r=(await this.getRecaptchaToken(e,t))??null}catch(e){r=null}return r}dispatchRecaptchaFailureAlert(){const t=e.d("faceplate-alert",{level:e.a0.error,message:"An error occurred. Please disable any extensions or try using a different web browser to continue.",cause:"recaptcha-failure"});this.dispatchEvent(t)}renderRecaptcha(t=this.captchaSiteKey,r=this.recaptchaMethod){return t?r===a.Execute?e.A:e.x`<slot name="${this.captchaSlotName}"></slot>`:e.A}renderRecaptchaIn(t,r=this.captchaSiteKey,a=this.recaptchaMethod){e.aR(this.renderRecaptcha(r,a),t)}}return o[R]=!0,e._([e.n({type:String,attribute:"captcha-action"})],o.prototype,"captchaAction",void 0),e._([e.n({type:String,attribute:"captcha-site-key"})],o.prototype,"captchaSiteKey",void 0),e._([e.n({type:String,attribute:"captcha-method"})],o.prototype,"recaptchaMethod",void 0),e._([e.n({type:String,attribute:"render-string"})],o.prototype,"renderString",void 0),e._([e.j()],o.prototype,"captchaToken",void 0),o}};}));
SML.di("./CYrPuvCiTj.js",import.meta.url,"CYrPuvCiTj");SML.di("./wzdls1o9Kk.js",import.meta.url,"wzdls1o9Kk");SML.di("./G2F6lxYj4X.js",import.meta.url,"G2F6lxYj4X");SML.di("./DuqlmJMEve.js",import.meta.url,"DuqlmJMEve");
SML.dm("xqJXKBx1h9",["CYrPuvCiTj","wzdls1o9Kk","G2F6lxYj4X","DuqlmJMEve"],(async(t,e,a)=>{let l=class extends t.s{constructor(){super(...arguments),this.isLoading=!0,this.isSubmittable=!1,this.postId="",this._windowEvents=new t.E(this,(()=>window)),this.handleOpenModalEvent=this._windowEvents.define(a.O,(async t=>{this.isSubmittable=!1,this.isLoading=!0,this.showModal(),await this.activateFormContentFeature(t.detail.postId),this.postId=t.detail.postId,this.isLoading=!1}))}get oldPostLevel(){return this.querySelector('[name="old-post-level"]')?.value}get oldIsFilterEnabled(){return"true"===this.querySelector('[name="old-is-filter-enabled"]')?.value}activateFormContentFeature(e){return t.w({name:t.hn,routeParams:{postId:e},renderMode:t.P.Contents})}showModal(){this.modal?.showModal()}closeModal(){this.modal?.close()}buildAlert(a){const l=a?t.a0.success:t.a0.error;return this.dispatchEvent(t.d("faceplate-alert",{level:l,message:e.bF(a)}))}async onSave(){const t=this.querySelector('[name="post-level"][checked]'),e=this.querySelector('[name="is-filter-enabled"]');t?.value&&e?(this.submitRequest(t.value,null!=e.value),this.emitV2Event(t.value,null!=e.value)):(this.buildAlert(!1),this.isSubmittable=!0)}async submitRequest(t,e){try{this.isSubmittable=!1;const a=await this.invokeGQL(t,e);this.inspectResp(a)}catch(t){this.buildAlert(!1),this.isSubmittable=!0}}invokeGQL(e,a){return t.ag({operation:t.af.UpdatePostLevelCrowdControlSettings,variables:{id:this.postId,level:e,filterIsEnabled:a,shouldIncludeUpdatePostCrowdControlFilter:a!==this.oldIsFilterEnabled,shouldIncludeUpdatePostCrowdControlLevel:e!==this.oldPostLevel}})}inspectResp(t){let e=!1;"updatePostCrowdControlFilter"in t.data&&"updatePostCrowdControlLevel"in t.data?t.data.updatePostCrowdControlFilter?.ok&&t.data.updatePostCrowdControlLevel?.ok&&(e=!0):"updatePostCrowdControlFilter"in t.data?t.data.updatePostCrowdControlFilter?.ok&&(e=!0):"updatePostCrowdControlLevel"in t.data&&t.data.updatePostCrowdControlLevel?.ok&&(e=!0),e?(this.buildAlert(!0),this.closeModal()):(this.buildAlert(!1),this.isSubmittable=!0)}isContentLoading(){return this.isLoading}emitV2Event(t,e){const a=this.querySelector('[name="subreddit-id"]'),l=this.querySelector('[name="subreddit-name"]'),s={id:a?.value||"",name:l?.value||""},o=this.querySelector('[name="author-id"]'),i={id:this.postId,author:{id:o?.value||""}};this.buildAndTrack("crowd_control_individual_post",i,s,{value:t,old_value:`${this.oldPostLevel}`}),this.buildAndTrack("crowd_control_individual_post_filter",i,s,{value:`${e}`,old_value:`${this.oldIsFilterEnabled}`})}buildAndTrack(e,a,l,s){const o={post:a,subreddit:l,setting:s},i=t.c({source:"post_mod_action_menu",action:"save",noun:e},o);t.k(this,i)}handleInput(){this.isSubmittable=!0}render(){return t.x` <faceplate-modal inFocusTrap class="max-w-md w-full"> <div slot="title"> ${"Adjust post crowd control"} </div> <div slot="closeButton"> ${t.u({appearance:"secondary",leadingIcon:t.al({size:t.I.Small}),size:t.v.Small,attributes:{type:"button",onclick:this.closeModal}})} </div> ${this.isLoading?t.x`<div class="w-full"> <faceplate-shimmer shape="pill" class="mt-xs mb-xs w-full h-3xl"></faceplate-shimmer> <faceplate-shimmer shape="pill" class="mt-xs mb-xs w-full h-3xl"></faceplate-shimmer> <faceplate-shimmer shape="pill" class="mt-xs mb-xs w-full h-3xl"></faceplate-shimmer> <faceplate-shimmer shape="pill" class="mt-xs mb-xs w-full h-3xl"></faceplate-shimmer> <faceplate-shimmer shape="pill" class="mt-xs mb-xs w-full h-3xl"></faceplate-shimmer> <faceplate-shimmer shape="pill" class="mt-xs mb-xs w-2/3 h-lg"></faceplate-shimmer> </div>`:t.x`<slot @input="${this.handleInput}"></slot>`} <div slot="primaryButton"> ${t.u({children:"Save",appearance:"primary",attributes:{type:"submit",onclick:this.onSave,disabled:!this.isSubmittable}})} </div> <div slot="secondaryButton"> ${t.u({children:"Cancel",appearance:"plain",attributes:{type:"button",onclick:this.closeModal}})} </div> </faceplate-modal> `;}};l.styles=[t.t],t._([t.j()],l.prototype,"isLoading",void 0),t._([t.j()],l.prototype,"isSubmittable",void 0),t._([t.j()],l.prototype,"postId",void 0),t._([t.Y("faceplate-modal")],l.prototype,"modal",void 0),l=t._([t.e("post-level-crowd-control-modal")],l)}));
SML.di("./CYrPuvCiTj.js",import.meta.url,"CYrPuvCiTj");SML.di("./BDJEoZTk8V.js",import.meta.url,"BDJEoZTk8V");SML.di("./BaesuPO9Of.js",import.meta.url,"BaesuPO9Of");SML.di("./8JomLCOUok.js",import.meta.url,"8JomLCOUok");SML.di("./wBVuScw3I9.js",import.meta.url,"wBVuScw3I9");SML.di("./CaD8uOkU6B.js",import.meta.url,"CaD8uOkU6B");SML.di("./BHQvZGlXFT.js",import.meta.url,"BHQvZGlXFT");SML.di("./BDCIgAVnes.js",import.meta.url,"BDCIgAVnes");SML.di("./an-yWnjy9X.js",import.meta.url,"an-yWnjy9X");SML.di("./CQXEpftGjH.js",import.meta.url,"CQXEpftGjH");SML.di("./CZtlI9NlXS.js",import.meta.url,"CZtlI9NlXS");SML.di("./Cv4uyJM28X.js",import.meta.url,"Cv4uyJM28X");SML.di("./D61rLtGDFy.js",import.meta.url,"D61rLtGDFy");SML.di("./CdUaC_ScVb.js",import.meta.url,"CdUaC_ScVb");SML.di("./NKGs0TL7Ol.js",import.meta.url,"NKGs0TL7Ol");SML.di("./D6195OvUrb.js",import.meta.url,"D6195OvUrb");SML.di("./BNh_w6AGE-.js",import.meta.url,"BNh_w6AGE-");SML.di("./fqQLNYfMji.js",import.meta.url,"fqQLNYfMji");SML.di("./DJaop39KNp.js",import.meta.url,"DJaop39KNp");SML.di("./rxXg4kAY8P.js",import.meta.url,"rxXg4kAY8P");SML.di("./3jd2bjBQv5.js",import.meta.url,"3jd2bjBQv5");SML.di("./DdQ8ToexAC.js",import.meta.url,"DdQ8ToexAC");SML.di("./BYLoYUGwdw.js",import.meta.url,"BYLoYUGwdw");SML.di("./eBJPTvxH2_.js",import.meta.url,"eBJPTvxH2_");SML.di("./hR5fJPqYWT.js",import.meta.url,"hR5fJPqYWT");SML.di("./CoC1qmwLAS.js",import.meta.url,"CoC1qmwLAS");SML.di("./B5hztqUCve.js",import.meta.url,"B5hztqUCve");SML.di("./B2lxgm_IZD.js",import.meta.url,"B2lxgm_IZD");SML.di("./BXJPp76cO9.js",import.meta.url,"BXJPp76cO9");SML.di("./BSVmU8k8Mu.js",import.meta.url,"BSVmU8k8Mu");SML.di("./CuihbHZvpB.js",import.meta.url,"CuihbHZvpB");SML.di("./B58tzg41t5.js",import.meta.url,"B58tzg41t5");SML.di("./DcxJbk2B3f.js",import.meta.url,"DcxJbk2B3f");SML.di("./wzdls1o9Kk.js",import.meta.url,"wzdls1o9Kk");SML.di("./BJdHdrH8mb.js",import.meta.url,"BJdHdrH8mb");
SML.dm("yqE82LCjaP",["CYrPuvCiTj","BDJEoZTk8V","BaesuPO9Of","8JomLCOUok","wBVuScw3I9","CaD8uOkU6B","BHQvZGlXFT","BDCIgAVnes","an-yWnjy9X","CQXEpftGjH","CZtlI9NlXS","Cv4uyJM28X","D61rLtGDFy","CdUaC_ScVb","NKGs0TL7Ol","D6195OvUrb","BNh_w6AGE-","fqQLNYfMji","DJaop39KNp","rxXg4kAY8P","3jd2bjBQv5","DdQ8ToexAC","BYLoYUGwdw","eBJPTvxH2_","hR5fJPqYWT","CoC1qmwLAS","B5hztqUCve","B2lxgm_IZD","BXJPp76cO9","BSVmU8k8Mu","CuihbHZvpB","B58tzg41t5","DcxJbk2B3f","wzdls1o9Kk","BJdHdrH8mb"],(async(t,e,n,s,a,i,r,o)=>{const l="line-clamp-3",u="hidden",c="description",p="show-more-btn";let x=class extends t.s{constructor(){super(...arguments),this.name="",this.subredditId="",this.prefixedName="",this.displayName="",this.description="",this.subscribers=0,this.bannerUrl="",this.routerName="",this.bannerFallbackBackgroundColor="",this.notificationLevel="",this.idCardWidgetId="",this.subscribersText="",this.currentlyViewingText="",this.weeklyActiveUsersCount=0,this.weeklyContributionsCount=0,this.isActivityIndicatorsEnabled=!1,this.isModerator=!1,this.hasModqueueAccess=!1,this.isSubscribed=!1,this.isMuted=!1,this.isFavorite=!1,this.isUserLoggedIn=!1,this.isPdpRoute=!1,this.newBannerExperimentEnabled=!1,this.allowIdCardEdit=!1,this.isCustomFeedEnabled=!1,this.active=0,this.hasCommunityGuide=!1,this.isCommunityGuideExperimentEnabled=!1,this.isModInsightsWidgetExperimentEnabled=!1,this.isModOnboardingGuidesExperimentEnabled=!1,this.isRedesign=!1,this.hfnUxUpdatesVariant="",this.isUpdatesAllEnabled=!1,this.subredditUpdatesAllClientsVariant="",this.shredditSubredditUpdatesAllVariant="",this.subredditUpdatesAllClientsVersion="",this.shredditSubredditUpdatesAllVersion="",this.pubsub=new t.z(this),this._activateFeature=async e=>t.w(e),this._getPageType=t.N,this.onSubscriptionChange=async e=>{let n;this.name===e.name&&(n=e.subscribed&&this.isSubscribed!==e.subscribed,this.isSubscribed=e.subscribed),n&&this.isPdpRoute&&this.isUserLoggedIn&&this.subredditId&&(await this._activateFeature({name:t.gE,queryParams:{subredditId:this.subredditId,pageType:String(this._getPageType())}}))},this.renderJoinOrModButton=()=>{if(!this.newBannerExperimentEnabled||this.isPdpRoute)return this.isModerator?t.u({appearance:"primary",size:t.v.Small,attributes:{href:this.hasModqueueAccess?`/mod/${this.name}/queue`:`/mod/${this.name}/insights`,className:"modtools-btn"},children:"Mod Tools"}):t.x`<faceplate-tracker source="community" action="click" noun="${this.isSubscribed?"unsubscribe":"subscribe"}" data-faceplate-tracking-context="${JSON.stringify({subreddit:{id:this.subredditId,name:this.name}})}"> <shreddit-join-button name="${this.name}" prefixed-name="${this.prefixedName}" subreddit-id="${this.subredditId}" button-classes="min-w-[70px]" subscribe-label="${"Join"}" unsubscribe-label="${"Joined"}" unsubscribe-button-type-override="bordered" ?subscribed="${this.isSubscribed}"></shreddit-join-button></faceplate-tracker>`;},this.renderNotificationControl=()=>this.isSubscribed?t.x` <shreddit-notification-frequency-control subreddit-id="${this.subredditId}" notification-level="${this.notificationLevel}" hfn-ux-updates-variant="${t.aa(this.hfnUxUpdatesVariant)}" ?is-updates-all-enabled="${this.isUpdatesAllEnabled}" subreddit-updates-all-clients-variant="${this.subredditUpdatesAllClientsVariant}" shreddit-subreddit-updates-all-variant="${this.shredditSubredditUpdatesAllVariant}" subreddit-updates-all-clients-version="${this.subredditUpdatesAllClientsVersion}" shreddit-subreddit-updates-all-version="${this.shredditSubredditUpdatesAllVersion}" prefixed-name="${this.prefixedName}" ?is-muted="${this.isMuted}"></shreddit-notification-frequency-control>`:"",this.renderOverflowControl=()=>this.isUserLoggedIn?t.x`<shreddit-subreddit-overflow-control name="${this.name}" prefixed-name="${this.prefixedName}" subreddit-id="${this.subredditId}" ?is-muted="${this.isMuted}" ?is-favorite="${this.isFavorite}" ?subscribed="${this.isSubscribed}" ?show-join-button="${this.isModerator}" ?is-user-logged-in="${this.isUserLoggedIn}" ?allow-custom-feed="${this.isCustomFeedEnabled}"></shreddit-subreddit-overflow-control>`:"",this.checkDescriptionForClamping=()=>{if(!this.isPdpRoute)return;const t=this.getDescriptionContainer();if(!t)return;this.isTextClamped(t)&&this.unhideShowMoreButton()},this.showMoreText=()=>{this.hideShowMoreButton(),this.removeLineClampFromDescription()},this.removeLineClampFromDescription=()=>{const t=this.getDescriptionContainer();t?.classList.remove(l)},this.hideShowMoreButton=()=>{const t=this.getShowMoreButton();t?.classList.add(u)},this.unhideShowMoreButton=()=>{const t=this.getShowMoreButton();t?.classList.remove(u)},this.onShowCommunityGuide=async()=>{try{await this._activateFeature({name:t.gF,routeParams:{subredditName:this.name},renderMode:t.P.Contents})}catch{this.showErrorToast("Failed to load community guide")}},this.onShowModOnboardingGuidePreview=async()=>{try{await this._activateFeature({name:t.gG,routeParams:{subredditName:this.name},queryParams:{"show-mod-guide":"true"},renderMode:t.P.Contents})}catch{this.showErrorToast("Failed to load mod onboarding guide preview")}},this.isTextClamped=t=>t.scrollHeight>t.clientHeight,this.getDescriptionContainer=()=>this.shadowRoot?.getElementById(c),this.getShowMoreButton=()=>this.shadowRoot?.getElementById(p),this.renderShowMoreButton=()=>t.u({appearance:this.isRedesign?"secondary":"plain",attributes:{id:p,className:`${u} ${this.isRedesign?"":"text-[color:var(--color-a-default)]"} no-underline mb-xs`,onclick:this.showMoreText},children:"Show more",size:t.v.Small}),this.renderDescription=()=>this.description?t.x`<div id="${c}" class="i18n-subreddit-description description text-start text-neutral-content-weak overflow-hidden ${this.isPdpRoute?l:""}"> ${this.description} </div> ${this.renderShowMoreButton()}`:t.x``}static get styles(){return[t.t,t.V(":host {\n  text-align: center;\n}\n.r-slash-icon {\n  border: 2px solid var(--color-tone-1);\n  border-radius: 50%;\n  overflow: hidden;\n}\nh2 {\n  font: var(--font-title-h2);\n  font-weight: bold;\n  margin: 0.5rem 0 0;\n}\n.description,\n.subscribers {\n  margin-bottom: 0.5rem;\n}\n.prefixedName {\n  font-size: 18px;\n}\na {\n  color: inherit;\n  text-decoration: none;\n}\n.header {\n  background-position: top center;\n  background-repeat: no-repeat;\n  background-size: auto 6.8em;\n  position: relative;\n}\n.banner {\n  background-color: var(--color-tone-6);\n  background-position: center center;\n  background-size: cover;\n  margin-top: -1rem;\n  margin-left: -1rem;\n  margin-right: -1rem;\n}\n")]}firstUpdated(){const e=this.parentElement;e&&e.classList.add("xs:block"),this.pubsub.subscribe(t.T.SubredditSubscriptionChange,this.onSubscriptionChange),requestAnimationFrame((()=>{this.checkDescriptionForClamping()}));const n=new CustomEvent(t.dv,{bubbles:!0,composed:!0,detail:{name:"shreddit-subreddit-header"}});this.isModOnboardingGuidesExperimentEnabled&&window.location.search.includes("show-mod-guide=true")&&this.onShowModOnboardingGuidePreview(),this.dispatchEvent(n)}renderPdpRouteHeader(){const e=this.mtSeoSubredditLink?this.mtSeoSubredditLink:`/${this.prefixedName}/`;return t.x` <div class="${"flex justify-between"}"> ${this.prefixedName?t.x` <span class="flex items-center truncate"> <a href="${e}" class="flex justify-between truncate focus-visible:-outline-offset-1"> <div class="prefixedName font-bold truncate me-xs">${this.prefixedName}</div> </a> <slot name="community-status"></slot> </span> `:""} <div class="flex items-center gap-sm">${this.renderJoinOrModButton()}</div> </div>`}renderHeader(){return this.routerName===o.s?t.x`<h2 class="uppercase text-start font-semibold text-neutral-content-weak text-12 mb-sm"> ${"About community"} </h2>`:!this.newBannerExperimentEnabled||this.isPdpRoute?t.x` <div class="${"flex flex-col gap-sm pt-md"}"> <div class="flex justify-between gap-sm"> ${this.prefixedName?t.x` <a class="prefixedName font-bold truncate me-xs no-underline" href="${`/${this.prefixedName}`}">${this.prefixedName}</a> `:""} ${this.renderOverflowControl()} </div> <div class="flex items-center gap-sm"> ${this.renderJoinOrModButton()} ${this.renderNotificationControl()} </div> </div>`:void 0;}renderBanner(){return this.routerName===o.s||this.isPdpRoute?"":t.x`<div class="banner rounded-t-[8px]" style="${t.a1({backgroundImage:this.bannerUrl?`url('${this.bannerUrl}')`:"",backgroundColor:this.bannerFallbackBackgroundColor?this.bannerFallbackBackgroundColor:"",height:this.bannerUrl?"128px":""})}"></div>`}renderWeeklyActivityIndicators(){if(!this.isActivityIndicatorsEnabled||this.isModInsightsWidgetExperimentEnabled&&this.isModerator||this.routerName===o.s||!this.weeklyActiveUsersCount)return t.A;const e=t.x` <span class="text-neutral-content-strong"> <strong><slot name="weekly-active-users-count"></slot></strong></span> `,n=this.subscribersText?t.x` ${e} <span class="text-[12px] text-neutral-content-weak">${this.subscribersText}</span> `:t.bZ({one:t.x` ${e} <span class="text-[12px] text-neutral-content-weak">Weekly visitor</span> `,other:t.x` ${e} <span class="text-[12px] text-neutral-content-weak">Weekly visitors</span> `,count:this.weeklyActiveUsersCount}),s=t.x` <span class="text-neutral-content-strong"> <strong><slot name="weekly-contributions-count"></slot></strong></span> `,a=this.currentlyViewingText?t.x` ${s} <span class="text-[12px] text-neutral-content-weak">${this.currentlyViewingText}</span> `:t.bZ({one:t.x` ${s} <span class="text-[12px] text-neutral-content-weak">Weekly contribution</span> `,other:t.x` ${s} <span class="text-[12px] text-neutral-content-weak">Weekly contributions</span> `,count:this.weeklyContributionsCount});return t.x` <div class="flex flex-wrap text-start mt-xs gap-2xs" data-testid="activity-indicators"> <div class="flex flex-col items-start flex-grow">${n}</div> ${this.weeklyContributionsCount?t.x`<div class="flex flex-col items-start flex-grow">${a}</div>`:t.A} </div> `}renderSubscribers(){if(this.isModInsightsWidgetExperimentEnabled&&this.isModerator||this.routerName===o.s||!this.subscribers)return t.A;const e=t.x` <span class="text-neutral-content-strong"> <strong id="subscribers"> <faceplate-number number="${this.subscribers}" pretty> </faceplate-number> </strong></span> `,n=this.subscribersText?t.x` ${e} <span class="text-[12px] text-neutral-content-weak subscribers-text"> ${this.subscribersText} </span> `:t.bZ({one:t.x` ${e} <span class="text-[12px] text-neutral-content-weak subscribers-text"> Member </span> `,other:t.x` ${e} <span class="text-[12px] text-neutral-content-weak subscribers-text"> Members </span> `,count:this.subscribers}),s=t.x` <strong id="online"><faceplate-number number="${this.active}" pretty></faceplate-number></strong> `,a="Online",i=this.currentlyViewingText||a;return t.x` <div class="flex flex-wrap text-start subscribers mt-xs gap-2xs"> <div class="flex flex-col items-start flex-grow">${n}</div> ${this.active?t.x` <div class="active flex flex-col items-start flex-grow"> <span class="text-neutral-content-strong"> ${s} </span> <span class="text-[12px] text-neutral-content-weak"> <span class="inline-flex bg-kiwigreen-400 rounded-full w-xs h-xs"></span> <span class="currently-viewing-text">${i}</span> </span> </div> `:""} <div class="flex flex-grow flex-col items-start"> <slot name="directoryLink"></slot> </div> </div> `}showErrorToast(e){const n=t.d("faceplate-alert",{message:e,level:t.a0.error,cause:"uncategorized"});this.dispatchEvent(n)}renderCommunityGuideBtn(){if(!this.isCommunityGuideExperimentEnabled)return"";if(this.hasCommunityGuide){const e=i.g(this.subredditId,this.name);return t.x` <faceplate-tracker class="mt-sm mb-md" source="${i.S.COMMUNITY_GUIDE}" action="${i.A.CLICK}" noun="${i.N.OPEN}" data-faceplate-tracking-context="${e}"> ${t.u({appearance:"secondary",size:t.v.Small,attributes:{id:"show-community-guide-btn",className:"w-full",onclick:this.onShowCommunityGuide},children:"Community Guide",leadingIcon:s.b({size:t.I.ExtraSmall})})} </faceplate-tracker> `;}return this.isModerator?t.u({appearance:"bordered",size:t.v.Small,attributes:{id:"community-guide-settings",className:"w-full mt-sm mb-md",href:`/mod/${this.name}/guide`,target:"_blank"},children:"Add a community guide",leadingIcon:e.a({size:t.I.ExtraSmall})}):"";}renderModOnboardingGuidePreviewBtn(){return this.isModerator&&this.isModOnboardingGuidesExperimentEnabled?t.x`${t.u({appearance:"secondary",size:t.v.Small,attributes:{id:"show-mod-onboarding-guide-preview-btn",className:"w-full mt-sm",onclick:this.onShowModOnboardingGuidePreview},children:"Mod Guide",leadingIcon:a.t({size:t.I.Small})})}`:"";}renderTitle(){const e=this.displayName||this.name,s=t.x`<div id="title" class="i18n-subreddit-title text-start text-neutral-content ${this.isRedesign?"text-16 font-semibold":"text-14 font-bold"} mt-xs"> ${e} </div>`;return this.allowIdCardEdit&&!this.isPdpRoute?t.x` <div class="flex justify-between items-end py-xs"> ${s} <community-widget-edit-button subreddit-name="${this.name}" page-id="${r.E.IdCard}" widget-id="${this.idCardWidgetId}"> <faceplate-tracker source="community_widgets" action="click" noun="edit_widget" data-faceplate-tracking-context="${JSON.stringify({widget:{type:r.W[r.E.IdCard],target_subreddit_name:this.name,target_subreddit_id:this.subredditId}})}"> ${t.u({appearance:"secondary",shape:"pill",attributes:{type:"button",className:"w-lg h-lg","aria-label":"Edit subreddit ID card"},leadingIcon:n.e({size:t.I.ExtraSmall}),size:t.v.ExtraSmall})} </faceplate-tracker> </community-widget-edit-button> </div>`:s;}render(){const e="Community Info Section";return t.x` <div class="header ${this.isRedesign?"":"px-md"}"> <h1 class="absolute -top-full -start-full w-px h-px overflow-hidden" aria-label="${e}"> ${e} </h1> ${this.renderBanner()} ${this.isPdpRoute?this.renderPdpRouteHeader():this.renderHeader()} <div class="flex flex-col justify-start"> ${this.renderTitle()} ${this.renderDescription()} <slot name="community-details"></slot> ${this.renderModOnboardingGuidePreviewBtn()} ${this.renderCommunityGuideBtn()} </div> <div class="flex flex-col justify-start ${this.isActivityIndicatorsEnabled&&this.isModerator&&this.isModInsightsWidgetExperimentEnabled&&!this.isCommunityGuideExperimentEnabled?"mt-md":""}"> <slot name="mod-insights-widget"></slot> </div> ${this.isActivityIndicatorsEnabled?this.renderWeeklyActivityIndicators():this.renderSubscribers()} </div> `}};t._([t.n({type:String})],x.prototype,"name",void 0),t._([t.n({type:String,attribute:"subreddit-id"})],x.prototype,"subredditId",void 0),t._([t.n({type:String,attribute:"prefixed-name"})],x.prototype,"prefixedName",void 0),t._([t.n({type:String,attribute:"display-name"})],x.prototype,"displayName",void 0),t._([t.n({type:String})],x.prototype,"description",void 0),t._([t.n({type:Number})],x.prototype,"subscribers",void 0),t._([t.n({type:String,attribute:"banner-url"})],x.prototype,"bannerUrl",void 0),t._([t.n({type:String,attribute:"router-name"})],x.prototype,"routerName",void 0),t._([t.n({type:String,attribute:"banner-background-fallback-color"})],x.prototype,"bannerFallbackBackgroundColor",void 0),t._([t.n({type:String,attribute:"notification-level"})],x.prototype,"notificationLevel",void 0),t._([t.n({type:String,attribute:"id-card-widget-id"})],x.prototype,"idCardWidgetId",void 0),t._([t.n({type:String,attribute:"subscribers-text"})],x.prototype,"subscribersText",void 0),t._([t.n({type:String,attribute:"currently-viewing-text"})],x.prototype,"currentlyViewingText",void 0),t._([t.n({type:Number,attribute:"weekly-active-users"})],x.prototype,"weeklyActiveUsersCount",void 0),t._([t.n({type:Number,attribute:"weekly-contributions"})],x.prototype,"weeklyContributionsCount",void 0),t._([t.n({type:Boolean,attribute:"activity-indicators-enabled"})],x.prototype,"isActivityIndicatorsEnabled",void 0),t._([t.n({type:Boolean,attribute:"is-moderator"})],x.prototype,"isModerator",void 0),t._([t.n({type:Boolean,attribute:"modqueue-access"})],x.prototype,"hasModqueueAccess",void 0),t._([t.n({type:Boolean,attribute:"is-subscribed"})],x.prototype,"isSubscribed",void 0),t._([t.n({type:Boolean,attribute:"is-muted"})],x.prototype,"isMuted",void 0),t._([t.n({type:Boolean,attribute:"is-favorite"})],x.prototype,"isFavorite",void 0),t._([t.n({type:Boolean,attribute:"is-user-logged-in"})],x.prototype,"isUserLoggedIn",void 0),t._([t.n({type:Boolean,attribute:"is-pdp-route"})],x.prototype,"isPdpRoute",void 0),t._([t.n({type:Boolean,attribute:"new-banner-experiment-enabled"})],x.prototype,"newBannerExperimentEnabled",void 0),t._([t.n({type:Boolean,attribute:"allow-id-card-edit"})],x.prototype,"allowIdCardEdit",void 0),t._([t.n({type:Boolean,attribute:"allow-custom-feed"})],x.prototype,"isCustomFeedEnabled",void 0),t._([t.n({type:Number})],x.prototype,"active",void 0),t._([t.n({type:Boolean,attribute:"has-community-guide"})],x.prototype,"hasCommunityGuide",void 0),t._([t.n({type:Boolean,attribute:"community-guide-experiment-enabled"})],x.prototype,"isCommunityGuideExperimentEnabled",void 0),t._([t.n({type:Boolean,attribute:"is-mod-insights-widget-experiment-enabled"})],x.prototype,"isModInsightsWidgetExperimentEnabled",void 0),t._([t.n({type:Boolean,attribute:"mod-onboarding-guides-experiment-enabled"})],x.prototype,"isModOnboardingGuidesExperimentEnabled",void 0),t._([t.n({type:Boolean,attribute:"redesign"})],x.prototype,"isRedesign",void 0),t._([t.n({type:String,attribute:"mt-seo-subreddit-link"})],x.prototype,"mtSeoSubredditLink",void 0),t._([t.n({type:String,attribute:"hfn-ux-updates-variant"})],x.prototype,"hfnUxUpdatesVariant",void 0),t._([t.n({type:Boolean,attribute:"is-updates-all-enabled"})],x.prototype,"isUpdatesAllEnabled",void 0),t._([t.n({type:String,attribute:"subreddit-updates-all-clients-variant"})],x.prototype,"subredditUpdatesAllClientsVariant",void 0),t._([t.n({type:String,attribute:"shreddit-subreddit-updates-all-variant"})],x.prototype,"shredditSubredditUpdatesAllVariant",void 0),t._([t.n({type:String,attribute:"subreddit-updates-all-clients-version"})],x.prototype,"subredditUpdatesAllClientsVersion",void 0),t._([t.n({type:String,attribute:"shreddit-subreddit-updates-all-version"})],x.prototype,"shredditSubredditUpdatesAllVersion",void 0),x=t._([t.e("shreddit-subreddit-header")],x)}));
SML.di("./CYrPuvCiTj.js",import.meta.url,"CYrPuvCiTj");
SML.dm("zsgsVPyBfM",["CYrPuvCiTj"],(async e=>{var t;let n=t=class extends e.s{constructor(){super(),this.pubsub=new e.z(this),this.handleTriggerAction=e=>{this.openMenu(e?.target)},this.openMenu=async e=>{await t.activateCommunityAppearanceMenuContentFeature(this.subredditName),await customElements.whenDefined("community-appearance-menu"),this.communityAppearanceMenu=this.communityAppearanceMenu||this.querySelector("community-appearance-menu"),this.communityAppearanceMenu&&await this.communityAppearanceMenu.updateComplete,e&&this.communityAppearanceMenu?.navigateToSubPage(e),this.communityAppearanceMenu?.show()},this.communityAppearanceMenu=this.querySelector("community-appearance-menu")}connectedCallback(){super.connectedCallback(),this.pubsub.subscribe(e.T.TriggerCommunityAppearanceMenu,this.handleTriggerAction)}async firstUpdated(){this.directLink&&this.openMenu(this.directLink)}static async activateCommunityAppearanceMenuContentFeature(t){await e.w({name:e.g2,routeParams:{subredditName:t}})}render(){return e.x`<slot></slot>`}};e._([e.n({type:String,attribute:"subreddit-name"})],n.prototype,"subredditName",void 0),e._([e.n({type:String,attribute:"direct-link"})],n.prototype,"directLink",void 0),n=t=e._([e.e("community-appearance-settings-controller")],n)}));